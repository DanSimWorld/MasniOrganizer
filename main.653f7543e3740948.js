"use strict";(self.webpackChunkMasniOrganizer=self.webpackChunkMasniOrganizer||[]).push([[792],{325:()=>{function Zu(t,e){return Object.is(t,e)}let bt=null,Fa=!1,Va=1;const Or=Symbol("SIGNAL");function Ee(t){const e=bt;return bt=t,e}const Of={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function My(t){if(Fa)throw new Error("");if(null===bt)return;bt.consumerOnSignalRead(t);const e=bt.nextProducerIndex++;Vf(bt),e<bt.producerNode.length&&bt.producerNode[e]!==t&&el(bt)&&Ff(bt.producerNode[e],bt.producerIndexOfThis[e]),bt.producerNode[e]!==t&&(bt.producerNode[e]=t,bt.producerIndexOfThis[e]=el(bt)?bR(t,bt,e):0),bt.producerLastReadVersion[e]=t.version}function IR(t){if((!el(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Va)){if(!t.producerMustRecompute(t)&&!xy(t))return t.dirty=!1,void(t.lastCleanEpoch=Va);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Va}}function ER(t){if(void 0===t.liveConsumerNode)return;const e=Fa;Fa=!0;try{for(const n of t.liveConsumerNode)n.dirty||TR(n)}finally{Fa=e}}function wR(){return!1!==bt?.consumerAllowSignalWrites}function TR(t){t.dirty=!0,ER(t),t.consumerMarkedDirty?.(t)}function kf(t){return t&&(t.nextProducerIndex=0),Ee(t)}function Py(t,e){if(Ee(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(el(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ff(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function xy(t){Vf(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(IR(n),r!==n.version))return!0}return!1}function Ny(t){if(Vf(t),el(t))for(let e=0;e<t.producerNode.length;e++)Ff(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function bR(t,e,n){if(CR(t),0===t.liveConsumerNode.length&&DR(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=bR(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ff(t,e){if(CR(t),1===t.liveConsumerNode.length&&DR(t))for(let r=0;r<t.producerNode.length;r++)Ff(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Vf(i),i.producerIndexOfThis[r]=e}}function el(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Vf(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function CR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function DR(t){return void 0!==t.producerNode}const Oy=Symbol("UNSET"),ky=Symbol("COMPUTING"),Lf=Symbol("ERRORED"),Lq={...Of,value:Oy,dirty:!0,error:null,equal:Zu,producerMustRecompute:t=>t.value===Oy||t.value===ky,producerRecomputeValue(t){if(t.value===ky)throw new Error("Detected cycle in computations.");const e=t.value;t.value=ky;const n=kf(t);let r;try{r=t.computation()}catch(i){r=Lf,t.error=i}finally{Py(t,n)}e!==Oy&&e!==Lf&&r!==Lf&&t.equal(e,r)?t.value=e:(t.value=r,t.version++)}};let AR=function Uq(){throw new Error};function SR(){AR()}let Uf=null;function RR(t,e){wR()||SR(),t.equal(t.value,e)||(t.value=e,function Gq(t){t.version++,function Fq(){Va++}(),ER(t),Uf?.()}(t))}const Hq={...Of,equal:Zu,value:void 0};function xe(t){return"function"==typeof t}function Fy(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Vy=Fy(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function jf(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class mn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(xe(r))try{r()}catch(o){e=o instanceof Vy?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{NR(o)}catch(s){e=e??[],s instanceof Vy?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Vy(e)}}add(e){var n;if(e&&e!==this)if(this.closed)NR(e);else{if(e instanceof mn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&jf(n,e)}remove(e){const{_finalizers:n}=this;n&&jf(n,e),e instanceof mn&&e._removeParent(this)}}mn.EMPTY=(()=>{const t=new mn;return t.closed=!0,t})();const PR=mn.EMPTY;function xR(t){return t instanceof mn||t&&"closed"in t&&xe(t.remove)&&xe(t.add)&&xe(t.unsubscribe)}function NR(t){xe(t)?t():t.unsubscribe()}const ms={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Bf={setTimeout(t,e,...n){const{delegate:r}=Bf;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Bf;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function OR(t){Bf.setTimeout(()=>{const{onUnhandledError:e}=ms;if(!e)throw t;e(t)})}function tl(){}const zq=Ly("C",void 0,void 0);function Ly(t,e,n){return{kind:t,value:e,error:n}}let _s=null;function $f(t){if(ms.useDeprecatedSynchronousErrorHandling){const e=!_s;if(e&&(_s={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=_s;if(_s=null,n)throw r}}else t()}class Uy extends mn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xR(e)&&e.add(this)):this.destination=Zq}static create(e,n,r){return new By(e,n,r)}next(e){this.isStopped?$y(function Kq(t){return Ly("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?$y(function Wq(t){return Ly("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$y(zq,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Yq=Function.prototype.bind;function jy(t,e){return Yq.call(t,e)}class Jq{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Hf(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Hf(r)}else Hf(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Hf(n)}}}class By extends Uy{constructor(e,n,r){let i;if(super(),xe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ms.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jy(e.next,o),error:e.error&&jy(e.error,o),complete:e.complete&&jy(e.complete,o)}):i=e}this.destination=new Jq(i)}}function Hf(t){ms.useDeprecatedSynchronousErrorHandling?function Qq(t){ms.useDeprecatedSynchronousErrorHandling&&_s&&(_s.errorThrown=!0,_s.error=t)}(t):OR(t)}function $y(t,e){const{onStoppedNotification:n}=ms;n&&Bf.setTimeout(()=>n(t,e))}const Zq={closed:!0,next:tl,error:function Xq(t){throw t},complete:tl},Hy="function"==typeof Symbol&&Symbol.observable||"@@observable";function ys(t){return t}function kR(t){return 0===t.length?ys:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let dt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function n3(t){return t&&t instanceof Uy||function t3(t){return t&&xe(t.next)&&xe(t.error)&&xe(t.complete)}(t)&&xR(t)}(n)?n:new By(n,r,i);return $f(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=FR(r))((i,o)=>{const s=new By({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Hy](){return this}pipe(...n){return kR(n)(this)}toPromise(n){return new(n=FR(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function FR(t){var e;return null!==(e=t??ms.Promise)&&void 0!==e?e:Promise}const r3=Fy(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let _n=(()=>{class t extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new VR(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new r3}next(n){$f(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){$f(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){$f(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?PR:(this.currentObservers=null,o.push(n),new mn(()=>{this.currentObservers=null,jf(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new dt;return n.source=this,n}}return t.create=(e,n)=>new VR(e,n),t})();class VR extends _n{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:PR}}class Ir extends _n{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function LR(t){return xe(t?.lift)}function Bt(t){return e=>{if(LR(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ot(t,e,n,r,i){return new i3(t,e,n,r,i)}class i3 extends Uy{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ae(t,e){return Bt((n,r)=>{let i=0;n.subscribe(Ot(r,o=>{r.next(t.call(e,o,i++))}))})}const Gf=Fy(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Er(t,e){return Bt((n,r)=>{let i=0;n.subscribe(Ot(r,o=>t.call(e,o,i++)&&r.next(o)))})}const kr=new dt(t=>t.complete());function $n(t){return t<=0?()=>kr:Bt((e,n)=>{let r=0;e.subscribe(Ot(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function qf(t){return Bt((e,n)=>{let r=!1;e.subscribe(Ot(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function UR(t=s3){return Bt((e,n)=>{let r=!1;e.subscribe(Ot(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function s3(){return new Gf}function go(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Er((i,o)=>t(i,o,r)):ys,$n(1),n?qf(e):UR(()=>new Gf))}const jR="https://g.co/ng/security#xss";class V extends Error{constructor(e,n){super(function mo(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Oi(t){return{toString:t}.toString()}const Ua="__parameters__";function Ba(t,e,n){return Oi(()=>{const r=function Gy(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,u,d){const h=c.hasOwnProperty(Ua)?c[Ua]:Object.defineProperty(c,Ua,{value:[]})[Ua];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const rt=globalThis;function Be(t){for(let e in t)if(t[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function a3(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function $t(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map($t).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function qy(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const u3=Be({__forward_ref__:Be});function Je(t){return t.__forward_ref__=Je,t.toString=function(){return $t(this())},t}function ce(t){return Wf(t)?t():t}function Wf(t){return"function"==typeof t&&t.hasOwnProperty(u3)&&t.__forward_ref__===Je}function ie(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function $a(t){return{providers:t.providers||[],imports:t.imports||[]}}function Kf(t){return GR(t,Yf)||GR(t,qR)}function GR(t,e){return t.hasOwnProperty(e)?t[e]:null}function Qf(t){return t&&(t.hasOwnProperty(zy)||t.hasOwnProperty(g3))?t[zy]:null}const Yf=Be({\u0275prov:Be}),zy=Be({\u0275inj:Be}),qR=Be({ngInjectableDef:Be}),g3=Be({ngInjectorDef:Be});class z{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ie({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Jy(t){return t&&!!t.\u0275providers}const nl=Be({\u0275cmp:Be}),Xy=Be({\u0275dir:Be}),Zy=Be({\u0275pipe:Be}),WR=Be({\u0275mod:Be}),ki=Be({\u0275fac:Be}),rl=Be({__NG_ELEMENT_ID__:Be}),KR=Be({__NG_ENV_ID__:Be});function pe(t){return"string"==typeof t?t:null==t?"":String(t)}function ev(t,e){throw new V(-201,!1)}var Ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ce||{});let tv;function QR(){return tv}function Hn(t){const e=tv;return tv=t,e}function YR(t,e,n){const r=Kf(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ce.Optional?null:void 0!==e?e:void ev()}const il={},nv="__NG_DI_FLAG__",Jf="ngTempTokenPath",E3=/\n/gm,JR="__source";let Ha;function yo(t){const e=Ha;return Ha=t,e}function b3(t,e=Ce.Default){if(void 0===Ha)throw new V(-203,!1);return null===Ha?YR(t,void 0,e):Ha.get(t,e&Ce.Optional?null:void 0,e)}function me(t,e=Ce.Default){return(QR()||b3)(ce(t),e)}function L(t,e=Ce.Default){return me(t,Xf(e))}function Xf(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function rv(t){const e=[];for(let n=0;n<t.length;n++){const r=ce(t[n]);if(Array.isArray(r)){if(0===r.length)throw new V(900,!1);let i,o=Ce.Default;for(let s=0;s<r.length;s++){const a=r[s],c=C3(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(me(i,o))}else e.push(me(r))}return e}function ol(t,e){return t[nv]=e,t.prototype[nv]=e,t}function C3(t){return t[nv]}const iv=ol(Ba("Optional"),8),ov=ol(Ba("SkipSelf"),4);function vs(t,e){return t.hasOwnProperty(ki)?t[ki]:null}function Ga(t,e){t.forEach(n=>Array.isArray(n)?Ga(n,e):e(n))}function ZR(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Zf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ir(t,e,n){let r=qa(t,e);return r>=0?t[1|r]=n:(r=~r,function eM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function av(t,e){const n=qa(t,e);if(n>=0)return t[1|n]}function qa(t,e){return function tM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const ti={},Oe=[],Fr=new z(""),nM=new z("",-1),cv=new z("");class tp{get(e,n=il){if(n===il){const r=new Error(`NullInjectorError: No provider for ${$t(e)}!`);throw r.name="NullInjectorError",r}return n}}var np=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(np||{}),Vr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Vr||{}),vo=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(vo||{});function x3(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function uv(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];iM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function rM(t){return 3===t||4===t||6===t}function iM(t){return 64===t.charCodeAt(0)}function sl(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||oM(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function oM(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const sM="ng-template";function N3(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==x3(e[i+1].toLowerCase(),n,0))return!0}else if(lv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function lv(t){return 4===t.type&&t.value!==sM}function O3(t,e,n){return e===(4!==t.type||n?t.value:sM)}function k3(t,e,n){let r=4;const i=t.attrs,o=null!==i?function L3(t){for(let e=0;e<t.length;e++)if(rM(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!O3(t,c,n)||""===c&&1===e.length){if(Lr(r))return!1;s=!0}}else if(8&r){if(null===i||!N3(t,i,c,n)){if(Lr(r))return!1;s=!0}}else{const u=e[++a],d=F3(c,i,lv(t),n);if(-1===d){if(Lr(r))return!1;s=!0;continue}if(""!==u){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&u!==h){if(Lr(r))return!1;s=!0}}}}else{if(!s&&!Lr(r)&&!Lr(c))return!1;if(s&&Lr(c))continue;s=!1,r=c|1&r}}return Lr(r)||s}function Lr(t){return!(1&t)}function F3(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function U3(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function aM(t,e,n=!1){for(let r=0;r<e.length;r++)if(k3(t,e[r],n))return!0;return!1}function cM(t,e){return t?":not("+e.trim()+")":e}function B3(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Lr(s)&&(e+=cM(o,i),i=""),r=s,o=o||!Lr(r);n++}return""!==i&&(e+=cM(o,i)),e}function ni(t){return Oi(()=>{const e=lM(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===np.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Vr.Emulated,styles:t.styles||Oe,_:null,schemas:t.schemas||null,tView:null,id:""};dM(n);const r=t.dependencies;return n.directiveDefs=rp(r,!1),n.pipeDefs=rp(r,!0),n.id=function W3(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function G3(t){return Te(t)||Ht(t)}function q3(t){return null!==t}function al(t){return Oi(()=>({type:t.type,bootstrap:t.bootstrap||Oe,declarations:t.declarations||Oe,imports:t.imports||Oe,exports:t.exports||Oe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function uM(t,e){if(null==t)return ti;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a=vo.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==vo.None?[r,a]:r,e[o]=s):n[o]=r}return n}function de(t){return Oi(()=>{const e=lM(t);return dM(e),e})}function qn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Te(t){return t[nl]||null}function Ht(t){return t[Xy]||null}function sn(t){return t[Zy]||null}function yn(t,e){const n=t[WR]||null;if(!n&&!0===e)throw new Error(`Type ${$t(t)} does not have '\u0275mod' property.`);return n}function lM(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ti,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Oe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uM(t.inputs,e),outputs:uM(t.outputs),debugInfo:null}}function dM(t){t.features?.forEach(e=>e(t))}function rp(t,e){if(!t)return null;const n=e?sn:G3;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(q3)}function Is(t){return{\u0275providers:t}}function K3(...t){return{\u0275providers:dv(0,t),\u0275fromNgModule:!0}}function dv(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Ga(e,s=>{const a=s;ip(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&hM(i,o),n}function hM(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];hv(i,o=>{e(o,r)})}}function ip(t,e,n,r){if(!(t=ce(t)))return!1;let i=null,o=Qf(t);const s=!o&&Te(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const c=t.ngModule;if(o=Qf(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)ip(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Ga(o.imports,d=>{ip(d,e,n,r)&&(u||=[],u.push(d))})}finally{}void 0!==u&&hM(u,e)}if(!a){const u=vs(i)||(()=>new i);e({provide:i,useFactory:u,deps:Oe},i),e({provide:cv,useValue:i,multi:!0},i),e({provide:Fr,useValue:()=>me(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=t;hv(c,d=>{e(d,u)})}}}return i!==t&&void 0!==t.providers}function hv(t,e){for(let n of t)Jy(n)&&(n=n.\u0275providers),Array.isArray(n)?hv(n,e):e(n)}const Q3=Be({provide:String,useValue:Be});function fv(t){return null!==t&&"object"==typeof t&&Q3 in t}function Es(t){return"function"==typeof t}const pv=new z(""),op={},J3={};let gv;function sp(){return void 0===gv&&(gv=new tp),gv}class or{}class za extends or{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_v(e,s=>this.processProvider(s)),this.records.set(nM,Wa(void 0,this)),i.has("environment")&&this.records.set(or,Wa(void 0,this));const o=this.records.get(pv);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cv,Oe,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=Ee(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=yo(this),r=Hn(void 0);try{return e()}finally{yo(n),Hn(r)}}get(e,n=il,r=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(KR))return e[KR](this);r=Xf(r);const o=yo(this),s=Hn(void 0);try{if(!(r&Ce.SkipSelf)){let c=this.records.get(e);if(void 0===c){const u=function nz(t){return"function"==typeof t||"object"==typeof t&&t instanceof z}(e)&&Kf(e);c=u&&this.injectableDefInScope(u)?Wa(mv(e),op):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ce.Self?sp():this.parent).get(e,n=r&Ce.Optional&&n===il?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Jf]=a[Jf]||[]).unshift($t(e)),o)throw a;return function D3(t,e,n,r){const i=t[Jf];throw e[JR]&&i.unshift(e[JR]),t.message=function A3(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=$t(e);if(Array.isArray(e))i=e.map($t).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):$t(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(E3,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Jf]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Hn(s),yo(o)}}resolveInjectorInitializers(){const e=Ee(null),n=yo(this),r=Hn(void 0);try{const o=this.get(Fr,Oe,Ce.Self);for(const s of o)s()}finally{yo(n),Hn(r),Ee(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push($t(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new V(205,!1)}processProvider(e){let n=Es(e=ce(e))?e:ce(e&&e.provide);const r=function Z3(t){return fv(t)?Wa(void 0,t.useValue):Wa(gM(t),op)}(e);if(!Es(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Wa(void 0,op,!0),i.factory=()=>rv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=Ee(null);try{return n.value===op&&(n.value=J3,n.value=n.factory()),"object"==typeof n.value&&n.value&&function tz(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ce(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function mv(t){const e=Kf(t),n=null!==e?e.factory:vs(t);if(null!==n)return n;if(t instanceof z)throw new V(204,!1);if(t instanceof Function)return function X3(t){if(t.length>0)throw new V(204,!1);const n=function p3(t){return t&&(t[Yf]||t[qR])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new V(204,!1)}function gM(t,e,n){let r;if(Es(t)){const i=ce(t);return vs(i)||mv(i)}if(fv(t))r=()=>ce(t.useValue);else if(function pM(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...rv(t.deps||[]));else if(function fM(t){return!(!t||!t.useExisting)}(t))r=()=>me(ce(t.useExisting));else{const i=ce(t&&(t.useClass||t.provide));if(!function ez(t){return!!t.deps}(t))return vs(i)||mv(i);r=()=>new i(...rv(t.deps))}return r}function Wa(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function _v(t,e){for(const n of t)Array.isArray(n)?_v(n,e):n&&Jy(n)?_v(n.\u0275providers,e):e(n)}function Eo(t,e){t instanceof za&&t.assertNotDestroyed();const r=yo(t),i=Hn(void 0);try{return e()}finally{yo(r),Hn(i)}}const ht=0,G=1,se=2,kt=3,Ur=4,an=5,xn=6,Qa=7,Xe=8,Ft=9,ri=10,ue=11,ul=12,yM=13,Ya=14,ft=15,ws=16,Ja=17,Fi=18,Xa=19,vM=20,wo=21,cp=22,wr=23,re=25,Iv=1,ll=6,ii=7,Za=9,Ct=10;var lp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(lp||{});function qt(t){return Array.isArray(t)&&"object"==typeof t[Iv]}function vn(t){return Array.isArray(t)&&!0===t[Iv]}function Ev(t){return!!(4&t.flags)}function Ts(t){return t.componentOffset>-1}function dp(t){return!(1&~t.flags)}function jr(t){return!!t.template}function dl(t){return!!(512&t[se])}class pz{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function bM(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function Tr(){return CM}function CM(t){return t.type.prototype.ngOnChanges&&(t.setInput=mz),gz}function gz(){const t=AM(this),e=t?.current;if(e){const n=t.previous;if(n===ti)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mz(t,e,n,r,i){const o=this.declaredInputs[r],s=AM(t)||function _z(t,e){return t[DM]=e}(t,{previous:ti,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new pz(u&&u.currentValue,n,c===ti),bM(t,e,i,n)}Tr.ngInherit=!0;const DM="__ngSimpleChanges__";function AM(t){return t[DM]||null}const oi=function(t,e,n){};function ke(t){for(;Array.isArray(t);)t=t[ht];return t}function hl(t,e){return ke(e[t])}function Nn(t,e){return ke(e[t.index])}function fl(t,e){return t.data[e]}function sr(t,e){const n=e[t];return qt(n)?n:n[ht]}function Dv(t){return!(128&~t[se])}function br(t,e){return null==e?null:t[e]}function MM(t){t[Ja]=0}function PM(t){1024&t[se]||(t[se]|=1024,Dv(t)&&fp(t))}function hp(t){return!!(9216&t[se]||t[wr]?.dirty)}function Av(t){t[ri].changeDetectionScheduler?.notify(8),64&t[se]&&(t[se]|=1024),hp(t)&&fp(t)}function fp(t){t[ri].changeDetectionScheduler?.notify(0);let e=Vi(t);for(;null!==e&&!(8192&e[se])&&(e[se]|=8192,Dv(e));)e=Vi(e)}function pp(t,e){if(!(256&~t[se]))throw new V(911,!1);null===t[wo]&&(t[wo]=[]),t[wo].push(e)}function Vi(t){const e=t[kt];return vn(e)?e[kt]:e}const le={lFrame:GM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let NM=!1;function OM(){return le.bindingsEnabled}function Cs(){return null!==le.skipHydrationRootTNode}function k(){return le.lFrame.lView}function we(){return le.lFrame.tView}function yt(t){return le.lFrame.contextLView=t,t[Xe]}function vt(t){return le.lFrame.contextLView=null,t}function $e(){let t=kM();for(;null!==t&&64===t.type;)t=t.parent;return t}function kM(){return le.lFrame.currentTNode}function Br(t,e){const n=le.lFrame;n.currentTNode=t,n.isParent=e}function Mv(){return le.lFrame.isParent}function LM(){return NM}function UM(t){NM=t}function On(){const t=le.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $r(){return le.lFrame.bindingIndex++}function Ui(t){const e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Pz(t,e){const n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,xv(e)}function xv(t){le.lFrame.currentDirectiveIndex=t}function mp(t){le.lFrame.currentQueryIndex=t}function Nz(t){const e=t[G];return 2===e.type?e.declTNode:1===e.type?t[an]:null}function $M(t,e,n){if(n&Ce.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&Ce.Host||(i=Nz(o),null===i||(o=o[Ya],10&i.type))););if(null===i)return!1;e=i,t=o}const r=le.lFrame=HM();return r.currentTNode=e,r.lView=t,!0}function kv(t){const e=HM(),n=t[G];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function HM(){const t=le.lFrame,e=null===t?null:t.child;return null===e?GM(t):e}function GM(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function qM(){const t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const zM=qM;function Fv(){const t=qM();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function cn(){return le.lFrame.selectedIndex}function Ds(t){le.lFrame.selectedIndex=t}function Ze(){const t=le.lFrame;return fl(t.tView,t.selectedIndex)}function WM(){return le.lFrame.currentNamespace}let KM=!0;function gl(){return KM}function si(t){KM=t}function _p(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function yp(t,e,n){QM(t,e,3,n)}function vp(t,e,n,r){(3&t[se])===n&&QM(t,e,n,r)}function Vv(t,e){let n=t[se];(3&n)===e&&(n&=16383,n+=1,t[se]=n)}function QM(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[Ja]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[Ja]+=65536),(a<o||-1==o)&&(jz(t,n,e,c),t[Ja]=(4294901760&t[Ja])+c+2),c++}function YM(t,e){oi(4,t,e);const n=Ee(null);try{e.call(t)}finally{Ee(n),oi(5,t,e)}}function jz(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[se]>>14<t[Ja]>>16&&(3&t[se])===e&&(t[se]+=16384,YM(a,o)):YM(a,o)}const ec=-1;class ml{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}const Uv={};class As{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Xf(r);const i=this.injector.get(e,Uv,r);return i!==Uv||n===Uv?i:this.parentInjector.get(e,n,r)}}function jv(t){return t!==ec}function _l(t){return 32767&t}function yl(t,e){let n=function qz(t){return t>>16}(t),r=e;for(;n>0;)r=r[Ya],n--;return r}let Bv=!0;function Ip(t){const e=Bv;return Bv=t,e}const XM=255,ZM=5;let Wz=0;const ai={};function Ep(t,e){const n=eP(t,e);if(-1!==n)return n;const r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,$v(r.data,t),$v(e,null),$v(r.blueprint,null));const i=wp(t,e),o=t.injectorIndex;if(jv(i)){const s=_l(i),a=yl(i,e),c=a[G].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function $v(t,e){t.push(0,0,0,0,0,0,0,0,e)}function eP(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function wp(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=aP(i),null===r)return ec;if(n++,i=i[Ya],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ec}function Hv(t,e,n){!function Kz(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(rl)&&(r=n[rl]),null==r&&(r=n[rl]=Wz++);const i=r&XM;e.data[t+(i>>ZM)]|=1<<i}(t,e,n)}function tP(t,e,n){if(n&Ce.Optional||void 0!==t)return t;ev()}function nP(t,e,n,r){if(n&Ce.Optional&&void 0===r&&(r=null),!(n&(Ce.Self|Ce.Host))){const i=t[Ft],o=Hn(void 0);try{return i?i.get(e,r,n&Ce.Optional):YR(e,r,n&Ce.Optional)}finally{Hn(o)}}return tP(r,0,n)}function rP(t,e,n,r=Ce.Default,i){if(null!==t){if(2048&e[se]&&!(r&Ce.Self)){const s=function Zz(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[se]&&!(512&s[se]);){const a=iP(o,s,n,r|Ce.Self,ai);if(a!==ai)return a;let c=o.parent;if(!c){const u=s[vM];if(u){const d=u.get(n,ai,r);if(d!==ai)return d}c=aP(s),s=s[Ya]}o=c}return i}(t,e,n,r,ai);if(s!==ai)return s}const o=iP(t,e,n,r,ai);if(o!==ai)return o}return nP(e,n,r,i)}function iP(t,e,n,r,i){const o=function Jz(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(rl)?t[rl]:void 0;return"number"==typeof e?e>=0?e&XM:Xz:e}(n);if("function"==typeof o){if(!$M(e,t,r))return r&Ce.Host?tP(i,0,r):nP(e,n,r,i);try{let s;if(s=o(r),null!=s||r&Ce.Optional)return s;ev()}finally{zM()}}else if("number"==typeof o){let s=null,a=eP(t,e),c=ec,u=r&Ce.Host?e[ft][an]:null;for((-1===a||r&Ce.SkipSelf)&&(c=-1===a?wp(t,e):e[a+8],c!==ec&&sP(r,!1)?(s=e[G],a=_l(c),e=yl(c,e)):a=-1);-1!==a;){const d=e[G];if(oP(o,a,d.data)){const h=Yz(a,e,n,s,r,u);if(h!==ai)return h}c=e[a+8],c!==ec&&sP(r,e[G].data[a+8]===u)&&oP(o,a,e)?(s=d,a=_l(c),e=yl(c,e)):a=-1}}return i}function Yz(t,e,n,r,i,o){const s=e[G],a=s.data[t+8],d=function Tp(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,c=t.directiveStart,d=o>>20,p=i?a+d:t.directiveEnd;for(let g=r?a:a+d;g<p;g++){const _=s[g];if(g<c&&n===_||g>=c&&_.type===n)return g}if(i){const g=s[c];if(g&&jr(g)&&g.type===n)return c}return null}(a,s,n,null==r?Ts(a)&&Bv:r!=s&&!!(3&a.type),i&Ce.Host&&o===a);return null!==d?Ss(e,s,d,a):ai}function Ss(t,e,n,r){let i=t[n];const o=e.data;if(function Bz(t){return t instanceof ml}(i)){const s=i;s.resolving&&function y3(t,e){throw e&&e.join(" > "),new V(-200,t)}(function Ve(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pe(t)}(o[n]));const a=Ip(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Hn(s.injectImpl):null;$M(t,r,Ce.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Uz(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=CM(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==u&&Hn(u),Ip(a),s.resolving=!1,zM()}}return i}function oP(t,e,n){return!!(n[e+(t>>ZM)]&1<<t)}function sP(t,e){return!(t&Ce.Self||t&Ce.Host&&e)}class zt{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return rP(this._tNode,this._lView,e,Xf(r),n)}}function Xz(){return new zt($e(),k())}function Jt(t){return Oi(()=>{const e=t.prototype.constructor,n=e[ki]||Gv(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[ki]||Gv(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gv(t){return Wf(t)?()=>{const e=Gv(ce(t));return e&&e()}:vs(t)}function aP(t){const e=t[G],n=e.type;return 2===n?e.declTNode:1===n?t[an]:null}function hP(t,e=null,n=null,r){const i=fP(t,e,n,r);return i.resolveInjectorInitializers(),i}function fP(t,e=null,n=null,r,i=new Set){const o=[n||Oe,K3(t)];return r=r||("object"==typeof t?void 0:$t(t)),new za(o,e||sp(),r||null,i)}class Xt{static{this.THROW_IF_NOT_FOUND=il}static{this.NULL=new tp}static create(e,n){if(Array.isArray(e))return hP({name:""},n,e,"");{const r=e.name??"";return hP({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=ie({token:Xt,providedIn:"any",factory:()=>me(nM)})}static{this.__NG_ELEMENT_ID__=-1}}new z("").__NG_ELEMENT_ID__=t=>{const e=$e();if(null===e)throw new V(204,!1);if(2&e.type)return e.value;if(t&Ce.Optional)return null;throw new V(204,!1)};function zv(t){return t.ngOriginalError}const gP=!0;let Il=(()=>{class t{static{this.__NG_ELEMENT_ID__=u6}static{this.__NG_ENV_ID__=n=>n}}return t})();class c6 extends Il{constructor(e){super(),this._lView=e}onDestroy(e){return pp(this._lView,e),()=>function Sv(t,e){if(null===t[wo])return;const n=t[wo].indexOf(e);-1!==n&&t[wo].splice(n,1)}(this._lView,e)}}function u6(){return new c6(k())}let Rs=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ir(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ie({token:t,providedIn:"root",factory:()=>new t})}}return t})();const Et=class l6 extends _n{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,function mM(){return void 0!==QR()||null!=function T3(){return Ha}()}()&&(this.destroyRef=L(Il,{optional:!0})??void 0,this.pendingTasks=L(Rs,{optional:!0})??void 0)}emit(e){const n=Ee(null);try{super.next(e)}finally{Ee(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof mn&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(n),void 0!==r&&this.pendingTasks?.remove(r)})}}};function Cp(...t){}function mP(t){let e,n;function r(){t=Cp;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function _P(t){return queueMicrotask(()=>t()),()=>{t=Cp}}const Wv="isAngularZone",Dp=Wv+"_ID";let d6=0;class Le{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1);const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=gP}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function p6(t){const e=()=>{!function f6(t){function e(){mP(()=>{t.callbackScheduled=!1,Qv(t),t.isCheckStableRunning=!0,Kv(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Qv(t))}(t)},n=d6++;t._inner=t._inner.fork({name:"angular",properties:{[Wv]:!0,[Dp]:n,[Dp+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(function g6(t){return IP(t,"__ignore_ng_zone__")}(c))return r.invokeTask(o,s,a,c);try{return yP(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),vP(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return yP(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function m6(t){return IP(t,"__scheduler_tick__")}(c)&&e(),vP(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Qv(t),Kv(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Wv)}static assertInAngularZone(){if(!Le.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(Le.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,h6,Cp,Cp);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const h6={};function Kv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function yP(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vP(t){t._nesting--,Kv(t)}class Yv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Et,this.onMicrotaskEmpty=new Et,this.onStable=new Et,this.onError=new Et}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function IP(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}class ci{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&zv(e);for(;n&&zv(n);)n=zv(n);return n||null}}const y6=new z("",{providedIn:"root",factory:()=>{const t=L(Le),e=L(ci);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function v6(){return rc($e(),k())}function rc(t,e){return new ar(Nn(t,e))}let ar=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=v6}}return t})();const El="ngSkipHydration",E6="ngskiphydration";function Xv(t){const e=t.mergedAttrs;if(null===e)return!1;for(let n=0;n<e.length;n+=2){const r=e[n];if("number"==typeof r)return!1;if("string"==typeof r&&r.toLowerCase()===E6)return!0}return!1}function TP(t){return t.hasAttribute(El)}function wl(t){return!(128&~t.flags)}const Zv=new Map;let w6=0;function eI(t){Zv.delete(t[Xa])}const Ap="__ngContext__";function In(t,e){qt(e)?(t[Ap]=e[Xa],function b6(t){Zv.set(t[Xa],t)}(e)):t[Ap]=e}function xP(t){return OP(t[ul])}function NP(t){return OP(t[Ur])}function OP(t){for(;null!==t&&!vn(t);)t=t[Ur];return t}let nI;function To(){if(void 0!==nI)return nI;if(typeof document<"u")return document;throw new V(210,!1)}const bl=new z("",{providedIn:"root",factory:()=>B6}),B6="ng",$P=new z(""),ui=new z("",{providedIn:"platform",factory:()=>"unknown"}),HP=new z("",{providedIn:"root",factory:()=>To().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function G6(){const t=new oc;return"browser"===L(ui)&&(t.store=function q6(t,e){const n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}(To(),L(bl))),t}let oc=(()=>{class t{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=ie({token:t,providedIn:"root",factory:G6})}get(n,r){return void 0!==this.store[n]?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(const n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();const rI="h",iI="b";var sc=function(t){return t.FirstChild="f",t.NextSibling="n",t}(sc||{});const Rp="e",oI="t",Cl="c",Mp="x",ac="r",sI="i",Pp="n",Dl="d",cI="__nghData__",Al="ngh";let GP=()=>null;function W6(t,e,n=!1){let r=t.getAttribute(Al);if(null==r)return null;const[i,o]=r.split("|");if(r=n?o:i,!r)return null;const a=n?i:o?`|${o}`:"";let c={};if(""!==r){const d=e.get(oc,null,{optional:!0});null!==d&&(c=d.get(cI,[])[Number(r)])}const u={data:c,firstChild:t.firstChild??null};return n&&(u.firstChild=t,xp(u,0,t.nextSibling)),a?t.setAttribute(Al,a):t.removeAttribute(Al),u}function uI(t,e,n=!1){return GP(t,e,n)}function qP(t){let e=t._lView;return 2===e[G].type?null:(dl(e)&&(e=e[re]),e)}function xp(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function dI(t,e){return t.segmentHeads?.[e]??null}function KP(t,e){return t.data[Cl]?.[e]??null}function hI(t,e){const n=KP(t,e)??[];let r=0;for(let i of n)r+=i[ac]*(i[Mp]??1);return r}function Ms(t,e){if(typeof t.disconnectedNodes>"u"){const n=t.data[Dl];t.disconnectedNodes=n?new Set(n):null}return!!function QP(t){if(typeof t.disconnectedNodes>"u"){const e=t.data[Dl];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}(t)?.has(e)}const Np=new z(""),XP=new z("",{providedIn:"root",factory:()=>!1});let kp;function rx(t){return function gI(){if(void 0===kp&&(kp=null,rt.trustedTypes))try{kp=rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return kp}()?.createScriptURL(t)||t}class ix{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jR})`}}function bo(t){return t instanceof ix?t.changingThisBreaksApplicationSecurity:t}function Ml(t,e){const n=function a5(t){return t instanceof ix&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${jR})`)}return n===e}const d5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var uc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(uc||{});function fx(t){const e=xl();return e?e.sanitize(uc.URL,t)||"":Ml(t,"URL")?bo(t):function mI(t){return(t=String(t)).match(d5)?t:"unsafe:"+t}(pe(t))}function px(t){const e=xl();if(e)return rx(e.sanitize(uc.RESOURCE_URL,t)||"");if(Ml(t,"ResourceURL"))return rx(bo(t));throw new V(904,!1)}function xl(){const t=k();return t&&t[ri].sanitizer}const A5=/^>|^->|<!--|-->|--!>|<!-$/g,S5=/(<|>)/g,R5="\u200b$1\u200b";function cr(t){return t instanceof Function?t():t}function ur(t){return"browser"===(t??L(Xt)).get(ui)}var Co=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Co||{});let wI;function TI(t,e){return wI(t,e)}function dc(t,e,n,r,i){if(null!=r){let o,s=!1;vn(r)?o=r:qt(r)&&(s=!0,r=r[ht]);const a=ke(r);0===t&&null!==n?null==i?Sx(e,n,a):Ps(e,n,a,i||null,!0):1===t&&null!==n?Ps(e,n,a,i||null,!0):2===t?Ol(e,a,s):3===t&&e.destroyNode(a),null!=o&&function Q5(t,e,n,r,i){const o=n[ii];o!==ke(n)&&dc(e,t,r,o,i);for(let a=Ct;a<n.length;a++){const c=n[a];$p(c[G],c,t,e,r,o)}}(e,t,o,n,i)}}function bI(t,e){return t.createText(e)}function CI(t,e){return t.createComment(function mx(t){return t.replace(A5,e=>e.replace(S5,R5))}(e))}function Up(t,e,n){return t.createElement(e,n)}function Cx(t,e){e[ri].changeDetectionScheduler?.notify(9),$p(t,e,e[ue],2,null,null)}function Dx(t,e){const n=t[Za],r=e[kt];(qt(r)||e[ft]!==r[kt][ft])&&(t[se]|=lp.HasTransplantedViews),null===n?t[Za]=[e]:n.push(e)}function DI(t,e){const n=t[Za],r=n.indexOf(e);n.splice(r,1)}function Nl(t,e){if(t.length<=Ct)return;const n=Ct+e,r=t[n];if(r){const i=r[ws];null!==i&&i!==t&&DI(i,r),e>0&&(t[n-1][Ur]=r[Ur]);const o=Zf(t,Ct+e);!function B5(t,e){Cx(t,e),e[ht]=null,e[an]=null}(r[G],r);const s=o[Fi];null!==s&&s.detachView(o[G]),r[kt]=null,r[Ur]=null,r[se]&=-129}return r}function jp(t,e){if(!(256&e[se])){const n=e[ue];n.destroyNode&&$p(t,e,n,3,null,null),function H5(t){let e=t[ul];if(!e)return AI(t[G],t);for(;e;){let n=null;if(qt(e))n=e[ul];else{const r=e[Ct];r&&(n=r)}if(!n){for(;e&&!e[Ur]&&e!==t;)qt(e)&&AI(e[G],e),e=e[kt];null===e&&(e=t),qt(e)&&AI(e[G],e),n=e&&e[Ur]}e=n}}(e)}}function AI(t,e){if(256&e[se])return;const n=Ee(null);try{e[se]&=-129,e[se]|=256,e[wr]&&Ny(e[wr]),function z5(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof ml)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];oi(4,a,c);try{c.call(a)}finally{oi(5,a,c)}}else{oi(4,i,o);try{o.call(i)}finally{oi(5,i,o)}}}}}(t,e),function q5(t,e){const n=t.cleanup,r=e[Qa];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[Qa]=null);const i=e[wo];if(null!==i){e[wo]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[G].type&&e[ue].destroy();const r=e[ws];if(null!==r&&vn(e[kt])){r!==e[kt]&&DI(r,e);const i=e[Fi];null!==i&&i.detachView(t)}eI(e)}finally{Ee(n)}}function SI(t,e,n){return function Ax(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[ht];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===Vr.None||o===Vr.Emulated)return null}return Nn(r,n)}}(t,e.parent,n)}function Ps(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Sx(t,e,n){t.appendChild(e,n)}function Rx(t,e,n,r,i){null!==r?Ps(t,e,n,r,i):Sx(t,e,n)}function RI(t,e){return t.parentNode(e)}let MI,xx=function Px(t,e,n){return 40&t.type?Nn(t,n):null};function Bp(t,e,n,r){const i=SI(t,r,e),o=e[ue],a=function Mx(t,e,n){return xx(t,e,n)}(r.parent||e[an],r,e);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)Rx(o,i,n[c],a,!1);else Rx(o,i,n,a,!1);void 0!==MI&&MI(o,r,e,n,i)}function xs(t,e){if(null!==e){const n=e.type;if(3&n)return Nn(e,t);if(4&n)return PI(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return xs(t,r);{const i=t[e.index];return vn(i)?PI(-1,i):ke(i)}}if(128&n)return xs(t,e.next);if(32&n)return TI(e,t)()||ke(t[e.index]);{const r=Ox(t,e);return null!==r?Array.isArray(r)?r[0]:xs(Vi(t[ft]),r):xs(t,e.next)}}return null}function Ox(t,e){return null!==e?t[ft][an].projection[e.projection]:null}function PI(t,e){const n=Ct+t+1;if(n<e.length){const r=e[n],i=r[G].firstChild;if(null!==i)return xs(r,i)}return e[ii]}function Ol(t,e,n){t.removeChild(null,e,n)}function kx(t){t.textContent=""}function xI(t,e,n,r,i,o,s){for(;null!=n;){if(128===n.type){n=n.next;continue}const a=r[n.index],c=n.type;if(s&&0===e&&(a&&In(ke(a),r),n.flags|=2),32&~n.flags)if(8&c)xI(t,e,n.child,r,i,o,!1),dc(e,t,i,a,o);else if(32&c){const u=TI(n,r);let d;for(;d=u();)dc(e,t,i,d,o);dc(e,t,i,a,o)}else 16&c?Fx(t,e,r,n,i,o):dc(e,t,i,a,o);n=s?n.projectionNext:n.next}}function $p(t,e,n,r,i,o){xI(n,r,t.firstChild,e,i,o,!1)}function Fx(t,e,n,r,i,o){const s=n[ft],c=s[an].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)dc(e,t,i,c[u],o);else{let u=c;const d=s[kt];wl(r)&&(u.flags|=128),xI(t,e,u,d,i,o,!0)}}function Vx(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Lx(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&uv(t,e,r),null!==i&&Vx(t,e,i),null!==o&&function J5(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}const ge={};function Z(t=1){Ux(we(),k(),cn()+t,!1)}function Ux(t,e,n,r){if(!r)if(3&~e[se]){const o=t.preOrderHooks;null!==o&&vp(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&yp(e,o,n)}Ds(n)}function U(t,e=Ce.Default){const n=k();return null===n?me(t,e):rP($e(),n,ce(t),e)}function jx(t,e,n,r,i,o){const s=Ee(null);try{let a=null;i&vo.SignalBased&&(a=e[r][Or]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&vo.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),null!==t.setInput?t.setInput(e,a,o,n,r):bM(e,a,r,o)}finally{Ee(s)}}function Hp(t,e,n,r,i,o,s,a,c,u,d){const h=e.blueprint.slice();return h[ht]=i,h[se]=204|r,(null!==u||t&&2048&t[se])&&(h[se]|=2048),MM(h),h[kt]=h[Ya]=t,h[Xe]=n,h[ri]=s||t&&t[ri],h[ue]=a||t&&t[ue],h[Ft]=c||t&&t[Ft]||null,h[an]=o,h[Xa]=function T6(){return w6++}(),h[xn]=d,h[vM]=u,h[ft]=2==e.type?t[ft]:h,h}function Ns(t,e,n,r,i){let o=t.data[e];if(null===o)o=function NI(t,e,n,r,i){const o=kM(),s=Mv(),c=t.data[e]=function s9(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Cs()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(t,e,n,r,i),function Mz(){return le.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function pl(){const t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Br(o,!0),o}function kl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Bx(t,e,n,r,i){const o=cn(),s=2&r;try{Ds(-1),s&&e.length>re&&Ux(t,e,re,!1),oi(s?2:0,i),n(r,i)}finally{Ds(o),oi(s?3:1,i)}}function OI(t,e,n){if(Ev(e)){const r=Ee(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Ee(r)}}}function kI(t,e,n){OM()&&(function f9(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;Ts(n)&&function I9(t,e,n){const r=Nn(e,t),i=$x(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=Gp(t,Hp(t,i,null,s,r,e,null,t[ri].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ep(n,e),In(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const c=t.data[a],u=Ss(e,t,a,n);In(u,e),null!==s&&E9(0,a-i,u,c,0,s),jr(c)&&(sr(n.index,e)[Xe]=Ss(e,t,a,n))}}(t,e,n,Nn(n,e)),!(64&~n.flags)&&Wx(t,e,n))}function FI(t,e,n=Nn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function $x(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=VI(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function VI(t,e,n,r,i,o,s,a,c,u,d){const h=re+r,p=h+i,g=function e9(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ge);return n}(h,p),_="function"==typeof u?u():u;return g[G]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}let Hx=()=>null;function r9(t){TP(t)?kx(t):function Y6(t){const e=To(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){const s=function Q6(t){return t.textContent?.replace(/\s/gm,"")}(o);return"ngetn"===s||"ngtns"===s?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let r;const i=[];for(;r=n.nextNode();)i.push(r);for(const o of i)"ngetn"===o.textContent?o.replaceWith(e.createTextNode("")):o.remove()}(t)}function Gx(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;const s=e[o];if(void 0===s)continue;r??={};let a,c=vo.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(null!==i){if(!i.hasOwnProperty(o))continue;u=i[o]}0===t?qx(r,n,u,a,c):qx(r,n,u,a)}return r}function qx(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],void 0!==i&&o.push(i)}function Wn(t,e,n,r,i,o,s,a){const c=Nn(e,n);let d,u=e.inputs;!a&&null!=u&&(d=u[r])?($I(t,n,d,r,i),Ts(e)&&function u9(t,e){const n=sr(e,t);16&n[se]||(n[se]|=64)}(n,e.index)):3&e.type&&(r=function c9(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i))}function LI(t,e,n,r){if(OM()){const i=null===r?null:{"":-1},o=function g9(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(aM(e,s.selectors,!1))if(r||(r=[]),jr(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),UI(t,e,a.length)}else r.unshift(s),UI(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&zx(t,e,n,s,i,a),i&&function m9(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new V(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=sl(n.mergedAttrs,n.attrs)}function zx(t,e,n,r,i,o){for(let u=0;u<r.length;u++)Hv(Ep(n,e),t,r[u].type);!function y9(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let u=0;u<r.length;u++){const d=r[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=kl(t,e,r.length,null);for(let u=0;u<r.length;u++){const d=r[u];n.mergedAttrs=sl(n.mergedAttrs,d.hostAttrs),v9(t,n,e,c,d),_9(c,d,i),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function a9(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let c=null,u=null;for(let d=e.directiveStart;d<i;d++){const h=o[d],p=n?n.get(h):null,_=p?p.outputs:null;c=Gx(0,h.inputs,d,c,p?p.inputs:null),u=Gx(1,h.outputs,d,u,_);const I=null===c||null===s||lv(e)?null:w9(c,d,s);a.push(I)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(t,n,o)}function Wx(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function xz(){return le.lFrame.currentDirectiveIndex}();try{Ds(o);for(let a=r;a<i;a++){const c=t.data[a],u=e[a];xv(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&p9(c,u)}}finally{Ds(-1),xv(s)}}function p9(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function UI(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function _9(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;jr(e)&&(n[""]=t)}}function v9(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vs(i.type)),s=new ml(o,jr(i),U);t.blueprint[r]=s,n[r]=s,function d9(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function h9(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,kl(t,n,i.hostVars,ge),i)}function li(t,e,n,r,i,o){const s=Nn(t,e);!function jI(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?pe(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[ue],s,o,t.value,n,r,i)}function E9(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)jx(r,n,s[a++],s[a++],s[a++],s[a++])}function w9(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Kx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Qx(t,e){const n=t.contentQueries;if(null!==n){const r=Ee(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];mp(n[i]),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function Gp(t,e){return t[ul]?t[yM][Ur]=e:t[ul]=e,t[yM]=e,e}function BI(t,e,n){mp(0);const r=Ee(null);try{e(t,n)}finally{Ee(r)}}function qp(t,e){const n=t[Ft],r=n?n.get(ci,null):null;r&&r.handleError(e)}function $I(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],c=n[o++];jx(t.data[s],e[s],r,a,c,i)}}function Bi(t,e,n){const r=hl(e,t);!function bx(t,e,n){t.setValue(e,n)}(t[ue],r,n)}function T9(t,e){const n=sr(e,t),r=n[G];!function b9(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[ht];null!==i&&null===n[xn]&&(n[xn]=uI(i,n[Ft])),HI(r,n,n[Xe])}function HI(t,e,n){kv(e);try{const r=t.viewQuery;null!==r&&BI(1,r,n);const i=t.template;null!==i&&Bx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Fi]?.finishViewCreation(t),t.staticContentQueries&&Qx(t,e),t.staticViewQueries&&BI(2,t.viewQuery,n);const o=t.components;null!==o&&function C9(t,e){for(let n=0;n<e.length;n++)T9(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[se]&=-5,Fv()}}function Os(t,e){return!e||null===e.firstChild||wl(t)}function Fl(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const o=e[n.index];null!==o&&r.push(ke(o)),vn(o)&&eN(o,r);const s=n.type;if(8&s)Fl(t,e,n.child,r);else if(32&s){const a=TI(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Ox(e,n);if(Array.isArray(a))r.push(...a);else{const c=Vi(e[ft]);Fl(c[G],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function eN(t,e){for(let n=Ct;n<t.length;n++){const r=t[n],i=r[G].firstChild;null!==i&&Fl(r[G],r,i,e)}t[ii]!==t[ht]&&e.push(t[ii])}let tN=[];const R9={...Of,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{fp(t.lView)},consumerOnSignalRead(){this.lView[wr]=this}},P9={...Of,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Vi(t.lView);for(;e&&!nN(e[G]);)e=Vi(e);e&&PM(e)},consumerOnSignalRead(){this.lView[wr]=this}};function nN(t){return 2!==t.type}const x9=100;function zp(t,e=!0,n=0){const r=t[ri],i=r.rendererFactory;i.begin?.();try{!function N9(t,e){const n=LM();try{UM(!0),qI(t,e);let r=0;for(;hp(t);){if(r===x9)throw new V(103,!1);r++,qI(t,1)}}finally{UM(n)}}(t,n)}catch(s){throw e&&qp(t,s),s}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function O9(t,e,n,r){const i=e[se];if(!(256&~i))return;e[ri].inlineEffectRunner?.flush(),kv(e);let a=!0,c=null,u=null;nN(t)?(u=function D9(t){return t[wr]??function A9(t){const e=tN.pop()??Object.create(R9);return e.lView=t,e}(t)}(e),c=kf(u)):null===function vR(){return bt}()?(a=!1,u=function M9(t){const e=t[wr]??Object.create(P9);return e.lView=t,e}(e),c=kf(u)):e[wr]&&(Ny(e[wr]),e[wr]=null);try{MM(e),function jM(t){return le.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Bx(t,e,n,2,r);const d=!(3&~i);if(d){const g=t.preOrderCheckHooks;null!==g&&yp(e,g,null)}else{const g=t.preOrderHooks;null!==g&&vp(e,g,0,null),Vv(e,0)}if(function k9(t){for(let e=xP(t);null!==e;e=NP(e)){if(!(e[se]&lp.HasTransplantedViews))continue;const n=e[Za];for(let r=0;r<n.length;r++)PM(n[r])}}(e),iN(e,0),null!==t.contentQueries&&Qx(t,e),d){const g=t.contentCheckHooks;null!==g&&yp(e,g)}else{const g=t.contentHooks;null!==g&&vp(e,g,1),Vv(e,1)}!function Z5(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Ds(~i);else{const o=i,s=n[++r],a=n[++r];Pz(s,o),a(2,e[o])}}}finally{Ds(-1)}}(t,e);const h=t.components;null!==h&&sN(e,h,0);const p=t.viewQuery;if(null!==p&&BI(2,p,r),d){const g=t.viewCheckHooks;null!==g&&yp(e,g)}else{const g=t.viewHooks;null!==g&&vp(e,g,2),Vv(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[cp]){for(const g of e[cp])g();e[cp]=null}e[se]&=-73}catch(d){throw fp(e),d}finally{null!==u&&(Py(u,c),a&&function S9(t){t.lView[wr]!==t&&(t.lView=null,tN.push(t))}(u)),Fv()}}function iN(t,e){for(let n=xP(t);null!==n;n=NP(n))for(let r=Ct;r<n.length;r++)oN(n[r],e)}function F9(t,e,n){oN(sr(e,t),n)}function oN(t,e){Dv(t)&&qI(t,e)}function qI(t,e){const r=t[G],i=t[se],o=t[wr];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!xy(o)),s||=!1,o&&(o.dirty=!1),t[se]&=-9217,s)O9(r,t,r.template,t[Xe]);else if(8192&i){iN(t,1);const a=r.components;null!==a&&sN(t,a,1)}}function sN(t,e,n){for(let r=0;r<e.length;r++)F9(t,e[r],n)}function Vl(t,e){const n=LM()?64:1088;for(t[ri].changeDetectionScheduler?.notify(e);t;){t[se]|=n;const r=Vi(t);if(dl(t)&&!r)return t;t=r}return null}class Ll{get rootNodes(){const e=this._lView,n=e[G];return Fl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xe]}set context(e){this._lView[Xe]=e}get destroyed(){return!(256&~this._lView[se])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[kt];if(vn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Nl(e,r),Zf(n,r))}this._attachedToViewContainer=!1}jp(this._lView[G],this._lView)}onDestroy(e){pp(this._lView,e)}markForCheck(){Vl(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Av(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,zp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=dl(this._lView),n=this._lView[ws];null!==n&&!e&&DI(n,this._lView),Cx(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;const n=dl(this._lView),r=this._lView[ws];null!==r&&!n&&Dx(r,this._lView),Av(this._lView)}}let $i=(()=>{class t{static{this.__NG_ELEMENT_ID__=U9}}return t})();const V9=$i,L9=class extends V9{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function hc(t,e,n,r){const i=Ee(null);try{const o=e.tView,c=Hp(t,o,n,4096&t[se]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[ws]=t[e.index];const d=t[Fi];return null!==d&&(c[Fi]=d.createEmbeddedView(o)),HI(o,c,n),c}finally{Ee(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ll(i)}};function U9(){return function Wp(t,e){return 4&t.type?new L9(e,t,rc(t,e)):null}($e(),k())}const r8=new RegExp(`^(\\d+)*(${iI}|${rI})*(.*)`);function YI(t){return t.index-re}function Gl(t,e,n,r){const i=YI(r);let o=function yN(t,e){const n=t.i18nNodes;if(n)return n.get(e)}(t,i);if(void 0===o){const s=t.data[Pp];if(s?.[i])o=function vN(t,e){const[n,...r]=function o8(t){const e=t.match(r8),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(const[c,u,d]of o.matchAll(/(f|n)(\d*)/g)){const h=parseInt(d,10)||1;a.push(u,h)}return[s,...a]}(t);let i;i=n===rI?e[ft][ht]:n===iI?function Ix(t){return t.ownerDocument.body}(e[ft][ht]):ke(e[Number(n)+re]);return function c8(t,e){let n=t;for(let r=0;r<e.length;r+=2){const i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case sc.FirstChild:n=n.firstChild;break;case sc.NextSibling:n=n.nextSibling}}return n}(i,r)}(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{const a=null===r.prev,c=r.prev??r.parent;if(function s8(t){return!t.prev&&8===t.parent?.type}(r))o=dI(t,YI(r.parent));else{let u=Nn(c,n);if(a)o=u.firstChild;else{const d=YI(c),h=dI(t,d);o=2===c.type&&h?Jp(hI(t,d)+1,h):u.nextSibling}}}}return o}function Jp(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}let EN=!1;function C8(t,e,n){for(const r of n.node.cases[n.case]){const i=e.get(r.index-re);i&&Ol(t,i,!1)}}function CN(t){const e=t[ll]??[],r=t[kt][ue];for(const i of e)D8(i,r);t[ll]=Oe}function D8(t,e){let n=0,r=t.firstChild;if(r){const i=t.data[ac];for(;n<i;){const o=r.nextSibling;Ol(e,r,!1),r=o,n++}}}function DN(t){CN(t);const e=t[ht];qt(e)&&Xp(e);for(let n=Ct;n<t.length;n++)Xp(t[n])}function Xp(t){!function b8(t){const e=t[xn];if(e){const{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){const i=t[ue];for(const o of r.values())C8(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}(t);const e=t[G];for(let n=re;n<e.bindingStartIndex;n++)vn(t[n])?DN(t[n]):qt(t[n])&&Xp(t[n])}let AN=()=>null;function R8(t,e){const n=t[ll];return e&&null!==n&&0!==n.length?n[0].data[sI]===e?n.shift():(CN(t),null):null}function Fs(t,e){return AN(t,e)}class gc{}const mc=new z("",{providedIn:"root",factory:()=>!1}),SN=new z(""),nE=new z("");class P8{}class RN{}class N8{resolveComponentFactory(e){throw function x8(t){const e=Error(`No component factory found for ${$t(t)}.`);return e.ngComponent=t,e}(e)}}class Zp{static{this.NULL=new N8}}class rE{}let Hi=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function O8(){const t=k(),n=sr($e().index,t);return(qt(n)?n:t)[ue]}()}}return t})(),k8=(()=>{class t{static{this.\u0275prov=ie({token:t,providedIn:"root",factory:()=>null})}}return t})();function tg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=qy(i,a):2==o&&(r=qy(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class NN extends Zp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Te(e);return new Kl(n,this.ngModule)}}function ON(t,e){const n=[];for(const r in t){if(!t.hasOwnProperty(r))continue;const i=t[r];if(void 0===i)continue;const o=Array.isArray(i),s=o?i[0]:i;n.push(e?{propName:s,templateName:r,isSignal:!!((o?i[1]:vo.None)&vo.SignalBased)}:{propName:s,templateName:r})}return n}class Kl extends RN{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=ON(e.inputs,!0);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return ON(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function $3(t){return t.map(B3).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){const o=Ee(null);try{let s=(i=i||this.ngModule)instanceof or?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new As(e,s):e,c=a.get(rE,null);if(null===c)throw new V(407,!1);const h={rendererFactory:c,sanitizer:a.get(k8,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(gc,null)},p=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=r?function t9(t,e,n,r){const o=r.get(XP,!1)||n===Vr.ShadowDom,s=t.selectRootElement(e,o);return function n9(t){Hx(t)}(s),s}(p,r,this.componentDef.encapsulation,a):Up(p,g,function L8(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(g));let I=512;this.componentDef.signals?I|=4096:this.componentDef.onPush||(I|=16);let E=null;null!==_&&(E=uI(_,a,!0));const A=VI(0,null,null,1,0,null,null,null,null,null,null),D=Hp(null,A,null,I,null,null,h,p,a,null,E);kv(D);let F,$,J=null;try{const X=this.componentDef;let C,w=null;X.findHostDirectiveDefs?(C=[],w=new Map,X.findHostDirectiveDefs(X,C,w),C.push(X)):C=[X];const T=function j8(t,e){const n=t[G],r=re;return t[r]=e,Ns(n,r,2,"#host",null)}(D,_);J=function B8(t,e,n,r,i,o,s){const a=i[G];!function $8(t,e,n,r){for(const i of t)e.mergedAttrs=sl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(tg(e,e.mergedAttrs,!0),null!==n&&Lx(r,n,e))}(r,t,e,s);let c=null;null!==e&&(c=uI(e,i[Ft]));const u=o.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const h=Hp(i,$x(n),null,d,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&UI(a,t,r.length-1),Gp(i,h),i[t.index]=h}(T,_,X,C,D,h,p),$=fl(A,re),_&&function G8(t,e,n,r){if(r)uv(t,n,["ng-version","18.2.12"]);else{const{attrs:i,classes:o}=function H3(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Lr(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&uv(t,n,i),o&&o.length>0&&Vx(t,n,o.join(" "))}}(p,X,_,r),void 0!==n&&function q8(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}($,this.ngContentSelectors,n),F=function H8(t,e,n,r,i,o){const s=$e(),a=i[G],c=Nn(s,i);zx(a,i,s,n,null,r);for(let d=0;d<n.length;d++)In(Ss(i,a,s.directiveStart+d,s),i);Wx(a,i,s),c&&In(c,i);const u=Ss(i,a,s.directiveStart+s.componentOffset,s);if(t[Xe]=i[Xe]=u,null!==o)for(const d of o)d(u,e);return OI(a,s,i),u}(J,X,C,w,D,[z8]),HI(A,D,null)}catch(X){throw null!==J&&eI(J),eI(D),X}finally{Fv()}return new U8(this.componentType,F,rc($,D),D,$)}finally{Ee(o)}}}class U8 extends P8{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ll(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;$I(o[G],o,i,e,n),this.previousInputValues.set(e,n),Vl(sr(this._tNode.index,o),1)}}get injector(){return new zt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function z8(){const t=$e();_p(k()[G],t)}let Hr=(()=>{class t{static{this.__NG_ELEMENT_ID__=W8}}return t})();function W8(){return function VN(t,e){let n;const r=e[t.index];return vn(r)?n=r:(n=Kx(r,e,null,t),e[t.index]=n,Gp(e,n)),LN(n,e,t,r),new kN(n,t,e)}($e(),k())}const K8=Hr,kN=class extends K8{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return rc(this._hostTNode,this._hostLView)}get injector(){return new zt(this._hostTNode,this._hostLView)}get parentInjector(){const e=wp(this._hostTNode,this._hostLView);if(jv(e)){const n=yl(e,this._hostLView),r=_l(e);return new zt(n[G].data[r+8],n)}return new zt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=FN(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=Fs(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Os(this._hostTNode,s)),a}createComponent(e,n,r,i,o){const s=e&&!function cl(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}const c=s?e:new Kl(Te(e)),u=r||this.parentInjector;if(!o&&null==c.ngModule){const I=(s?u:this.parentInjector).get(or,null);I&&(o=I)}const d=Te(c.componentType??{}),h=Fs(this._lContainer,d?.id??null),g=c.create(u,i,h?.firstChild??null,o);return this.insertImpl(g.hostView,a,Os(this._hostTNode,h)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function Ez(t){return vn(t[kt])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[kt],u=new kN(c,c[an],c[kt]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return function fc(t,e,n,r=!0){const i=e[G];if(function G5(t,e,n,r){const i=Ct+r,o=n.length;r>0&&(n[i-1][Ur]=e),r<o-Ct?(e[Ur]=n[i],ZR(n,Ct+r,e)):(n.push(e),e[Ur]=null),e[kt]=n;const s=e[ws];null!==s&&n!==s&&Dx(s,e);const a=e[Fi];null!==a&&a.insertView(t),Av(e),e[se]|=128}(i,e,t,n),r){const s=PI(n,t),a=e[ue],c=RI(a,t[ii]);null!==c&&function $5(t,e,n,r,i,o){r[ht]=i,r[an]=e,$p(t,r,n,1,i,o)}(i,t[an],a,e,c,s)}const o=e[xn];null!==o&&null!==o.firstChild&&(o.firstChild=null)}(s,i,o,r),e.attachToViewContainerRef(),ZR(sE(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=FN(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Nl(this._lContainer,n);r&&(Zf(sE(this._lContainer),n),jp(r[G],r))}detach(e){const n=this._adjustIndex(e,-1),r=Nl(this._lContainer,n);return r&&null!=Zf(sE(this._lContainer),n)?new Ll(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function FN(t){return t[8]}function sE(t){return t[8]||(t[8]=[])}let LN=jN,aE=()=>!1;function jN(t,e,n,r){if(t[ii])return;let i;i=8&n.type?ke(r):function Q8(t,e){const n=t[ue],r=n.createComment(""),i=Nn(e,t);return Ps(n,RI(n,i),r,function W5(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[ii]=i}function Y8(t,e,n){if(t[ii]&&t[ll])return!0;const r=n[xn],i=e.index-re;if(!r||function Tl(t){if(wl(t))return!0;let e=t.parent;for(;e;){if(wl(t)||Xv(e))return!0;e=e.parent}return!1}(e)||Ms(r,i))return!1;const s=dI(r,i),a=r.data[Cl]?.[i],[c,u]=function S8(t,e){const n=[];for(const r of e)for(let i=0;i<(r[Mp]??1);i++){const o={data:r,firstChild:null};r[ac]>0&&(o.firstChild=t,t=Jp(r[ac],t)),n.push(o)}return[t,n]}(s,a);return t[ii]=c,t[ll]=u,!0}function J8(t,e,n,r){aE(t,n,e)||jN(t,e,n,r)}const KN=new Set;function En(t){KN.has(t)||(KN.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function _c(t,e){En("NgSignals");const n=function Bq(t){const e=Object.create(Hq);e.value=t;const n=()=>(My(e),e.value);return n[Or]=e,n}(t),r=n[Or];return e?.equal&&(r.equal=e.equal),n.set=i=>RR(r,i),n.update=i=>function $q(t,e){wR()||SR(),RR(t,e(t.value))}(r,i),n.asReadonly=YN.bind(n),n}function YN(){const t=this[Or];if(void 0===t.readonlyFn){const e=()=>this();e[Or]=t,t.readonlyFn=e}return t.readonlyFn}function JN(t){return function QN(t){return"function"==typeof t&&void 0!==t[Or]}(t)&&"function"==typeof t.set}function He(t){let e=function cO(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(jr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=rg(t.inputs),s.inputTransforms=rg(t.inputTransforms),s.declaredInputs=rg(t.declaredInputs),s.outputs=rg(t.outputs);const a=i.hostBindings;a&&yW(t,a);const c=i.viewQuery,u=i.contentQueries;if(c&&mW(t,c),u&&_W(t,u),pW(t,i),a3(t.outputs,i.outputs),jr(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===He&&(n=!1)}}e=Object.getPrototypeOf(e)}!function gW(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=sl(i.hostAttrs,n=sl(n,i.hostAttrs))}}(r)}function pW(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];if(void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function rg(t){return t===ti?{}:t===Oe?[]:t}function mW(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function _W(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function yW(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function fO(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}class Vs{}class pO{}class _E extends Vs{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new NN(this);const o=yn(e);this._bootstrapComponents=cr(o.bootstrap),this._r3Injector=fP(e,n,[{provide:Vs,useValue:this},{provide:Zp,useValue:this.componentFactoryResolver},...r],$t(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class yE extends pO{constructor(e){super(),this.moduleType=e}create(e){return new _E(this.moduleType,e,[])}}class gO extends Vs{constructor(e){super(),this.componentFactoryResolver=new NN(this),this.instance=null;const n=new za([...e.providers,{provide:Vs,useValue:this},{provide:Zp,useValue:this.componentFactoryResolver}],e.parent||sp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function vE(t,e,n=null){return new gO({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function ig(t){return!!function IE(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function di(t,e,n){return t[e]=n}function Dt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ls(t,e,n,r){const i=Dt(t,e,n);return Dt(t,e+1,r)||i}function vc(t){return!(32&~t.flags)}function Jl(t,e,n,r,i,o,s,a,c,u){const d=n+re,h=e.firstCreatePass?function MW(t,e,n,r,i,o,s,a,c){const u=e.consts,d=Ns(e,t,4,s||null,a||null);LI(e,n,d,br(u,c)),_p(e,d);const h=d.tView=VI(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,e,t,r,i,o,s,a,c):e.data[d];Br(h,!1);const p=mO(e,t,h,n);gl()&&Bp(e,t,p,h),In(p,t);const g=Kx(p,t,p,h);return t[d]=g,Gp(t,g),function UN(t,e,n){return aE(t,e,n)}(g,h,t),dp(h)&&kI(e,t,h),null!=c&&FI(t,h,u),h}function it(t,e,n,r,i,o,s,a){const c=k(),u=we();return Jl(c,u,t,e,n,r,i,br(u.consts,o),s,a),it}let mO=_O;function _O(t,e,n,r){return si(!0),e[ue].createComment("")}function PW(t,e,n,r){const i=e[xn],o=!i||Cs()||vc(n)||Ms(i,r);if(si(o),o)return _O(0,e);const s=i.data[oI]?.[r]??null;null!==s&&null!==n.tView&&null===n.tView.ssrId&&(n.tView.ssrId=s);const a=Gl(i,t,e,n);return xp(i,r,a),Jp(hI(i,r),a)}var Ec=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ec||{});let TO=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ie({token:t,providedIn:"root",factory:()=>new t})}}return t})();class ed{constructor(){this.ngZone=L(Le),this.scheduler=L(gc),this.errorHandler=L(ci,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ec.EarlyRead,Ec.Write,Ec.MixedReadWrite,Ec.Read]}execute(){this.executing=!0;for(const e of ed.PHASES)for(const n of this.sequences)if(!n.erroredOrDestroyed&&n.hooks[e])try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(const e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=ie({token:ed,providedIn:"root",factory:()=>new ed})}}function hi(t,e,n,r){const i=k();return Dt(i,$r(),e)&&(we(),li(Ze(),i,t,e,n,r)),hi}function Rc(t,e,n,r,i,o){const a=Ls(t,function Li(){return le.lFrame.bindingIndex}(),n,i);return Ui(2),a?e+pe(n)+r+pe(i)+o:ge}function dg(t,e){return t<<17|e<<2}function Ro(t){return t>>17&32767}function xE(t){return 2|t}function js(t){return(131068&t)>>2}function NE(t,e){return-131069&t|e<<2}function OE(t){return 1|t}function JO(t,e,n,r){const i=t[n+1],o=null===e;let s=r?Ro(i):js(i),a=!1;for(;0!==s&&(!1===a||o);){const u=t[s+1];y7(t[s],e)&&(a=!0,t[s+1]=r?OE(u):xE(u)),s=r?Ro(u):js(u)}a&&(t[n+1]=r?xE(i):OE(i))}function y7(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&qa(t,e)>=0}function _e(t,e,n){const r=k();return Dt(r,$r(),e)&&Wn(we(),Ze(),r,t,e,r[ue],n,!1),_e}function kE(t,e,n,r,i){const s=i?"class":"style";$I(t,n,e.inputs[s],s,r)}function Bs(t,e){return function Gr(t,e,n,r){const i=k(),o=we(),s=Ui(2);o.firstUpdatePass&&function sk(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[cn()],s=function ok(t,e){return e>=t.expandoStartIndex}(t,n);(function lk(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function A7(t,e,n,r){const i=function Nv(t){const e=le.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=nd(n=FE(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=FE(i,t,e,n,r),null===o){let c=function S7(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==js(r))return t[Ro(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=FE(null,t,e,c[1],r),c=nd(c,e.attrs,r),function R7(t,e,n,r){t[Ro(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else o=function M7(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=nd(r,t[o].hostAttrs,n);return nd(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function m7(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ro(s),c=js(s);t[r]=n;let d,u=!1;if(Array.isArray(n)?(d=n[1],(null===d||qa(n,d)>0)&&(u=!0)):d=n,i)if(0!==c){const p=Ro(t[a+1]);t[r+1]=dg(p,a),0!==p&&(t[p+1]=NE(t[p+1],r)),t[a+1]=function p7(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=dg(a,0),0!==a&&(t[a+1]=NE(t[a+1],r)),a=r;else t[r+1]=dg(c,0),0===a?a=r:t[c+1]=NE(t[c+1],r),c=r;u&&(t[r+1]=xE(t[r+1])),JO(t,d,r,!0),JO(t,d,r,!1),function _7(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&qa(o,e)>=0&&(n[r+1]=OE(n[r+1]))}(e,d,t,r,o),s=dg(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==ge&&Dt(i,s,e)&&function ck(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],d=function g7(t){return!(1&~t)}(u)?uk(c,e,n,i,js(u),s):void 0;hg(d)||(hg(o)||function f7(t){return!(2&~t)}(u)&&(o=uk(c,null,n,i,a,s)),function Y5(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Co.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Co.Important),t.setStyle(n,r,i,o))}}(r,s,hl(cn(),n),i,o))}(o,o.data[cn()],i,i[ue],t,i[s+1]=function O7(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=$t(bo(t)))),t}(e,n),r,s)}(t,e,null,!0),Bs}function FE(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=nd(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function nd(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ir(t,s,!!n||e[++o]))}return void 0===t?null:t}function uk(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const c=t[i],u=Array.isArray(c),d=u?c[1]:c,h=null===d;let p=n[i+1];p===ge&&(p=h?Oe:void 0);let g=h?av(p,r):d===r?p:void 0;if(u&&!hg(g)&&(g=av(c,r)),hg(g)&&(a=g,s))return a;const _=t[i+1];i=s?Ro(_):js(_)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=av(c,r))}return a}function hg(t){return void 0!==t}function H(t,e,n,r){const i=k(),o=we(),s=re+t,a=i[ue],c=o.firstCreatePass?function rK(t,e,n,r,i,o){const s=e.consts,c=Ns(e,t,2,r,br(s,i));return LI(e,n,c,br(s,o)),null!==c.attrs&&tg(c,c.attrs,!1),null!==c.mergedAttrs&&tg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,e,n,r):o.data[s],u=pk(o,i,c,a,e,t);i[s]=u;const d=dp(c);return Br(c,!0),Lx(a,u,c),!vc(c)&&gl()&&Bp(o,i,u,c),0===function wz(){return le.lFrame.elementDepthCount}()&&In(u,i),function Tz(){le.lFrame.elementDepthCount++}(),d&&(kI(o,i,c),OI(o,c,i)),null!==r&&FI(i,c),H}function q(){let t=$e();Mv()?function Pv(){le.lFrame.isParent=!1}():(t=t.parent,Br(t,!1));const e=t;(function Cz(t){return le.skipHydrationRootTNode===t})(e)&&function Rz(){le.skipHydrationRootTNode=null}(),function bz(){le.lFrame.elementDepthCount--}();const n=we();return n.firstCreatePass&&(_p(n,t),Ev(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Hz(t){return!!(8&t.flags)}(e)&&kE(n,e,k(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Gz(t){return!!(16&t.flags)}(e)&&kE(n,e,k(),e.stylesWithoutHost,!1),q}function Gi(t,e,n,r){return H(t,e,n,r),q(),Gi}let pk=(t,e,n,r,i,o)=>(si(!0),Up(r,i,WM()));function iK(t,e,n,r,i,o){const s=e[xn],a=!s||Cs()||vc(n)||Ms(s,o);if(si(a),a)return Up(r,i,WM());const c=Gl(s,t,e,n);return KP(s,o)&&xp(s,o,c.nextSibling),s&&(Xv(n)||TP(c))&&Ts(n)&&(function Az(t){le.skipHydrationRootTNode=t}(n),kx(c)),c}let mk=(t,e,n,r)=>(si(!0),CI(e[ue],""));function aK(t,e,n,r){let i;const o=e[xn],s=!o||Cs()||Ms(o,r)||vc(n);if(si(s),s)return CI(e[ue],"");const a=Gl(o,t,e,n),c=function WP(t,e){const n=t.data;let r=n[Rp]?.[e]??null;return null===r&&n[Cl]?.[e]&&(r=hI(t,e)),r}(o,r);return xp(o,r,a),i=Jp(c,a),i}function Kt(){return k()}const $s=void 0;var lK=["en",[["a","p"],["AM","PM"],$s],[["AM","PM"],$s,$s],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$s,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$s,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$s,"{1} 'at' {0}",$s],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uK(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Vc={};function kn(t){const e=function dK(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ik(e);if(n)return n;const r=e.split("-")[0];if(n=Ik(r),n)return n;if("en"===r)return lK;throw new V(701,!1)}function Ik(t){return t in Vc||(Vc[t]=rt.ng&&rt.ng.common&&rt.ng.common.locales&&rt.ng.common.locales[t]),Vc[t]}var et=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(et||{});const pg="en-US";let Ek=pg,Uk=(t,e,n)=>{};function be(t,e,n,r){const i=k(),o=we(),s=$e();return GE(o,i,i[ue],s,t,e,r),be}function GE(t,e,n,r,i,o,s){const a=dp(r),u=t.firstCreatePass&&function Jx(t){return t.cleanup??=[]}(t),d=e[Xe],h=function Yx(t){return t[Qa]??=[]}(e);let p=!0;if(3&r.type||s){const I=Nn(r,e),E=s?s(I):I,A=h.length,D=s?$=>s(ke($[r.index])):r.index;let F=null;if(!s&&a&&(F=function ZK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[Qa],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==F)(F.__ngLastListenerFn__||F).__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,p=!1;else{o=Hk(r,e,d,o),Uk(I,i,o);const $=n.listen(E,i,o);h.push(o,$),u&&u.push(i,D,A,A+1)}}else o=Hk(r,e,d,o);const g=r.outputs;let _;if(p&&null!==g&&(_=g[i])){const I=_.length;if(I)for(let E=0;E<I;E+=2){const J=e[_[E]][_[E+1]].subscribe(o),X=h.length;h.push(o,J),u&&u.push(i,r.index,X,-(X+1))}}}function $k(t,e,n,r){const i=Ee(null);try{return oi(6,e,n),!1!==n(r)}catch(o){return qp(t,o),!1}finally{oi(7,e,n),Ee(i)}}function Hk(t,e,n,r){return function i(o){if(o===Function)return r;Vl(t.componentOffset>-1?sr(t.index,e):e,5);let a=$k(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=$k(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function ye(t=1){return function Oz(t){return(le.lFrame.contextLView=function xM(t,e){for(;t>0;)e=e[Ya],t--;return e}(t,le.lFrame.contextLView))[Xe]}(t)}function te(t,e=""){const n=k(),r=we(),i=t+re,o=r.firstCreatePass?Ns(r,i,1,e,null):r.data[i],s=h1(r,n,o,e,t);n[i]=s,gl()&&Bp(r,n,s,o),Br(o,!1)}let h1=(t,e,n,r,i)=>(si(!0),bI(e[ue],r));function yQ(t,e,n,r,i){const o=e[xn],s=!o||Cs()||vc(n)||Ms(o,i);return si(s),s?bI(e[ue],r):Gl(o,t,e,n)}function Dr(t){return qi("",t,""),Dr}function qi(t,e,n){const r=k(),i=function Sc(t,e,n,r){return Dt(t,$r(),n)?e+pe(n)+r:ge}(r,t,e,n);return i!==ge&&Bi(r,cn(),i),qi}function yg(t,e,n,r,i){const o=k(),s=Rc(o,t,e,n,r,i);return s!==ge&&Bi(o,cn(),s),yg}function Qn(t,e,n){JN(e)&&(e=e());const r=k();return Dt(r,$r(),e)&&Wn(we(),Ze(),r,t,e,r[ue],n,!1),Qn}function dr(t,e){const n=JN(t);return n&&t.set(e),n}function Yn(t,e){const n=k(),r=we(),i=$e();return GE(r,n,n[ue],i,t,e),Yn}function WE(t,e,n,r,i){if(t=ce(t),Array.isArray(t))for(let o=0;o<t.length;o++)WE(t[o],e,n,r,i);else{const o=we(),s=k(),a=$e();let c=Es(t)?t:ce(t.provide);const u=gM(t),d=1048575&a.providerIndexes,h=a.directiveStart,p=a.providerIndexes>>20;if(Es(t)||!t.multi){const g=new ml(u,i,U),_=QE(c,e,i?d:d+p,h);-1===_?(Hv(Ep(a,s),o,c),KE(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[_]=g,s[_]=g)}else{const g=QE(c,e,d+p,h),_=QE(c,e,d,d+p),E=_>=0&&n[_];if(i&&!E||!i&&!(g>=0&&n[g])){Hv(Ep(a,s),o,c);const A=function CQ(t,e,n,r,i){const o=new ml(t,n,U);return o.multi=[],o.index=e,o.componentProviders=0,w1(o,i,r&&!n),o}(i?bQ:TQ,n.length,i,r,u);!i&&E&&(n[_].providerFactory=A),KE(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else KE(o,t,g>-1?g:_,w1(n[i?_:g],u,!i&&r));!i&&r&&E&&n[_].componentProviders++}}}function KE(t,e,n,r){const i=Es(e),o=function Y3(t){return!!t.useClass}(e);if(i||o){const c=(o?ce(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=u.indexOf(n);-1===d?u.push(n,[r,c]):u[d+1].push(r,c)}else u.push(n,c)}}}function w1(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function QE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function TQ(t,e,n,r){return YE(this.multi,[])}function bQ(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ss(n,n[G],this.providerFactory.index,r);o=a.slice(0,s),YE(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],YE(i,o);return o}function YE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function pt(t,e=[]){return n=>{n.providersResolver=(r,i)=>function wQ(t,e,n){const r=we();if(r.firstCreatePass){const i=jr(t);WE(n,r.data,r.blueprint,i,!0),WE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let DQ=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=dv(0,n.type),i=r.length>0?vE([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ie({token:t,providedIn:"environment",factory:()=>new t(me(or))})}}return t})();function gi(t){En("NgStandalone"),t.getStandaloneInjector=e=>e.get(DQ).getOrCreateStandaloneInjector(t)}function Lc(t,e,n){const r=On()+t,i=k();return i[r]===ge?di(i,r,n?e.call(n):e()):function Yl(t,e){return t[e]}(i,r)}function C1(t,e,n,r,i,o){return function S1(t,e,n,r,i,o,s,a){const c=e+n;return function og(t,e,n,r,i){const o=Ls(t,e,n,r);return Dt(t,e+2,i)||o}(t,c,i,o,s)?di(t,c+3,a?r.call(a,i,o,s):r(i,o,s)):cd(t,c+3)}(k(),On(),t,e,n,r,i,o)}function cd(t,e){const n=t[e];return n===ge?void 0:n}function Mo(t,e){const n=we();let r;const i=t+re;n.firstCreatePass?(r=function LQ(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=vs(r.type)),a=Hn(U);try{const c=Ip(!1),u=o();return Ip(c),function zE(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,k(),i,u),u}finally{Hn(a)}}function Po(t,e,n,r){const i=t+re,o=k(),s=function bs(t,e){return t[e]}(o,i);return function ud(t,e){return t[G].data[e].pure}(o,i)?function A1(t,e,n,r,i,o,s){const a=e+n;return Ls(t,a,i,o)?di(t,a+2,s?r.call(s,i,o):r(i,o)):cd(t,a+2)}(o,On(),e,s.transform,n,r,s):s.transform(n,r)}let tw=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const Y1=new z("");function fd(t){return!!t&&"function"==typeof t.then}function J1(t){return!!t&&"function"==typeof t.subscribe}const X1=new z("");let Z1=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=L(X1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(fd(o))n.push(o);else if(J1(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const pd=new z("");let Cg,hr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(y6),this.afterRenderManager=L(TO),this.zonelessEnabled=L(mc),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new _n,this.afterTick=new _n,this.componentTypes=[],this.components=[],this.isStable=L(Rs).hasPendingTasks.pipe(Ae(n=>!n)),this._injector=L(or)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof RN;if(!this._injector.get(Z1).done)throw!i&&function Io(t){const e=Te(t)||Ht(t)||sn(t);return null!==e&&e.standalone}(n),new V(405,!1);let s;s=i?n:this._injector.get(Zp).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function VY(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Vs),u=s.create(Xt.NULL,[],r||s.selector,a),d=u.location.nativeElement,h=u.injector.get(Y1,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),bg(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new V(101,!1);const n=Ee(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ee(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(rE,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)jY(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else n?.begin?.(),n?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>hp(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;bg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(pd,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>bg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new V(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function bg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function sw(t){Cg??=new WeakMap;const e=Cg.get(t);if(e)return e;const n=t.isStable.pipe(go(r=>r)).toPromise().then(()=>{});return Cg.set(t,n),t.onDestroy(()=>Cg?.delete(t)),n}function jY(t,e,n,r){(n||hp(t))&&zp(t,e,n&&!r?0:1)}class BY{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let $Y=(()=>{class t{compileModuleSync(n){return new yE(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=cr(yn(n).declarations).reduce((s,a)=>{const c=Te(a);return c&&s.push(new Kl(c)),s},[]);return new BY(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),qY=(()=>{class t{constructor(){this.zone=L(Le),this.changeDetectionScheduler=L(gc),this.applicationRef=L(hr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const zY=new z("",{factory:()=>!1});function aw({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Le({...cw(),scheduleInRootZone:n}),[{provide:Le,useFactory:t},{provide:Fr,multi:!0,useFactory:()=>{const r=L(qY,{optional:!0});return()=>r.initialize()}},{provide:Fr,multi:!0,useFactory:()=>{const r=L(KY);return()=>{r.initialize()}}},!0===e?{provide:SN,useValue:!0}:[],{provide:nE,useValue:n??gP}]}function cw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let KY=(()=>{class t{constructor(){this.subscription=new mn,this.initialized=!1,this.zone=L(Le),this.pendingTasks=L(Rs)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Le.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Le.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gd=(()=>{class t{constructor(){this.appRef=L(hr),this.taskService=L(Rs),this.ngZone=L(Le),this.zonelessEnabled=L(mc),this.disableScheduling=L(SN,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new mn,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Dp):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(nE,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Yv||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?_P:mP;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Dp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_P(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const xo=new z("",{providedIn:"root",factory:()=>L(xo,Ce.Optional|Ce.SkipSelf)||function QY(){return typeof $localize<"u"&&$localize.locale||pg}()}),Dg=new z("");function Ag(t){return!t.moduleRef}let No=null;let md=(()=>{class t{static{this.__NG_ELEMENT_ID__=oJ}}return t})();function oJ(t){return function sJ(t,e,n){if(Ts(t)&&!n){const r=sr(t.index,e);return new Ll(r,r)}return 175&t.type?new Ll(e[ft],e):null}($e(),k(),!(16&~t))}class mF{constructor(){}supports(e){return ig(e)}create(e){return new dJ(e)}}const lJ=(t,e)=>e;class dJ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||lJ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<yF(r,i,o)?n:r,a=yF(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,d=c-i;if(u!=d){for(let p=0;p<u;p++){const g=p<o.length?o[p]:o[p]=0,_=g+p;d<=_&&_<u&&(o[p]=g+1)}o[s.previousIndex]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!ig(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function SW(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new hJ(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new _F),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _F),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class hJ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fJ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class _F{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new fJ,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yF(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function IF(){return new gw([new mF])}let gw=(()=>{class t{static{this.\u0275prov=ie({token:t,providedIn:"root",factory:IF})}constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||IF()),deps:[[t,new ov,new iv]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new V(901,!1)}}return t})();function RJ(t){try{const{rootComponent:e,appProviders:n,platformProviders:r}=t,i=function iJ(t=[]){if(No)return No;const e=function uF(t=[],e){return Xt.create({name:e,providers:[{provide:pv,useValue:"platform"},{provide:Dg,useValue:new Set([()=>No=null])},...t]})}(t);return No=e,function eF(){!function jq(t){AR=t}(()=>{throw new V(600,!1)})}(),function lF(t){t.get($P,null)?.forEach(n=>n())}(e),e}(r),o=[aw({}),{provide:gc,useExisting:gd},...n||[]];return function sF(t){const e=Ag(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Le);return n.run(()=>{Ag(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(ci,null);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Ag(t)){const o=()=>e.destroy(),s=t.platformInjector.get(Dg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Dg);s.add(o),t.moduleRef.onDestroy(()=>{bg(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return function UY(t,e,n){try{const r=n();return fd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(r,n,()=>{const o=e.get(Z1);return o.runInitializers(),o.donePromise.then(()=>{if(function gK(t){"string"==typeof t&&(Ek=t.toLowerCase().replace(/_/g,"-"))}(e.get(xo,pg)||pg),Ag(t)){const a=e.get(hr);return void 0!==t.rootComponent&&a.bootstrap(t.rootComponent),a}return function tJ(t,e){const n=t.injector.get(hr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new V(-403,!1);t.instance.ngDoBootstrap(n)}e.push(t)}(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}({r3Injector:new gO({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}let $F=!1;function KJ(){return Is([{provide:Np,useFactory:()=>{let t=!0;return ur()&&(t=!!L(oc,{optional:!0})?.get(cI,null)),t&&En("NgHydration"),t}},{provide:Fr,useValue:()=>{(function TN(t){EN=t})(!1),ur()&&L(Np)&&(function QJ(){const t=To();let e;for(const n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&"nghm"===n.textContent?.trim()){e=n;break}if(!e)throw new V(-507,!1)}(),function qJ(){$F||($F=!0,function K6(){GP=W6}(),function oK(){pk=iK}(),function vQ(){h1=yQ}(),function cK(){mk=aK}(),function xW(){mO=PW}(),function X8(){LN=J8,aE=Y8}(),function M8(){AN=R8}(),function i9(){Hx=r9}())}())},multi:!0},{provide:XP,useFactory:()=>ur()&&L(Np)},{provide:pd,useFactory:()=>{if(ur()&&L(Np)){const t=L(hr);return L(Xt),()=>{(function WJ(t){return sw(t)})(t).then(()=>{!function A8(t){const e=t._views;for(const n of e){const r=qP(n);null!==r&&null!==r[ht]&&(qt(r)?Xp(r):DN(r))}}(t)})}}return()=>{}},multi:!0}])}function Bc(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function Id(t,e){En("NgSignals");const n=function Vq(t){const e=Object.create(Lq);e.computation=t;const n=()=>{if(IR(e),My(e),e.value===Lf)throw e.error;return e.value};return n[Or]=e,n}(t);return e?.equal&&(n[Or].equal=e.equal),n}function mi(t){const e=Ee(null);try{return t()}finally{Ee(e)}}let GF=null;function Oo(){return GF}class rX{}const _i=new z("");let qF=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:()=>L(iX),providedIn:"platform"})}}return t})(),iX=(()=>{class t extends qF{constructor(){super(),this._doc=L(_i),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Oo().getBaseHref(this._doc)}onPopState(n){const r=Oo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Oo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function zF(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function WF(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Gs(t){return t&&"?"!==t[0]?"?"+t:t}let Vg=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:()=>L(sX),providedIn:"root"})}}return t})();const oX=new z("");let sX=(()=>{class t extends Vg{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(_i).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return zF(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Gs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Gs(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Gs(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(me(qF),me(oX,8))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ed=(()=>{class t{constructor(n){this._subject=new Et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function uX(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(WF(KF(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Gs(r))}normalize(n){return t.stripTrailingSlash(function cX(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,KF(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Gs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Gs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Gs}static{this.joinWithSlash=zF}static{this.stripTrailingSlash=WF}static{this.\u0275fac=function(r){return new(r||t)(me(Vg))}}static{this.\u0275prov=ie({token:t,factory:()=>function aX(){return new Ed(me(Vg))}(),providedIn:"root"})}}return t})();function KF(t){return t.replace(/\/index.html$/,"")}var Vn=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Vn||{}),We=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(We||{}),fr=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(fr||{});const Vt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ug(t,e){return Sr(kn(t)[et.DateFormat],e)}function jg(t,e){return Sr(kn(t)[et.TimeFormat],e)}function Bg(t,e){return Sr(kn(t)[et.DateTimeFormat],e)}function Ar(t,e){const n=kn(t),r=n[et.NumberSymbols][e];if(typeof r>"u"){if(e===Vt.CurrencyDecimal)return n[et.NumberSymbols][Vt.Decimal];if(e===Vt.CurrencyGroup)return n[et.NumberSymbols][Vt.Group]}return r}function YF(t){if(!t[et.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[et.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Sr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function vw(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const TX=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,$g={},bX=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var zi=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(zi||{}),Ue=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Ue||{}),je=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(je||{});function CX(t,e,n,r){let i=function OX(t){if(ZF(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,o=1,s=1]=t.split("-").map(a=>+a);return Hg(i,o-1,s)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(TX))return function kX(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),u=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,c,u),e}(r)}const e=new Date(t);if(!ZF(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=Wi(n,e)||e;let a,s=[];for(;e;){if(a=bX.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const d=s.pop();if(!d)break;e=d}}let c=i.getTimezoneOffset();r&&(c=XF(r,c),i=function NX(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function xX(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(XF(e,i)-i))}(i,r,!0));let u="";return s.forEach(d=>{const h=function PX(t){if(Ew[t])return Ew[t];let e;switch(t){case"G":case"GG":case"GGG":e=tt(je.Eras,We.Abbreviated);break;case"GGGG":e=tt(je.Eras,We.Wide);break;case"GGGGG":e=tt(je.Eras,We.Narrow);break;case"y":e=Lt(Ue.FullYear,1,0,!1,!0);break;case"yy":e=Lt(Ue.FullYear,2,0,!0,!0);break;case"yyy":e=Lt(Ue.FullYear,3,0,!1,!0);break;case"yyyy":e=Lt(Ue.FullYear,4,0,!1,!0);break;case"Y":e=Wg(1);break;case"YY":e=Wg(2,!0);break;case"YYY":e=Wg(3);break;case"YYYY":e=Wg(4);break;case"M":case"L":e=Lt(Ue.Month,1,1);break;case"MM":case"LL":e=Lt(Ue.Month,2,1);break;case"MMM":e=tt(je.Months,We.Abbreviated);break;case"MMMM":e=tt(je.Months,We.Wide);break;case"MMMMM":e=tt(je.Months,We.Narrow);break;case"LLL":e=tt(je.Months,We.Abbreviated,Vn.Standalone);break;case"LLLL":e=tt(je.Months,We.Wide,Vn.Standalone);break;case"LLLLL":e=tt(je.Months,We.Narrow,Vn.Standalone);break;case"w":e=Iw(1);break;case"ww":e=Iw(2);break;case"W":e=Iw(1,!0);break;case"d":e=Lt(Ue.Date,1);break;case"dd":e=Lt(Ue.Date,2);break;case"c":case"cc":e=Lt(Ue.Day,1);break;case"ccc":e=tt(je.Days,We.Abbreviated,Vn.Standalone);break;case"cccc":e=tt(je.Days,We.Wide,Vn.Standalone);break;case"ccccc":e=tt(je.Days,We.Narrow,Vn.Standalone);break;case"cccccc":e=tt(je.Days,We.Short,Vn.Standalone);break;case"E":case"EE":case"EEE":e=tt(je.Days,We.Abbreviated);break;case"EEEE":e=tt(je.Days,We.Wide);break;case"EEEEE":e=tt(je.Days,We.Narrow);break;case"EEEEEE":e=tt(je.Days,We.Short);break;case"a":case"aa":case"aaa":e=tt(je.DayPeriods,We.Abbreviated);break;case"aaaa":e=tt(je.DayPeriods,We.Wide);break;case"aaaaa":e=tt(je.DayPeriods,We.Narrow);break;case"b":case"bb":case"bbb":e=tt(je.DayPeriods,We.Abbreviated,Vn.Standalone,!0);break;case"bbbb":e=tt(je.DayPeriods,We.Wide,Vn.Standalone,!0);break;case"bbbbb":e=tt(je.DayPeriods,We.Narrow,Vn.Standalone,!0);break;case"B":case"BB":case"BBB":e=tt(je.DayPeriods,We.Abbreviated,Vn.Format,!0);break;case"BBBB":e=tt(je.DayPeriods,We.Wide,Vn.Format,!0);break;case"BBBBB":e=tt(je.DayPeriods,We.Narrow,Vn.Format,!0);break;case"h":e=Lt(Ue.Hours,1,-12);break;case"hh":e=Lt(Ue.Hours,2,-12);break;case"H":e=Lt(Ue.Hours,1);break;case"HH":e=Lt(Ue.Hours,2);break;case"m":e=Lt(Ue.Minutes,1);break;case"mm":e=Lt(Ue.Minutes,2);break;case"s":e=Lt(Ue.Seconds,1);break;case"ss":e=Lt(Ue.Seconds,2);break;case"S":e=Lt(Ue.FractionalSeconds,1);break;case"SS":e=Lt(Ue.FractionalSeconds,2);break;case"SSS":e=Lt(Ue.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=qg(zi.Short);break;case"ZZZZZ":e=qg(zi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=qg(zi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=qg(zi.Long);break;default:return null}return Ew[t]=e,e}(d);u+=h?h(i,n,c):"''"===d?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Hg(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Wi(t,e){const n=function dX(t){return kn(t)[et.LocaleId]}(t);if($g[n]??={},$g[n][e])return $g[n][e];let r="";switch(e){case"shortDate":r=Ug(t,fr.Short);break;case"mediumDate":r=Ug(t,fr.Medium);break;case"longDate":r=Ug(t,fr.Long);break;case"fullDate":r=Ug(t,fr.Full);break;case"shortTime":r=jg(t,fr.Short);break;case"mediumTime":r=jg(t,fr.Medium);break;case"longTime":r=jg(t,fr.Long);break;case"fullTime":r=jg(t,fr.Full);break;case"short":const i=Wi(t,"shortTime"),o=Wi(t,"shortDate");r=Gg(Bg(t,fr.Short),[i,o]);break;case"medium":const s=Wi(t,"mediumTime"),a=Wi(t,"mediumDate");r=Gg(Bg(t,fr.Medium),[s,a]);break;case"long":const c=Wi(t,"longTime"),u=Wi(t,"longDate");r=Gg(Bg(t,fr.Long),[c,u]);break;case"full":const d=Wi(t,"fullTime"),h=Wi(t,"fullDate");r=Gg(Bg(t,fr.Full),[d,h])}return r&&($g[n][e]=r),r}function Gg(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function zr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Lt(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function AX(t,e){switch(t){case Ue.FullYear:return e.getFullYear();case Ue.Month:return e.getMonth();case Ue.Date:return e.getDate();case Ue.Hours:return e.getHours();case Ue.Minutes:return e.getMinutes();case Ue.Seconds:return e.getSeconds();case Ue.FractionalSeconds:return e.getMilliseconds();case Ue.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===Ue.Hours)0===a&&-12===n&&(a=12);else if(t===Ue.FractionalSeconds)return function DX(t,e){return zr(t,3).substring(0,e)}(a,e);const c=Ar(s,Vt.MinusSign);return zr(a,e,c,r,i)}}function tt(t,e,n=Vn.Format,r=!1){return function(i,o){return function SX(t,e,n,r,i,o){switch(n){case je.Months:return function pX(t,e,n){const r=kn(t),o=Sr([r[et.MonthsFormat],r[et.MonthsStandalone]],e);return Sr(o,n)}(e,i,r)[t.getMonth()];case je.Days:return function fX(t,e,n){const r=kn(t),o=Sr([r[et.DaysFormat],r[et.DaysStandalone]],e);return Sr(o,n)}(e,i,r)[t.getDay()];case je.DayPeriods:const s=t.getHours(),a=t.getMinutes();if(o){const u=function yX(t){const e=kn(t);return YF(e),(e[et.ExtraData][2]||[]).map(r=>"string"==typeof r?vw(r):[vw(r[0]),vw(r[1])])}(e),d=function vX(t,e,n){const r=kn(t);YF(r);const o=Sr([r[et.ExtraData][0],r[et.ExtraData][1]],e)||[];return Sr(o,n)||[]}(e,i,r),h=u.findIndex(p=>{if(Array.isArray(p)){const[g,_]=p,I=s>=g.hours&&a>=g.minutes,E=s<_.hours||s===_.hours&&a<_.minutes;if(g.hours<_.hours){if(I&&E)return!0}else if(I||E)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(-1!==h)return d[h]}return function hX(t,e,n){const r=kn(t),o=Sr([r[et.DayPeriodsFormat],r[et.DayPeriodsStandalone]],e);return Sr(o,n)}(e,i,r)[s<12?0:1];case je.Eras:return function gX(t,e){return Sr(kn(t)[et.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,o,t,e,n,r)}}function qg(t){return function(e,n,r){const i=-1*r,o=Ar(n,Vt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case zi.Short:return(i>=0?"+":"")+zr(s,2,o)+zr(Math.abs(i%60),2,o);case zi.ShortGMT:return"GMT"+(i>=0?"+":"")+zr(s,1,o);case zi.Long:return"GMT"+(i>=0?"+":"")+zr(s,2,o)+":"+zr(Math.abs(i%60),2,o);case zi.Extended:return 0===r?"Z":(i>=0?"+":"")+zr(s,2,o)+":"+zr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}const RX=0,zg=4;function JF(t){const e=t.getDay(),n=0===e?-3:zg-e;return Hg(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Iw(t,e=!1){return function(n,r){let i;if(e){const o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{const o=JF(n),s=function MX(t){const e=Hg(t,RX,1).getDay();return Hg(t,0,1+(e<=zg?zg:zg+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return zr(i,t,Ar(r,Vt.MinusSign))}}function Wg(t,e=!1){return function(n,r){return zr(JF(n).getFullYear(),t,Ar(r,Vt.MinusSign),e)}}const Ew={};function XF(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function ZF(t){return t instanceof Date&&!isNaN(t.valueOf())}class YX{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Td=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new YX(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),oV(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{oV(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(U(Hr),U($i),U(gw))}}static{this.\u0275dir=de({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function oV(t,e){t.context.$implicit=e.item}let qs=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new JX,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){sV("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){sV("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(U(Hr),U($i))}}static{this.\u0275dir=de({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})();class JX{constructor(){this.$implicit=null,this.ngIf=null}}function sV(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${$t(e)}'.`)}const lZ=new z(""),dZ=new z("");let cV=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(null==n||""===n||n!=n)return null;try{return CX(n,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw function Wr(t,e){return new V(2100,!1)}()}}static{this.\u0275fac=function(r){return new(r||t)(U(xo,16),U(lZ,24),U(dZ,24))}}static{this.\u0275pipe=qn({name:"date",type:t,pure:!0,standalone:!0})}}return t})(),zs=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=al({type:t})}static{this.\u0275inj=$a({})}}return t})();const lV="browser",EZ="server";function dV(t){return t===lV}function xw(t){return t===EZ}function wV(t){return t&&xe(t.schedule)}function Fw(t){return t[t.length-1]}function TV(t){return xe(Fw(t))?t.pop():void 0}function Dd(t){return wV(Fw(t))?t.pop():void 0}function ko(t){return this instanceof ko?(this.v=t,this):new ko(t)}function AV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function jw(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=t[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const $w=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function SV(t){return xe(t?.then)}function RV(t){return xe(t[Hy])}function MV(t){return Symbol.asyncIterator&&xe(t?.[Symbol.asyncIterator])}function PV(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const xV=function bee(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function NV(t){return xe(t?.[xV])}function OV(t){return function DV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(g,_){r[g]&&(i[g]=function(I){return new Promise(function(E,A){o.push([g,I,E,A])>1||c(g,I)})},_&&(i[g]=_(i[g])))}function c(g,_){try{!function u(g){g.value instanceof ko?Promise.resolve(g.value.v).then(d,h):p(o[0][2],g)}(r[g](_))}catch(I){p(o[0][3],I)}}function d(g){c("next",g)}function h(g){c("throw",g)}function p(g,_){g(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield ko(n.read());if(i)return yield ko(void 0);yield yield ko(r)}}finally{n.releaseLock()}})}function kV(t){return xe(t?.getReader)}function Jn(t){if(t instanceof dt)return t;if(null!=t){if(RV(t))return function Cee(t){return new dt(e=>{const n=t[Hy]();if(xe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if($w(t))return function Dee(t){return new dt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(SV(t))return function Aee(t){return new dt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,OR)})}(t);if(MV(t))return FV(t);if(NV(t))return function See(t){return new dt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(kV(t))return function Ree(t){return FV(OV(t))}(t)}throw PV(t)}function FV(t){return new dt(e=>{(function Mee(t,e){var n,r,i,o;return function bV(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(h){s(h)}}function c(d){try{u(r.throw(d))}catch(h){s(h)}}function u(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=AV(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ki(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function VV(t,e=0){return Bt((n,r)=>{n.subscribe(Ot(r,i=>Ki(r,t,()=>r.next(i),e),()=>Ki(r,t,()=>r.complete(),e),i=>Ki(r,t,()=>r.error(i),e)))})}function LV(t,e=0){return Bt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function UV(t,e){if(!t)throw new Error("Iterable cannot be null");return new dt(n=>{Ki(n,e,()=>{const r=t[Symbol.asyncIterator]();Ki(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Zt(t,e){return e?function Fee(t,e){if(null!=t){if(RV(t))return function Pee(t,e){return Jn(t).pipe(LV(e),VV(e))}(t,e);if($w(t))return function Nee(t,e){return new dt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(SV(t))return function xee(t,e){return Jn(t).pipe(LV(e),VV(e))}(t,e);if(MV(t))return UV(t,e);if(NV(t))return function Oee(t,e){return new dt(n=>{let r;return Ki(n,e,()=>{r=t[xV](),Ki(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>xe(r?.return)&&r.return()})}(t,e);if(kV(t))return function kee(t,e){return UV(OV(t),e)}(t,e)}throw PV(t)}(t,e):Jn(t)}function fe(...t){return Zt(t,Dd(t))}function un(t,e,n){const r=xe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Bt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ot(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):ys}class Ws{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ws?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Ws;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Ws?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}var Gw=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Gw||{});class qw{constructor(e,n=200,r="OK"){this.headers=e.headers||new Ws,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Zg extends qw{constructor(e={}){super(e),this.type=Gw.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Zg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}const Yee=new z(""),cte=new z(""),eL="b",tL="h",nL="s",rL="st",iL="u",oL="rt",tm=new z(""),ute=["GET","HEAD"];function lte(t,e){const{isCacheActive:n,...r}=L(tm),{transferCache:i,method:o}=t;if(!n||!1===i||"POST"===o&&!r.includePostRequests&&!i||"POST"!==o&&!ute.includes(o)||!r.includeRequestsWithAuthHeaders&&function dte(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}(t)||!1===r.filter?.(t))return e(t);const s=L(oc),a=L(cte,{optional:!0}),c=xw(L(ui));if(a&&!c)throw new V(2803,!1);const u=c&&a?function mte(t,e){const n=new URL(t,"resolve://").origin,r=e[n];return r?t.replace(n,r):t}(t.url,a):t.url,d=function fte(t,e){const{params:n,method:r,responseType:i}=t,o=sL(n);let s=t.serializeBody();s instanceof URLSearchParams?s=sL(s):"string"!=typeof s&&(s="");const c=function pte(t){let e=0;for(const n of t)e=Math.imul(31,e)+n.charCodeAt(0)|0;return e+=2147483648,e.toString()}([r,i,e,s,o].join("|"));return c}(t,u),h=s.get(d,null);let p=r.includeHeaders;if("object"==typeof i&&i.includeHeaders&&(p=i.includeHeaders),h){const{[eL]:g,[oL]:_,[tL]:I,[nL]:E,[rL]:A,[iL]:D}=h;let F=g;switch(_){case"arraybuffer":F=(new TextEncoder).encode(g).buffer;break;case"blob":F=new Blob([g])}let $=new Ws(I);return fe(new Zg({body:F,headers:$,status:E,statusText:A,url:D}))}return e(t).pipe(un(g=>{g instanceof Zg&&c&&s.set(d,{[eL]:g.body,[tL]:hte(g.headers,p),[nL]:g.status,[rL]:g.statusText,[iL]:u,[oL]:t.responseType})}))}function hte(t,e){if(!e)return{};const n={};for(const r of e){const i=t.getAll(r);null!==i&&(n[r]=i)}return n}function sL(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function gte(t){return[{provide:tm,useFactory:()=>(En("NgHttpTransferCache"),{isCacheActive:!0,...t})},{provide:Yee,useValue:lte,multi:!0,deps:[oc,tm]},{provide:pd,multi:!0,useFactory:()=>{const e=L(hr),n=L(tm);return()=>{sw(e).then(()=>{n.isCacheActive=!1})}}}]}class _te extends rX{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Kw extends _te{static makeCurrent(){!function nX(t){GF??=t}(new Kw)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function yte(){return Sd=Sd||document.querySelector("base"),Sd?Sd.getAttribute("href"):null}();return null==n?null:function vte(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Sd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function WX(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Sd=null,Ete=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac})}}return t})();const Qw=new z("");let aL=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(me(Qw),me(Le))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac})}}return t})();class cL{constructor(e){this._doc=e}}const Yw="ng-app-id";let uL=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xw(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Yw}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Yw),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Yw,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(me(_i),me(bl),me(HP,8),me(ui))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac})}}return t})();const Jw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xw=/%COMP%/g,Cte=new z("",{providedIn:"root",factory:()=>!0});function dL(t,e){return e.map(n=>n.replace(Xw,t))}let hL=(()=>{class t{constructor(n,r,i,o,s,a,c,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=xw(a),this.defaultRenderer=new Zw(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Vr.ShadowDom&&(r={...r,encapsulation:Vr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof pL?i.applyToHost(n):i instanceof eT&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Vr.Emulated:o=new pL(c,u,r,this.appId,d,s,a,h);break;case Vr.ShadowDom:return new Rte(c,u,n,r,s,a,this.nonce,h);default:o=new eT(c,u,r,d,s,a,h)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(me(aL),me(uL),me(bl),me(Cte),me(_i),me(ui),me(Le),me(HP))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac})}}return t})();class Zw{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Jw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(fL(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(fL(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Jw[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Jw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Co.DashCase|Co.Important)?e.style.setProperty(n,r,i&Co.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Co.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Oo().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function fL(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Rte extends Zw{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=dL(i.id,i.styles);for(const d of u){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class eT extends Zw{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?dL(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class pL extends eT{constructor(e,n,r,i,o,s,a,c){const u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=function Dte(t){return"_ngcontent-%COMP%".replace(Xw,t)}(u),this.hostAttr=function Ate(t){return"_nghost-%COMP%".replace(Xw,t)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}const gL=["alt","control","meta","shift"],Pte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xte={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function mL(t){return{appProviders:[...jte,...t?.providers??[]],platformProviders:Lte}}const Lte=[{provide:ui,useValue:lV},{provide:$P,useValue:function kte(){Kw.makeCurrent()},multi:!0},{provide:_i,useFactory:function Vte(){return function j6(t){nI=t}(document),document},deps:[]}],jte=[{provide:pv,useValue:"root"},{provide:ci,useFactory:function Fte(){return new ci},deps:[]},{provide:Qw,useClass:(()=>{class t extends cL{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(me(_i))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac})}}return t})(),multi:!0,deps:[_i,Le,ui]},{provide:Qw,useClass:(()=>{class t extends cL{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oo().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),gL.forEach(u=>{const d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=Pte[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),gL.forEach(s=>{s!==i&&(0,xte[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(me(_i))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac})}}return t})(),multi:!0,deps:[_i]},hL,uL,aL,{provide:rE,useExisting:hL},{provide:class TZ{},useClass:Ete,deps:[]},[]];let Bte=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(me(_i))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Qs=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t}(Qs||{});const{isArray:Wte}=Array,{getPrototypeOf:Kte,prototype:Qte,keys:Yte}=Object;function vL(t){if(1===t.length){const e=t[0];if(Wte(e))return{args:e,keys:null};if(function Jte(t){return t&&"object"==typeof t&&Kte(t)===Qte}(e)){const n=Yte(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Xte}=Array;function tT(t){return Ae(e=>function Zte(t,e){return Xte(e)?t(...e):t(e)}(t,e))}function IL(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function EL(...t){const e=Dd(t),n=TV(t),{args:r,keys:i}=vL(t);if(0===r.length)return Zt([],e);const o=new dt(function ene(t,e,n=ys){return r=>{wL(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)wL(e,()=>{const u=Zt(t[c],e);let d=!1;u.subscribe(Ot(r,h=>{o[c]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>IL(i,s):ys));return n?o.pipe(tT(n)):o}function wL(t,e,n){t?Ki(n,t,e):e()}function ln(t,e,n=1/0){return xe(e)?ln((r,i)=>Ae((o,s)=>e(r,o,i,s))(Jn(t(r,i))),n):("number"==typeof e&&(n=e),Bt((r,i)=>function tne(t,e,n,r,i,o,s,a){const c=[];let u=0,d=0,h=!1;const p=()=>{h&&!c.length&&!u&&e.complete()},g=I=>u<r?_(I):c.push(I),_=I=>{o&&e.next(I),u++;let E=!1;Jn(n(I,d++)).subscribe(Ot(e,A=>{i?.(A),o?g(A):e.next(A)},()=>{E=!0},void 0,()=>{if(E)try{for(u--;c.length&&u<r;){const A=c.shift();s?Ki(e,s,()=>_(A)):_(A)}p()}catch(A){e.error(A)}}))};return t.subscribe(Ot(e,g,()=>{h=!0,p()})),()=>{a?.()}}(r,i,t,n)))}function rm(t=1/0){return ln(ys,t)}function Rd(...t){return function nne(){return rm(1)}()(Zt(t,Dd(t)))}function im(t){return new dt(e=>{Jn(t()).subscribe(e)})}function Md(t,e){const n=xe(t)?t:()=>t,r=i=>i.error(n());return new dt(e?i=>e.schedule(r,0,i):r)}function nT(){return Bt((t,e)=>{let n=null;t._refCount++;const r=Ot(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class rT extends dt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,LR(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mn;const n=this.getSubject();e.add(this.source.subscribe(Ot(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mn.EMPTY)}return e}refCount(){return nT()(this)}}function pr(t,e){return Bt((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Ot(r,c=>{i?.unsubscribe();let u=0;const d=o++;Jn(t(c,d)).subscribe(i=Ot(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function om(t,e){return xe(e)?ln(t,e,1):ln(t,1)}function Gc(t){return Bt((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Ot(n,void 0,void 0,s=>{o=Jn(t(s,Gc(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function iT(t){return t<=0?()=>kr:Bt((e,n)=>{let r=[];e.subscribe(Ot(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function TL(t){return Ae(()=>t)}function oT(t){return Bt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Ie="primary",Pd=Symbol("RouteTitle");class cne{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function qc(t){return new cne(t)}function une(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function yi(t,e){const n=t?sT(t):void 0,r=e?sT(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!bL(t[i],e[i]))return!1;return!0}function sT(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function bL(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function CL(t){return t.length>0?t[t.length-1]:null}function Vo(t){return function zte(t){return!!t&&(t instanceof dt||xe(t.lift)&&xe(t.subscribe))}(t)?t:fd(t)?Zt(Promise.resolve(t)):fe(t)}const dne={exact:function SL(t,e,n){if(!Js(t.segments,e.segments)||!sm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!SL(t.children[r],e.children[r],n))return!1;return!0},subset:RL},DL={exact:function hne(t,e){return yi(t,e)},subset:function fne(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>bL(t[n],e[n]))},ignored:()=>!0};function AL(t,e,n){return dne[n.paths](t.root,e.root,n.matrixParams)&&DL[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function RL(t,e,n){return ML(t,e,e.segments,n)}function ML(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Js(i,n)||e.hasChildren()||!sm(i,n,r))}if(t.segments.length===n.length){if(!Js(t.segments,n)||!sm(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!RL(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Js(t.segments,i)&&sm(t.segments,i,r)&&t.children[Ie])&&ML(t.children[Ie],e,o,r)}}function sm(t,e,n){return e.every((r,i)=>DL[n](t[i].parameters,r.parameters))}class Ys{constructor(e=new qe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=qc(this.queryParams),this._queryParamMap}toString(){return mne.serialize(this)}}class qe{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cm(this)}}class xd{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=qc(this.parameters),this._parameterMap}toString(){return NL(this)}}function Js(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let zc=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:()=>new am,providedIn:"root"})}}return t})();class am{parse(e){const n=new Ane(e);return new Ys(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Nd(e.root,!0)}`,r=function vne(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${um(n)}=${um(i)}`).join("&"):`${um(n)}=${um(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function _ne(t){return encodeURI(t)}(e.fragment)}`:""}`}}const mne=new am;function cm(t){return t.segments.map(e=>NL(e)).join("/")}function Nd(t,e){if(!t.hasChildren())return cm(t);if(e){const n=t.children[Ie]?Nd(t.children[Ie],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ie&&r.push(`${i}:${Nd(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function gne(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ie&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ie&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===Ie?[Nd(t.children[Ie],!1)]:[`${i}:${Nd(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Ie]?`${cm(t)}/${n[0]}`:`${cm(t)}/(${n.join("//")})`}}function PL(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function um(t){return PL(t).replace(/%3B/gi,";")}function aT(t){return PL(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lm(t){return decodeURIComponent(t)}function xL(t){return lm(t.replace(/\+/g,"%20"))}function NL(t){return`${aT(t.path)}${function yne(t){return Object.entries(t).map(([e,n])=>`;${aT(e)}=${aT(n)}`).join("")}(t.parameters)}`}const Ine=/^[^\/()?;#]+/;function cT(t){const e=t.match(Ine);return e?e[0]:""}const Ene=/^[^\/()?;=#]+/,Tne=/^[^=?&#]+/,Cne=/^[^&#]+/;class Ane{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ie]=new qe(e,n)),r}parseSegment(){const e=cT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new xd(lm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function wne(t){const e=t.match(Ene);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=cT(this.remaining);i&&(r=i,this.capture(r))}e[lm(n)]=lm(r)}parseQueryParam(e){const n=function bne(t){const e=t.match(Tne);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function Dne(t){const e=t.match(Cne);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=xL(n),o=xL(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ie);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[Ie]:new qe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}}function OL(t){return t.segments.length>0?new qe([],{[Ie]:t}):t}function kL(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=kL(i);if(r===Ie&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Sne(t){if(1===t.numberOfChildren&&t.children[Ie]){const e=t.children[Ie];return new qe(t.segments.concat(e.segments),e.children)}return t}(new qe(t.segments,e))}function Xs(t){return t instanceof Ys}function FL(t){let e;const i=OL(function n(o){const s={};for(const c of o.children){const u=n(c);s[c.outlet]=u}const a=new qe(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function VL(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return uT(i,i,i,n,r);const o=function Mne(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new UL(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new UL(n,e,r)}(e);if(o.toRoot())return uT(i,i,new qe([],{}),n,r);const s=function Pne(t,e,n){if(t.isAbsolute)return new hm(e,!0,0);if(!n)return new hm(e,!1,NaN);if(null===n.parent)return new hm(n,!0,0);const r=dm(t.commands[0])?0:1;return function xne(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new hm(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?kd(s.segmentGroup,s.index,o.commands):jL(s.segmentGroup,s.index,o.commands);return uT(i,s.segmentGroup,a,n,r)}function dm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Od(t){return"object"==typeof t&&null!=t&&t.outlets}function uT(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`}),s=t===e?n:LL(t,e,n);const a=OL(kL(s));return new Ys(a,o,i)}function LL(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:LL(o,e,n)}),new qe(t.segments,r)}class UL{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&dm(r[0]))throw new V(4003,!1);const i=r.find(Od);if(i&&i!==CL(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hm{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function jL(t,e,n){if(t??=new qe([],{}),0===t.segments.length&&t.hasChildren())return kd(t,e,n);const r=function One(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Od(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!$L(c,u,s))return o;r+=2}else{if(!$L(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new qe(t.segments.slice(0,r.pathIndex),{});return o.children[Ie]=new qe(t.segments.slice(r.pathIndex),t.children),kd(o,0,i)}return r.match&&0===i.length?new qe(t.segments,{}):r.match&&!t.hasChildren()?lT(t,e,n):r.match?kd(t,0,i):lT(t,e,n)}function kd(t,e,n){if(0===n.length)return new qe(t.segments,{});{const r=function Nne(t){return Od(t[0])?t[0].outlets:{[Ie]:t}}(n),i={};if(Object.keys(r).some(o=>o!==Ie)&&t.children[Ie]&&1===t.numberOfChildren&&0===t.children[Ie].segments.length){const o=kd(t.children[Ie],e,n);return new qe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=jL(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new qe(t.segments,i)}}function lT(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Od(o)){const c=kne(o.outlets);return new qe(r,c)}if(0===i&&dm(n[0])){r.push(new xd(t.segments[e].path,BL(n[0]))),i++;continue}const s=Od(o)?o.outlets[Ie]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&dm(a)?(r.push(new xd(s,BL(a))),i+=2):(r.push(new xd(s,{})),i++)}return new qe(r,{})}function kne(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=lT(new qe([],{}),0,r))}),e}function BL(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function $L(t,e,n){return t==n.path&&yi(e,n.parameters)}const Fd="imperative";var Pe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Pe||{});class vi{constructor(e,n){this.id=e,this.url=n}}class dT extends vi{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Pe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Lo extends vi{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Pe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var gr=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(gr||{}),hT=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(hT||{});class Zs extends vi{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Pe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vd extends vi{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Pe.NavigationSkipped}}class fT extends vi{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Pe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class HL extends vi{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Pe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fne extends vi{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Pe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vne extends vi{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Pe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Lne extends vi{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Une extends vi{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jne{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bne{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $ne{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hne{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gne{constructor(e){this.snapshot=e,this.type=Pe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qne{constructor(e){this.snapshot=e,this.type=Pe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pT{}class fm{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function Kr(t){return t.outlet||Ie}function Ld(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Jne{get injector(){return Ld(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ud(this.rootInjector),this.attachRef=null}}let Ud=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Jne(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(me(or))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class GL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=gT(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=gT(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=mT(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mT(e,this._root).map(n=>n.value)}}function gT(t,e){if(t===e.value)return e;for(const n of e.children){const r=gT(t,n);if(r)return r}return null}function mT(t,e){if(t===e.value)return[e];for(const n of e.children){const r=mT(t,n);if(r.length)return r.unshift(e),r}return[]}class Qr{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Wc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class qL extends GL{constructor(e,n){super(e),this.snapshot=n,_T(this,e)}toString(){return this.snapshot.toString()}}function zL(t){const e=function Xne(t){const o=new gm([],{},{},"",{},Ie,t,null,{});return new WL("",new Qr(o,[]))}(t),n=new Ir([new xd("",{})]),r=new Ir({}),i=new Ir({}),o=new Ir({}),s=new Ir(""),a=new Uo(n,r,o,s,i,Ie,t,e.root);return a.snapshot=e.root,new qL(new Qr(a,[]),e)}class Uo{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ae(u=>u[Pd]))??fe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ae(e=>qc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ae(e=>qc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pm(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&QL(i)&&(r.resolve[Pd]=i.title),r}class gm{get title(){return this.data?.[Pd]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qc(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class WL extends GL{constructor(e,n){super(n),this.url=e,_T(this,n)}toString(){return KL(this._root)}}function _T(t,e){e.value._routerState=t,e.children.forEach(n=>_T(t,n))}function KL(t){const e=t.children.length>0?` { ${t.children.map(KL).join(", ")} } `:"";return`${t.value}${e}`}function yT(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),yi(e.params,n.params)||t.paramsSubject.next(n.params),function lne(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!yi(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),yi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function vT(t,e){const n=yi(t.params,e.params)&&function pne(t,e){return Js(t,e)&&t.every((n,r)=>yi(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||vT(t.parent,e.parent))}function QL(t){return"string"==typeof t.title||null===t.title}let IT=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ie,this.activateEvents=new Et,this.deactivateEvents=new Et,this.attachEvents=new Et,this.detachEvents=new Et,this.parentContexts=L(Ud),this.location=L(Hr),this.changeDetector=L(md),this.inputBinder=L(mm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ET(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=de({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tr]})}}return t})();class ET{__ngOutletInjector(e){return new ET(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Uo?this.route:e===Ud?this.childContexts:this.parent.get(e,n)}}const mm=new z("");function jd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function ere(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return jd(t,r,i);return jd(t,r)})}(t,e,n);return new Qr(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>jd(t,a)),s}}const r=function tre(t){return new Uo(new Ir(t.url),new Ir(t.params),new Ir(t.queryParams),new Ir(t.fragment),new Ir(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>jd(t,o));return new Qr(r,i)}}class wT{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const JL="ngNavigationCancelingError";function _m(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Xs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=XL(!1,gr.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function XL(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[JL]=!0,n.cancellationCode=e,n}function ZL(t){return!!t&&t[JL]}class ire{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),yT(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Wc(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Wc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Wc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Wc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qne(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hne(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(yT(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),yT(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class e2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ym{constructor(e,n){this.component=e,this.route=n}}function ore(t,e,n){const r=t._root;return Bd(r,e?e._root:null,n,[r.value])}function Kc(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function f3(t){return null!==Kf(t)}(t)?e.get(t):t:r}function Bd(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Wc(e);return t.children.forEach(s=>{(function are(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function cre(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Js(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Js(t.url,e.url)||!yi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vT(t,e)||!yi(t.queryParams,e.queryParams);default:return!vT(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new e2(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Bd(t,e,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ym(a.outlet.component,s))}else s&&$d(e,a,i),i.canActivateChecks.push(new e2(r)),Bd(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$d(a,n.getContext(s),i)),i}function $d(t,e,n){const r=Wc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{$d(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new ym(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Hd(t){return"function"==typeof t}function t2(t){return t instanceof Gf||"EmptyError"===t?.name}const vm=Symbol("INITIAL_VALUE");function Qc(){return pr(t=>EL(t.map(e=>e.pipe($n(1),function rne(...t){const e=Dd(t);return Bt((n,r)=>{(e?Rd(t,n,e):Rd(t,n)).subscribe(r)})}(vm)))).pipe(Ae(e=>{for(const n of e)if(!0!==n){if(n===vm)return vm;if(!1===n||gre(n))return n}return!0}),Er(e=>e!==vm),$n(1)))}function gre(t){return Xs(t)||t instanceof wT}function n2(t){return function e3(...t){return kR(t)}(un(e=>{if("boolean"!=typeof e)throw _m(0,e)}),Ae(e=>!0===e))}class TT{constructor(e){this.segmentGroup=e||null}}class Im extends Error{constructor(e){super(),this.urlTree=e}}function Yc(t){return Md(new TT(t))}class Sre{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return fe(r);if(i.numberOfChildren>1||!i.children[Ie])return Md(new V(4e3,!1));i=i.children[Ie]}}applyRedirectCommands(e,n,r,i,o){if("string"!=typeof n){const a=n,{queryParams:c,fragment:u,routeConfig:d,url:h,outlet:p,params:g,data:_,title:I}=i,E=Eo(o,()=>a({params:g,data:_,queryParams:c,fragment:u,routeConfig:d,url:h,outlet:p,title:I}));if(E instanceof Ys)throw new Im(E);n=E}const s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if("/"===n[0])throw new Im(s);return s}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new Ys(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new qe(o,s)}createSegments(e,n,r,i){return n.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const bT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rre(t,e,n,r,i){const o=r2(t,e,n);return o.matched?(r=function zne(t,e){return t.providers&&!t._injector&&(t._injector=vE(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Cre(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?fe(i.map(s=>{const a=Kc(s,t);return Vo(function pre(t){return t&&Hd(t.canMatch)}(a)?a.canMatch(e,n):Eo(t,()=>a(e,n)))})).pipe(Qc(),n2()):fe(!0)}(r,e,n).pipe(Ae(s=>!0===s?o:{...bT}))):fe(o)}function r2(t,e,n){if("**"===e.path)return function Mre(t){return{matched:!0,parameters:t.length>0?CL(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...bT}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||une)(n,t,e);if(!i)return{...bT};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function i2(t,e,n,r){return n.length>0&&function Nre(t,e,n){return n.some(r=>Em(t,e,r)&&Kr(r)!==Ie)}(t,n,r)?{segmentGroup:new qe(e,xre(r,new qe(n,t.children))),slicedSegments:[]}:0===n.length&&function Ore(t,e,n){return n.some(r=>Em(t,e,r))}(t,n,r)?{segmentGroup:new qe(t.segments,Pre(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new qe(t.segments,t.children),slicedSegments:n}}function Pre(t,e,n,r){const i={};for(const o of n)if(Em(t,e,o)&&!r[Kr(o)]){const s=new qe([],{});i[Kr(o)]=s}return{...r,...i}}function xre(t,e){const n={};n[Ie]=e;for(const r of t)if(""===r.path&&Kr(r)!==Ie){const i=new qe([],{});n[Kr(r)]=i}return n}function Em(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Fre{}class Ure{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Sre(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){const e=i2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ae(({children:n,rootSnapshot:r})=>{const i=new Qr(r,n),o=new WL("",i),s=function Rne(t,e,n=null,r=null){return VL(FL(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const n=new gm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ie,n).pipe(Ae(r=>({children:r,rootSnapshot:n})),Gc(r=>{if(r instanceof Im)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof TT?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Ae(s=>s instanceof Qr?[s]:[]))}processChildren(e,n,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return Zt(o).pipe(om(s=>{const a=r.children[s],c=function Yne(t,e){const n=t.filter(r=>Kr(r)===e);return n.push(...t.filter(r=>Kr(r)!==e)),n}(n,s);return this.processSegmentGroup(e,c,a,s,i)}),function one(t,e){return Bt(function ine(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Ot(s,d=>{const h=u++;c=a?t(c,d,h):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),qf(null),function sne(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Er((i,o)=>t(i,o,r)):ys,iT(1),n?qf(e):UR(()=>new Gf))}(),ln(s=>{if(null===s)return Yc(r);const a=o2(s);return function jre(t){t.sort((e,n)=>e.value.outlet===Ie?-1:n.value.outlet===Ie?1:e.value.outlet.localeCompare(n.value.outlet))}(a),fe(a)}))}processSegment(e,n,r,i,o,s,a){return Zt(n).pipe(om(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Gc(u=>{if(u instanceof TT)return fe(null);throw u}))),go(c=>!!c),Gc(c=>{if(t2(c))return function kre(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?fe(new Fre):Yc(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Kr(r)===s||s!==Ie&&Em(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Yc(i):Yc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){const{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=r2(n,i,o);if(!c)return Yc(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const g=new gm(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,s2(i),Kr(i),i.component??i._loadedComponent??null,i,a2(i)),_=pm(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(_.params),g.data=Object.freeze(_.data);const I=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(i,I).pipe(ln(E=>this.processSegment(e,r,n,E.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){const a=Rre(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(pr(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(pr(({routes:u})=>{const d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=c,_=new gm(p,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,s2(r),Kr(r),r.component??r._loadedComponent??null,r,a2(r)),I=pm(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(I.params),_.data=Object.freeze(I.data);const{segmentGroup:E,slicedSegments:A}=i2(n,p,g,u);if(0===A.length&&E.hasChildren())return this.processChildren(d,u,E,_).pipe(Ae(F=>new Qr(_,F)));if(0===u.length&&0===A.length)return fe(new Qr(_,[]));const D=Kr(r)===o;return this.processSegment(d,u,E,A,D?Ie:o,!0,_).pipe(Ae(F=>new Qr(_,F instanceof Qr?[F]:[])))})):Yc(n)))}getChildConfig(e,n,r){return n.children?fe({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?fe({routes:n._loadedRoutes,injector:n._loadedInjector}):function bre(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?fe(!0):fe(i.map(s=>{const a=Kc(s,t);return Vo(function lre(t){return t&&Hd(t.canLoad)}(a)?a.canLoad(e,n):Eo(t,()=>a(e,n)))})).pipe(Qc(),n2())}(e,n,r).pipe(ln(i=>i?this.configLoader.loadChildren(e,n).pipe(un(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function Are(){return Md(XL(!1,gr.GuardRejected))}())):fe({routes:[],injector:e})}}function Bre(t){const e=t.value.routeConfig;return e&&""===e.path}function o2(t){const e=[],n=new Set;for(const r of t){if(!Bre(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=o2(r.children);e.push(new Qr(r.value,i))}return e.filter(r=>!n.has(r))}function s2(t){return t.data||{}}function a2(t){return t.resolve||{}}function c2(t){const e=t.children.map(n=>c2(n)).flat();return[t,...e]}function CT(t){return pr(e=>{const n=t(e);return n?Zt(n).pipe(Ae(()=>e)):fe(e)})}let u2=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ie);return r}getResolvedTitleForRoute(n){return n.data[Pd]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:()=>L(Wre),providedIn:"root"})}}return t})(),Wre=(()=>{class t extends u2{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(me(Bte))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Gd=new z("",{providedIn:"root",factory:()=>({})});let l2=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ni({type:t,selectors:[["ng-component"]],standalone:!0,features:[gi],decls:1,vars:0,template:function(r,i){1&r&&Gi(0,"router-outlet")},dependencies:[IT],encapsulation:2})}}return t})();function DT(t){const e=t.children&&t.children.map(DT),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ie&&(n.component=l2),n}const wm=new z("");let d2=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L($Y)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return fe(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Vo(n.loadComponent()).pipe(Ae(h2),un(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),oT(()=>{this.componentLoaders.delete(n)})),i=new rT(r,()=>new _n).pipe(nT());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Kre(t,e,n,r){return Vo(t.loadChildren()).pipe(Ae(h2),ln(i=>i instanceof pO||Array.isArray(i)?fe(i):Zt(e.compileModuleAsync(i))),Ae(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(wm,[],{optional:!0,self:!0}).flat()),{routes:s.map(DT),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(oT(()=>{this.childrenLoaders.delete(r)})),s=new rT(o,()=>new _n).pipe(nT());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function h2(t){return function Qre(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let AT=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:()=>L(Yre),providedIn:"root"})}}return t})(),Yre=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const f2=new z(""),g2=new z("");let Tm=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _n,this.transitionAbortSubject=new _n,this.configLoader=L(d2),this.environmentInjector=L(or),this.urlSerializer=L(zc),this.rootContexts=L(Ud),this.location=L(Ed),this.inputBindingEnabled=null!==L(mm,{optional:!0}),this.titleStrategy=L(u2),this.options=L(Gd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(AT),this.createViewTransition=L(f2,{optional:!0}),this.navigationErrorHandler=L(g2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>fe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Bne(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new jne(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new Ir({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fd,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Er(o=>0!==o.id),Ae(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pr(o=>{let s=!1,a=!1;return fe(o).pipe(pr(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",gr.SupersededByNewNavigation),kr;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:"string"==typeof c.extras.browserUrl?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const h="";return this.events.next(new Vd(c.id,this.urlSerializer.serialize(c.rawUrl),h,hT.IgnoredSameUrlNavigation)),c.resolve(!1),kr}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return fe(c).pipe(pr(h=>{const p=this.transitions?.getValue();return this.events.next(new dT(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?kr:Promise.resolve(h)}),function $re(t,e,n,r,i,o){return ln(s=>function Vre(t,e,n,r,i,o,s="emptyOnly"){return new Ure(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(Ae(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),un(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const p=new HL(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:h,extractedUrl:p,source:g,restoredState:_,extras:I}=c,E=new dT(h,this.urlSerializer.serialize(p),g,_);this.events.next(E);const A=zL(this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:A,urlAfterRedirects:p,extras:{...I,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=p,fe(o)}{const h="";return this.events.next(new Vd(c.id,this.urlSerializer.serialize(c.extractedUrl),h,hT.IgnoredByUrlHandlingStrategy)),c.resolve(!1),kr}}),un(c=>{const u=new Fne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ae(c=>(this.currentTransition=o={...c,guards:ore(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function mre(t,e){return ln(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?fe({...n,guardsResult:!0}):function _re(t,e,n,r){return Zt(t).pipe(ln(i=>function Tre(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?fe(o.map(a=>{const c=Ld(e)??i,u=Kc(a,c);return Vo(function fre(t){return t&&Hd(t.canDeactivate)}(u)?u.canDeactivate(t,e,n,r):Eo(c,()=>u(t,e,n,r))).pipe(go())})).pipe(Qc()):fe(!0)}(i.component,i.route,n,e,r)),go(i=>!0!==i,!0))}(s,r,i,t).pipe(ln(a=>a&&function ure(t){return"boolean"==typeof t}(a)?function yre(t,e,n,r){return Zt(e).pipe(om(i=>Rd(function Ire(t,e){return null!==t&&e&&e(new $ne(t)),fe(!0)}(i.route.parent,r),function vre(t,e){return null!==t&&e&&e(new Gne(t)),fe(!0)}(i.route,r),function wre(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function sre(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>im(()=>fe(s.guards.map(c=>{const u=Ld(s.node)??n,d=Kc(c,u);return Vo(function hre(t){return t&&Hd(t.canActivateChild)}(d)?d.canActivateChild(r,t):Eo(u,()=>d(r,t))).pipe(go())})).pipe(Qc())));return fe(o).pipe(Qc())}(t,i.path,n),function Ere(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return fe(!0);const i=r.map(o=>im(()=>{const s=Ld(e)??n,a=Kc(o,s);return Vo(function dre(t){return t&&Hd(t.canActivate)}(a)?a.canActivate(e,t):Eo(s,()=>a(e,t))).pipe(go())}));return fe(i).pipe(Qc())}(t,i.route,n))),go(i=>!0!==i,!0))}(r,o,t,e):fe(a)),Ae(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),un(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw _m(0,c.guardsResult);const u=new Vne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Er(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",gr.GuardRejected),!1)),CT(c=>{if(c.guards.canActivateChecks.length)return fe(c).pipe(un(u=>{const d=new Lne(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),pr(u=>{let d=!1;return fe(u).pipe(function Hre(t,e){return ln(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return fe(n);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const u of c2(c))s.add(u);let a=0;return Zt(s).pipe(om(c=>o.has(c)?function Gre(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!QL(i)&&(o[Pd]=i.title),function qre(t,e,n,r){const i=sT(t);if(0===i.length)return fe({});const o={};return Zt(i).pipe(ln(s=>function zre(t,e,n,r){const i=Ld(e)??r,o=Kc(t,i);return Vo(o.resolve?o.resolve(e,n):Eo(i,()=>o(e,n)))}(t[s],e,n,r).pipe(go(),un(a=>{if(a instanceof wT)throw _m(new am,a);o[s]=a}))),iT(1),TL(o),Gc(s=>t2(s)?kr:Md(s)))}(o,t,e,r).pipe(Ae(s=>(t._resolvedData=s,t.data=pm(t,t.parent,n).resolve,null)))}(c,r,t,e):(c.data=pm(c,c.parent,t).resolve,fe(void 0))),un(()=>a++),iT(1),ln(c=>a===s.size?fe(n):kr))})}(this.paramsInheritanceStrategy,this.environmentInjector),un({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",gr.NoDataFromResolver)}}))}),un(u=>{const d=new Une(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),CT(c=>{const u=d=>{const h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(un(p=>{d.component=p}),Ae(()=>{})));for(const p of d.children)h.push(...u(p));return h};return EL(u(c.targetSnapshot.root)).pipe(qf(null),$n(1))}),CT(()=>this.afterPreactivation()),pr(()=>{const{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?Zt(d).pipe(Ae(()=>o)):fe(o)}),Ae(c=>{const u=function Zne(t,e,n){const r=jd(t,e._root,n?n._root:void 0);return new qL(r,e)}(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:u},this.currentNavigation.targetRouterState=u,o}),un(()=>{this.events.next(new pT)}),((t,e,n,r)=>Ae(i=>(new ire(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),$n(1),un({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function ane(t){return Bt((e,n)=>{Jn(t).subscribe(Ot(n,()=>n.complete(),tl)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(un(c=>{throw c}))),oT(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",gr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gc(c=>{if(a=!0,ZL(c))this.events.next(new Zs(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function nre(t){return ZL(t)&&Xs(t.url)}(c)?this.events.next(new fm(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{const u=new fT(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{const d=Eo(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof wT){const{message:h,cancellationCode:p}=_m(0,d);this.events.next(new Zs(o.id,this.urlSerializer.serialize(o.extractedUrl),h,p)),this.events.next(new fm(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);const h=n.errorHandler(c);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return kr}))}))}cancelNavigationTransition(n,r,i){const o=new Zs(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Zre(t){return t!==Fd}let eie=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:()=>L(nie),providedIn:"root"})}}return t})();class tie{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let nie=(()=>{class t extends tie{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Jt(t)))(i||t)}})()}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),m2=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:()=>L(rie),providedIn:"root"})}}return t})(),rie=(()=>{class t extends m2{constructor(){super(...arguments),this.location=L(Ed),this.urlSerializer=L(zc),this.options=L(Gd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(AT),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ys,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zL(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof dT)this.stateMemento=this.createStateMemento();else if(n instanceof Vd)this.rawUrlTree=r.initialUrl;else if(n instanceof HL){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof pT?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Zs&&(n.code===gr.GuardRejected||n.code===gr.NoDataFromResolver)?this.restoreHistory(r):n instanceof fT?this.restoreHistory(r,!0):n instanceof Lo&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const i=n instanceof Ys?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&0===o&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Jt(t)))(i||t)}})()}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var qd=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(qd||{});function iie(t){throw t}const oie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(tw),this.stateManager=L(m2),this.options=L(Gd,{optional:!0})||{},this.pendingTasks=L(Rs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(Tm),this.urlSerializer=L(zc),this.location=L(Ed),this.urlHandlingStrategy=L(AT),this._events=new _n,this.errorHandler=this.options.errorHandler||iie,this.navigated=!1,this.routeReuseStrategy=L(eie),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(wm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(mm,{optional:!0}),this.eventsSubscription=new mn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Zs&&r.code!==gr.Redirect&&r.code!==gr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Lo)this.navigated=!0;else if(r instanceof fm){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Zre(i.source),...s};this.scheduleNavigation(a,Fd,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function cie(t){return!(t instanceof pT||t instanceof fm)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(DT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let h,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=FL(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),h=this.currentUrlTree.root}return VL(h,n,d,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Xs(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Fd,null,r)}navigate(n,r={skipLocationChange:!1}){return function aie(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new V(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...oie}:!1===r?{...sie}:r,Xs(n))return AL(this.currentUrlTree,n,i);const o=this.parseUrl(n);return AL(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((h,p)=>{a=h,c=p});const d=this.pendingTasks.add();return function _2(t,e){t.events.pipe(Er(n=>n instanceof Lo||n instanceof Zs||n instanceof fT||n instanceof Vd),Ae(n=>n instanceof Lo||n instanceof Vd?qd.COMPLETE:n instanceof Zs&&(n.code===gr.Redirect||n.code===gr.SupersededByNewNavigation)?qd.REDIRECTING:qd.FAILED),Er(n=>n!==qd.REDIRECTING),$n(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),zd=(()=>{class t{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new _n,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=n.events.subscribe(u=>{u instanceof Lo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Xs(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.href=null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;const r=null===this.href?null:function gx(t,e,n){return function D5(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?px:fx}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.routerLinkInput?null:Xs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(U(Rr),U(Uo),function vl(t){return function Qz(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(rM(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}($e(),t)}("tabindex"),U(Hi),U(ar),U(Vg))}}static{this.\u0275dir=de({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&be("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&hi("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Bc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Bc],replaceUrl:[2,"replaceUrl","replaceUrl",Bc],routerLink:"routerLink"},standalone:!0,features:[fO,Tr]})}}return t})();const ST=new z("");function v2(t){return t.routerState.root}function I2(){const t=L(Xt);return e=>{const n=t.get(hr);if(e!==n.components[0])return;const r=t.get(Rr),i=t.get(E2);1===t.get(RT)&&r.initialNavigation(),t.get(w2,null,Ce.Optional)?.setUpPreloading(),t.get(ST,null,Ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const E2=new z("",{factory:()=>new _n}),RT=new z("",{providedIn:"root",factory:()=>1}),w2=new z("");let b2=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(U(Hi),U(ar))}}static{this.\u0275dir=de({type:t})}}return t})(),ea=(()=>{class t extends b2{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Jt(t)))(i||t)}})()}static{this.\u0275dir=de({type:t,features:[He]})}}return t})();const Ei=new z(""),vie={provide:Ei,useExisting:Je(()=>jo),multi:!0},Eie=new z("");let jo=(()=>{class t extends b2{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Iie(){const t=Oo()?Oo().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(U(Hi),U(ar),U(Eie,8))}}static{this.\u0275dir=de({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&be("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[pt([vie]),He]})}}return t})();const wn=new z(""),$o=new z("");function R2(t){return function Bo(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}(t.value)?{required:!0}:null}function bm(t){return null}function k2(t){return null!=t}function F2(t){return fd(t)?Zt(t):t}function V2(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function L2(t,e){return e.map(n=>n(t))}function U2(t){return t.map(e=>function Tie(t){return!t.validate}(e)?e:n=>e.validate(n))}function MT(t){return null!=t?function j2(t){if(!t)return null;const e=t.filter(k2);return 0==e.length?null:function(n){return V2(L2(n,e))}}(U2(t)):null}function PT(t){return null!=t?function B2(t){if(!t)return null;const e=t.filter(k2);return 0==e.length?null:function(n){return function _ie(...t){const e=TV(t),{args:n,keys:r}=vL(t),i=new dt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let d=0;d<s;d++){let h=!1;Jn(n[d]).subscribe(Ot(o,p=>{h||(h=!0,u--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(u||o.next(r?IL(r,a):a),o.complete())}))}});return e?i.pipe(tT(e)):i}(L2(n,e).map(F2)).pipe(Ae(V2))}}(U2(t)):null}function $2(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function xT(t){return t?Array.isArray(t)?t:[t]:[]}function Cm(t,e){return Array.isArray(t)?t.includes(e):t===e}function q2(t,e){const n=xT(e);return xT(t).forEach(i=>{Cm(n,i)||n.push(i)}),n}function z2(t,e){return xT(e).filter(n=>!Cm(t,n))}class W2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=MT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Ln extends W2{get formDirective(){return null}get path(){return null}}class Ho extends W2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class K2{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Jc=(()=>{class t extends K2{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(U(Ho,2))}}static{this.\u0275dir=de({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Bs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[He]})}}return t})(),NT=(()=>{class t extends K2{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(U(Ln,10))}}static{this.\u0275dir=de({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Bs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[He]})}}return t})();const Wd="VALID",Am="INVALID",Xc="PENDING",Kd="DISABLED";class Zc{}class Y2 extends Zc{constructor(e,n){super(),this.value=e,this.source=n}}class FT extends Zc{constructor(e,n){super(),this.pristine=e,this.source=n}}class VT extends Zc{constructor(e,n){super(),this.touched=e,this.source=n}}class Sm extends Zc{constructor(e,n){super(),this.status=e,this.source=n}}function LT(t){return(Rm(t)?t.validators:t)||null}function UT(t,e){return(Rm(e)?e.asyncValidators:t)||null}function Rm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class jT{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Id(()=>this.statusReactive()),this.statusReactive=_c(void 0),this._pristine=Id(()=>this.pristineReactive()),this.pristineReactive=_c(!0),this._touched=Id(()=>this.touchedReactive()),this.touchedReactive=_c(!1),this._events=new _n,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mi(this.statusReactive)}set status(e){mi(()=>this.statusReactive.set(e))}get valid(){return this.status===Wd}get invalid(){return this.status===Am}get pending(){return this.status==Xc}get disabled(){return this.status===Kd}get enabled(){return this.status!==Kd}get pristine(){return mi(this.pristineReactive)}set pristine(e){mi(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return mi(this.touchedReactive)}set touched(e){mi(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(q2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(q2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(z2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(z2(e,this._rawAsyncValidators))}hasValidator(e){return Cm(this._rawValidators,e)}hasAsyncValidator(e){return Cm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new VT(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new VT(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new FT(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new FT(!0,r))}markAsPending(e={}){this.status=Xc;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Sm(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Kd,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Y2(this.value,r)),this._events.next(new Sm(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Wd,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wd||this.status===Xc)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Y2(this.value,n)),this._events.next(new Sm(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kd:Wd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Xc,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n};const r=F2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sm(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?Kd:this.errors?Am:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xc)?Xc:this._anyControlsHaveStatus(Am)?Am:Wd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new FT(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new VT(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Mie(t){return Array.isArray(t)?MT(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Pie(t){return Array.isArray(t)?PT(t):t||null}(this._rawAsyncValidators)}}class BT extends jT{constructor(e,n,r){super(LT(n),UT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function X2(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new V(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function J2(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[n])throw new V(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const eu=new z("CallSetDisabledState",{providedIn:"root",factory:()=>Mm}),Mm="always";function Qd(t,e,n=Mm){$T(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Oie(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Z2(t,e)})}(t,e),function Fie(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function kie(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Z2(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Nie(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Nm(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function $T(t,e){const n=function H2(t){return t._rawValidators}(t);null!==e.validator?t.setValidators($2(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function G2(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators($2(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Nm(e._rawValidators,i),Nm(e._rawAsyncValidators,i)}function Z2(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Bie={provide:Ln,useExisting:Je(()=>Jd)},Yd=Promise.resolve();let Jd=(()=>{class t extends Ln{get submitted(){return mi(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Id(()=>this.submittedReactive()),this.submittedReactive=_c(!1),this._directives=new Set,this.ngSubmit=new Et,this.form=new BT({},MT(n),PT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Yd.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Qd(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Yd.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Yd.then(()=>{const r=this._findContainer(n.path),i=new BT({});(function eU(t,e){$T(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Yd.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Yd.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),function tU(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(U(wn,10),U($o,10),U(eu,8))}}static{this.\u0275dir=de({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&be("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pt([Bie]),He]})}}return t})();function nU(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function rU(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const iU=class extends jT{constructor(e=null,n,r){super(LT(n),UT(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=rU(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){rU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Gie={provide:Ho,useExisting:Je(()=>ta)},aU=Promise.resolve();let ta=(()=>{class t extends Ho{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new iU,this._registered=!1,this.name="",this.update=new Et,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function qT(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===jo?n=o:function Uie(t){return Object.getPrototypeOf(t.constructor)===ea}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function GT(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Qd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){aU.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&Bc(r);aU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function Pm(t,e){return[...e.path,t]}(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(U(Ln,9),U(wn,10),U($o,10),U(Ei,10),U(md,8),U(eu,8))}}static{this.\u0275dir=de({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pt([Gie]),He,Tr]})}}return t})(),zT=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=de({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),na=(()=>{class t{constructor(){this._validator=bm}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bm,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=de({type:t,features:[Tr]})}}return t})();const coe={provide:wn,useExisting:Je(()=>Xd),multi:!0};let Xd=(()=>{class t extends na{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Bc,this.createValidator=n=>R2}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Jt(t)))(i||t)}})()}static{this.\u0275dir=de({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&hi("required",i._enabled?"":null)},inputs:{required:"required"},features:[pt([coe]),He]})}}return t})(),poe=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=al({type:t})}static{this.\u0275inj=$a({})}}return t})(),Zd=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:eu,useValue:n.callSetDisabledState??Mm}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=al({type:t})}static{this.\u0275inj=$a({imports:[poe]})}}return t})();function DU(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(c){DU(o,r,i,s,a,"next",c)}function a(c){DU(o,r,i,s,a,"throw",c)}s(void 0)})}}const AU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},SU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0;let p=(15&a)<<2|u>>6,g=63&u;c||(g=64,s||(p=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==h)throw new voe;r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==h&&r.push(u<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class voe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const km=function(t){return function(t){const e=AU(t);return SU.encodeByteArray(e,!0)}(t).replace(/\./g,"")},Fm=function(t){try{return SU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Vm=()=>{try{return function woe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Fm(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},MU=t=>{var e,n;return null===(n=null===(e=Vm())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},PU=()=>{var t;return null===(t=Vm())||void 0===t?void 0:t.config},xU=t=>{var e;return null===(e=Vm())||void 0===e?void 0:e[`_${t}`]};class NU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ZT(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Lm(){try{return"object"==typeof indexedDB}catch{return!1}}function eb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}function kU(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ra.prototype.create)}}class ra{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function koe(t,e){return t.replace(Foe,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Yr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const Foe=/\{\$([^}]+)}/g;function ia(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(VU(o)&&VU(s)){if(!ia(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function VU(t){return null!==t&&"object"==typeof t}function eh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function th(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function nh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class Uoe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function joe(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=tb),void 0===i.error&&(i.error=tb),void 0===i.complete&&(i.complete=tb);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tb(){}const Boe=1e3,$oe=2,Hoe=144e5,Goe=.5;function LU(t,e=Boe,n=$oe){const r=e*Math.pow(n,t),i=Math.round(Goe*r*(Math.random()-.5)*2);return Math.min(Hoe,r+i)}function ot(t){return t&&t._delegate?t._delegate:t}class Jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oa="[DEFAULT]";class zoe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new NU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Koe(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return v(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===oa?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qoe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zoe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const rb=[];var Se=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Se||{});const UU={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},Yoe=Se.INFO,Joe={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},Xoe=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Joe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class jm{constructor(e){this.name=e,this._logLevel=Yoe,this._logHandler=Xoe,this._userLogHandler=null,rb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?UU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const Zoe=(t,e)=>e.some(n=>t instanceof n);let jU,BU;const $U=new WeakMap,ib=new WeakMap,HU=new WeakMap,ob=new WeakMap,sb=new WeakMap;let ab={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return ib.get(t);if("objectStoreNames"===e)return t.objectStoreNames||HU.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Go(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function sse(t){return"function"==typeof t?function ose(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function tse(){return BU||(BU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(cb(this),e),Go($U.get(this))}:function(...e){return Go(t.apply(cb(this),e))}:function(e,...n){const r=t.call(cb(this),e,...n);return HU.set(r,e.sort?e.sort():[e]),Go(r)}}(t):(t instanceof IDBTransaction&&function rse(t){if(ib.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ib.set(t,e)}(t),Zoe(t,function ese(){return jU||(jU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,ab):t)}function Go(t){if(t instanceof IDBRequest)return function nse(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Go(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&$U.set(n,t)}).catch(()=>{}),sb.set(e,t),e}(t);if(ob.has(t))return ob.get(t);const e=sse(t);return e!==t&&(ob.set(t,e),sb.set(e,t)),e}const cb=t=>sb.get(t);function GU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Go(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Go(s.result),c.oldVersion,c.newVersion,Go(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const ase=["get","getKey","getAll","getAllKeys","count"],cse=["put","add","delete","clear"],ub=new Map;function qU(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ub.get(e))return ub.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=cse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ase.includes(n))return;const o=function(){var s=v(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return ub.set(e,o),o}!function ise(t){ab=t(ab)}(t=>({...t,get:(e,n,r)=>qU(e,n)||t.get(e,n,r),has:(e,n)=>!!qU(e,n)||t.has(e,n)}));class use{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function lse(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Bm="@firebase/app",lb="0.10.13",Qi=new jm("@firebase/app"),dse="@firebase/app-compat",hse="@firebase/analytics-compat",fse="@firebase/analytics",pse="@firebase/app-check-compat",gse="@firebase/app-check",mse="@firebase/auth",_se="@firebase/auth-compat",yse="@firebase/database",vse="@firebase/data-connect",Ise="@firebase/database-compat",Ese="@firebase/functions",wse="@firebase/functions-compat",Tse="@firebase/installations",bse="@firebase/installations-compat",Cse="@firebase/messaging",Dse="@firebase/messaging-compat",Ase="@firebase/performance",Sse="@firebase/performance-compat",Rse="@firebase/remote-config",Mse="@firebase/remote-config-compat",Pse="@firebase/storage",xse="@firebase/storage-compat",Nse="@firebase/firestore",Ose="@firebase/vertexai-preview",kse="@firebase/firestore-compat",Fse="firebase",$m="[DEFAULT]",Lse={[Bm]:"fire-core",[dse]:"fire-core-compat",[fse]:"fire-analytics",[hse]:"fire-analytics-compat",[gse]:"fire-app-check",[pse]:"fire-app-check-compat",[mse]:"fire-auth",[_se]:"fire-auth-compat",[yse]:"fire-rtdb",[vse]:"fire-data-connect",[Ise]:"fire-rtdb-compat",[Ese]:"fire-fn",[wse]:"fire-fn-compat",[Tse]:"fire-iid",[bse]:"fire-iid-compat",[Cse]:"fire-fcm",[Dse]:"fire-fcm-compat",[Ase]:"fire-perf",[Sse]:"fire-perf-compat",[Rse]:"fire-rc",[Mse]:"fire-rc-compat",[Pse]:"fire-gcs",[xse]:"fire-gcs-compat",[Nse]:"fire-fst",[kse]:"fire-fst-compat",[Ose]:"fire-vertex","fire-js":"fire-js",[Fse]:"fire-js-all"},sa=new Map,rh=new Map,ih=new Map;function zU(t,e){try{t.container.addComponent(e)}catch(n){Qi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wi(t){const e=t.name;if(ih.has(e))return Qi.debug(`There were multiple attempts to register component ${e}.`),!1;ih.set(e,t);for(const n of sa.values())zU(n,t);for(const n of rh.values())zU(n,t);return!0}function qo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ti(t){return void 0!==t.settings}const Mr=new ra("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class WU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}const tu="10.14.1";function KU(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:$m,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Mr.create("bad-app-name",{appName:String(i)});if(n||(n=PU()),!n)throw Mr.create("no-options");const o=sa.get(i);if(o){if(ia(n,o.options)&&ia(r,o.config))return o;throw Mr.create("duplicate-app",{appName:i})}const s=new Qoe(i);for(const c of ih.values())s.addComponent(c);const a=new WU(n,r,s);return sa.set(i,a),a}function db(t=$m){const e=sa.get(t);if(!e&&t===$m&&PU())return KU();if(!e)throw Mr.create("no-app",{appName:t});return e}function mr(t,e,n){var r;let i=null!==(r=Lse[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Qi.warn(a.join(" "))}wi(new Jr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Hse="firebase-heartbeat-database",Gse=1,oh="firebase-heartbeat-store";let fb=null;function QU(){return fb||(fb=GU(Hse,Gse,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(oh)}catch(n){console.warn(n)}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),fb}function pb(){return(pb=v(function*(t){try{const n=(yield QU()).transaction(oh),r=yield n.objectStore(oh).get(JU(t));return yield n.done,r}catch(e){if(e instanceof Yr)Qi.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e?.message});Qi.warn(n.message)}}})).apply(this,arguments)}function YU(t,e){return gb.apply(this,arguments)}function gb(){return(gb=v(function*(t,e){try{const r=(yield QU()).transaction(oh,"readwrite");yield r.objectStore(oh).put(e,JU(t)),yield r.done}catch(n){if(n instanceof Yr)Qi.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n?.message});Qi.warn(r.message)}}})).apply(this,arguments)}function JU(t){return`${t.name}!${t.options.appId}`}class Kse{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Yse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return v(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=XU();return null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Qi.warn(i)}})()}getHeartbeatsHeader(){var e=this;return v(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=XU(),{heartbeatsToSend:i,unsentEntries:o}=function Qse(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ZU(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ZU(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=km(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return Qi.warn(r),""}})()}}function XU(){return(new Date).toISOString().substring(0,10)}class Yse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(function*(){return!!Lm()&&eb().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return v(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function qse(t){return pb.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return YU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return YU(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function ZU(t){return km(JSON.stringify({version:2,heartbeats:t})).length}function Hm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}!function Jse(t){wi(new Jr("platform-logger",e=>new use(e),"PRIVATE")),wi(new Jr("heartbeat",e=>new Kse(e),"PRIVATE")),mr(Bm,lb,t),mr(Bm,lb,"esm2017"),mr("fire-js","")}(""),mr("firebase","10.14.1","app"),"function"==typeof SuppressedError&&SuppressedError;const Sae=function tj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nj=new ra("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Gm=new jm("@firebase/auth");function qm(t,...e){Gm.logLevel<=Se.ERROR&&Gm.error(`Auth (${tu}): ${t}`,...e)}function Xn(t,...e){throw wb(t,...e)}function Pr(t,...e){return wb(t,...e)}function Eb(t,e,n){const r=Object.assign(Object.assign({},Sae()),{[e]:n});return new ra("auth","Firebase",r).create(e,{appName:t.name})}function en(t){return Eb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wb(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nj.create(t,...e)}function W(t,e,...n){if(!t)throw wb(e,...n)}function bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qm(e),new Error(e)}function zo(t,e){t||bi(e)}function ah(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function rj(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class ch{constructor(e,n){this.shortDelay=e,this.longDelay=n,zo(n>e,"Short delay should be less than long delay!"),this.isMobile=function Soe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}()||function xoe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function Mae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Tb(){return"http:"===rj()||"https:"===rj()}()||ZT()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bb(t,e){zo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class ij{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Nae=new ch(3e4,6e4);function st(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function at(t,e,n,r){return Cb.apply(this,arguments)}function Cb(){return(Cb=v(function*(t,e,n,r,i={}){return oj(t,i,v(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=eh(Object.assign({key:t.config.apiKey},s)).slice(1),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return function Poe(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(u.referrerPolicy="no-referrer"),ij.fetch()(sj(t,t.config.apiHost,n,a),u)}))})).apply(this,arguments)}function oj(t,e,n){return Db.apply(this,arguments)}function Db(){return(Db=v(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xae),e);try{const i=new kae(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw uh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw uh(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw uh(t,"email-already-in-use",s);if("USER_DISABLED"===c)throw uh(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Eb(t,d,u);Xn(t,d)}}catch(i){if(i instanceof Yr)throw i;Xn(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Yi(t,e,n,r){return Ab.apply(this,arguments)}function Ab(){return(Ab=v(function*(t,e,n,r,i={}){const o=yield at(t,e,n,r,i);return"mfaPendingCredential"in o&&Xn(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function sj(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?bb(t.config,i):`${t.config.apiScheme}://${i}`}function Oae(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kae{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pr(this.auth,"network-request-failed")),Nae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pr(t,e,r);return i.customData._tokenResponse=n,i}function cj(t){return void 0!==t&&void 0!==t.enterprise}class uj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Oae(n.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function lj(t,e){return Rb.apply(this,arguments)}function Rb(){return(Rb=v(function*(t,e){return at(t,"GET","/v2/recaptchaConfig",st(t,e))})).apply(this,arguments)}function Mb(){return(Mb=v(function*(t,e){return at(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function dj(t,e){return xb.apply(this,arguments)}function xb(){return(xb=v(function*(t,e){return at(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function lh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Nb(){return(Nb=v(function*(t,e=!1){const n=ot(t),r=yield n.getIdToken(e),i=zm(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:lh(Ob(i.auth_time)),issuedAtTime:lh(Ob(i.iat)),expirationTime:lh(Ob(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function Ob(t){return 1e3*Number(t)}function zm(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return qm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Fm(n);return i?JSON.parse(i):(qm("Failed to decode base64 JWT payload"),null)}catch(i){return qm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hj(t){const e=zm(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ji(t,e){return kb.apply(this,arguments)}function kb(){return(kb=v(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Yr&&function jae({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class Bae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(v(function*(){yield n.iteration()}),r)}iteration(){var e=this;return v(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class Fb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lh(this.lastLoginAt),this.creationTime=lh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dh(t){return Vb.apply(this,arguments)}function Vb(){return(Vb=v(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Ji(t,dj(n,{idToken:r}));W(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?fj(o.providerUserInfo):[],a=function Hae(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Fb(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function Lb(){return(Lb=v(function*(t){const e=ot(t);yield dh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function fj(t){return t.map(e=>{var{providerId:n}=e,r=Hm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Ub(){return(Ub=v(function*(t,e){const n=yield oj(t,{},v(function*(){const r=eh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=sj(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ij.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function jb(){return(jb=v(function*(t,e){return at(t,"POST","/v2/accounts:revokeToken",st(t,e))})).apply(this,arguments)}class ru{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(0!==e.length,"internal-error");const n=hj(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){var r=this;return v(function*(){return n||!r.accessToken||r.isExpired?(W(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return v(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Gae(t,e){return Ub.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new ru;return r&&(W("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(W("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(W("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ru,this.toJSON())}_performRefresh(){return bi("not implemented")}}function Wo(t,e){W("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Xi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fb(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return v(function*(){const r=yield Ji(n,n.stsTokenManager.getToken(n.auth,e));return W(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Uae(t){return Nb.apply(this,arguments)}(this,e)}reload(){return function $ae(t){return Lb.apply(this,arguments)}(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return v(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield dh(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return v(function*(){if(Ti(e.auth.app))return Promise.reject(en(e.auth));const n=yield e.getIdToken();return yield Ji(e,function Vae(t,e){return Mb.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,p=null!==(i=n.email)&&void 0!==i?i:void 0,g=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,I=null!==(a=n.tenantId)&&void 0!==a?a:void 0,E=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,A=null!==(u=n.createdAt)&&void 0!==u?u:void 0,D=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:F,emailVerified:$,isAnonymous:J,providerData:X,stsTokenManager:C}=n;W(F&&C,e,"internal-error");const w=ru.fromJSON(this.name,C);W("string"==typeof F,e,"internal-error"),Wo(h,e.name),Wo(p,e.name),W("boolean"==typeof $,e,"internal-error"),W("boolean"==typeof J,e,"internal-error"),Wo(g,e.name),Wo(_,e.name),Wo(I,e.name),Wo(E,e.name),Wo(A,e.name),Wo(D,e.name);const T=new Xi({uid:F,auth:e,email:p,emailVerified:$,displayName:h,isAnonymous:J,photoURL:_,phoneNumber:g,tenantId:I,stsTokenManager:w,createdAt:A,lastLoginAt:D});return X&&Array.isArray(X)&&(T.providerData=X.map(S=>Object.assign({},S))),E&&(T._redirectEventId=E),T}static _fromIdTokenResponse(e,n,r=!1){return v(function*(){const i=new ru;i.updateFromServerResponse(n);const o=new Xi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield dh(o),o})()}static _fromGetAccountInfoResponse(e,n,r){return v(function*(){const i=n.users[0];W(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?fj(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new ru;a.updateFromIdToken(r);const c=new Xi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(c,u),c})()}}const pj=new Map;function Zi(t){zo(t instanceof Function,"Expected a class definition");let e=pj.get(t);return e?(zo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pj.set(t,e),e)}const gj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(function*(){return!0})()}_set(n,r){var i=this;return v(function*(){i.storage[n]=r})()}_get(n){var r=this;return v(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return v(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function Wm(t,e,n){return`firebase:${t}:${e}:${n}`}class iu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Wm(this.userKey,i.apiKey,o),this.fullPersistenceKey=Wm("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return v(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Xi._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return v(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(function*(){if(!n.length)return new iu(Zi(gj),e,r);const i=(yield Promise.all(n.map(function(){var u=v(function*(d){if(yield d._isAvailable())return d});return function(d){return u.apply(this,arguments)}}()))).filter(u=>u);let o=i[0]||Zi(gj);const s=Wm(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=yield u._get(s);if(d){const h=Xi._fromJSON(e,d);u!==o&&(a=h),o=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return o._shouldAllowMigration&&c.length?(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(function(){var u=v(function*(d){if(d!==o)try{yield d._remove(s)}catch{}});return function(d){return u.apply(this,arguments)}}())),new iu(o,e,r)):new iu(o,e,r)})()}}function mj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ij(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_j(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wj(e))return"Blackberry";if(Tj(e))return"Webos";if(yj(e))return"Safari";if((e.includes("chrome/")||vj(e))&&!e.includes("edge/"))return"Chrome";if(Ej(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function _j(t=Rt()){return/firefox\//i.test(t)}function yj(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vj(t=Rt()){return/crios\//i.test(t)}function Ij(t=Rt()){return/iemobile/i.test(t)}function Ej(t=Rt()){return/android/i.test(t)}function wj(t=Rt()){return/blackberry/i.test(t)}function Tj(t=Rt()){return/webos/i.test(t)}function Bb(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bj(t=Rt()){return Bb(t)||Ej(t)||Tj(t)||wj(t)||/windows phone/i.test(t)||Ij(t)}function Cj(t,e=[]){let n;switch(t){case"Browser":n=mj(Rt());break;case"Worker":n=`${mj(Rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tu}/${r}`}class Kae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return v(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function $b(){return($b=v(function*(t,e={}){return at(t,"GET","/v2/passwordPolicy",st(t,e))})).apply(this,arguments)}class Jae{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=null===(n=c.meetsMinPasswordLength)||void 0===n||n),c.isValid&&(c.isValid=null===(r=c.meetsMaxPasswordLength)||void 0===r||r),c.isValid&&(c.isValid=null===(i=c.containsLowercaseLetter)||void 0===i||i),c.isValid&&(c.isValid=null===(o=c.containsUppercaseLetter)||void 0===o||o),c.isValid&&(c.isValid=null===(s=c.containsNumericCharacter)||void 0===s||s),c.isValid&&(c.isValid=null===(a=c.containsNonAlphanumericCharacter)||void 0===a||a),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class Xae{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dj(this),this.idTokenSubscription=new Dj(this),this.beforeStateQueue=new Kae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(v(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield iu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return v(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return v(function*(){try{const r=yield dj(n,{idToken:e}),i=yield Xi._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return v(function*(){var r;if(Ti(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(c,c))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return W(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return v(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return v(function*(){try{yield dh(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Pae(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return v(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return v(function*(){if(Ti(n.app))return Promise.reject(en(n));const r=e?ot(e):null;return r&&W(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return v(function*(){if(!r._deleted)return e&&W(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(v(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return v(function*(){return Ti(e.app)?Promise.reject(en(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return Ti(this.app)?Promise.reject(en(this)):this.queue(v(function*(){yield n.assertedPersistence.setPersistence(Zi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return v(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return v(function*(){const n=yield function Qae(t){return $b.apply(this,arguments)}(e),r=new Jae(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ra("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return v(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function qae(t,e){return jb.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return v(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return v(function*(){if(!n.redirectPersistenceManager){const r=e&&Zi(e)||n._popupRedirectResolver;W(r,n,"argument-error"),n.redirectPersistenceManager=yield iu.create(n,[Zi(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return v(function*(){var r,i;return n._isInitialized&&(yield n.queue(v(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return v(function*(){if(e===n.currentUser)return n.queue(v(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}{const c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){var n=this;return v(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return v(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return v(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function Rae(t,...e){Gm.logLevel<=Se.WARN&&Gm.warn(`Auth (${tu}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Mt(t){return ot(t)}class Dj{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Loe(t,e){const n=new Uoe(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hh={loadJS:()=>v(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hb(t){return hh.loadJS(t)}function Aj(t){return`__${t}${Math.floor(1e6*Math.random())}`}class Sj{constructor(e){this.type="recaptcha-enterprise",this.auth=Mt(e)}verify(e="verify",n=!1){var r=this;return v(function*(){function o(){return o=v(function*(a){if(!n){if(null==a.tenantId&&null!=a._agentRecaptchaConfig)return a._agentRecaptchaConfig.siteKey;if(null!=a.tenantId&&void 0!==a._tenantRecaptchaConfigs[a.tenantId])return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(function(){var c=v(function*(u,d){lj(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(void 0!==h.recaptchaKey){const p=new uj(h);return null==a.tenantId?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,u(p.siteKey)}d(new Error("recaptcha Enterprise site key undefined"))}).catch(h=>{d(h)})});return function(u,d){return c.apply(this,arguments)}}())}),o.apply(this,arguments)}function s(a,c,u){const d=window.grecaptcha;cj(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(h=>{c(h)}).catch(()=>{c("NO_RECAPTCHA")})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,c)=>{(function i(a){return o.apply(this,arguments)})(r.auth).then(u=>{if(!n&&cj(window.grecaptcha))s(u,a,c);else{if(typeof window>"u")return void c(new Error("RecaptchaVerifier is only supported in browser"));let d=function tce(){return hh.recaptchaEnterpriseScript}();0!==d.length&&(d+=u),Hb(d).then(()=>{s(u,a,c)}).catch(h=>{c(h)})}}).catch(u=>{c(u)})})})()}}function Rj(t,e,n){return Gb.apply(this,arguments)}function Gb(){return(Gb=v(function*(t,e,n,r=!1){const i=new Sj(t);let o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}const s=Object.assign({},e);return Object.assign(s,r?{captchaResp:o}:{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})).apply(this,arguments)}function fh(t,e,n,r){return qb.apply(this,arguments)}function qb(){return qb=v(function*(t,e,n,r){var i;if(null!==(i=t._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=yield Rj(t,e,n,"getOobCode"===n);return r(t,o)}return r(t,e).catch(function(){var o=v(function*(s){if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=yield Rj(t,e,n,"getOobCode"===n);return r(t,a)}return Promise.reject(s)});return function(s){return o.apply(this,arguments)}}())}),qb.apply(this,arguments)}function Mj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Pj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class ph{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bi("not implemented")}_getIdTokenResponse(e){return bi("not implemented")}_linkToIdToken(e,n){return bi("not implemented")}_getReauthenticationResolver(e){return bi("not implemented")}}function hce(t,e){return Qb.apply(this,arguments)}function Qb(){return(Qb=v(function*(t,e){return at(t,"POST","/v1/accounts:signUp",e)})).apply(this,arguments)}function pce(t,e){return Jb.apply(this,arguments)}function Jb(){return(Jb=v(function*(t,e){return Yi(t,"POST","/v1/accounts:signInWithPassword",st(t,e))})).apply(this,arguments)}function Km(t,e){return Xb.apply(this,arguments)}function Xb(){return(Xb=v(function*(t,e){return at(t,"POST","/v1/accounts:sendOobCode",st(t,e))})).apply(this,arguments)}function Zb(){return(Zb=v(function*(t,e){return Km(t,e)})).apply(this,arguments)}function mce(t,e){return eC.apply(this,arguments)}function eC(){return(eC=v(function*(t,e){return Km(t,e)})).apply(this,arguments)}function rC(){return(rC=v(function*(t,e){return Yi(t,"POST","/v1/accounts:signInWithEmailLink",st(t,e))})).apply(this,arguments)}function iC(){return(iC=v(function*(t,e){return Yi(t,"POST","/v1/accounts:signInWithEmailLink",st(t,e))})).apply(this,arguments)}class gh extends ph{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new gh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e;if(n?.email&&n?.password){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){var n=this;return v(function*(){switch(n.signInMethod){case"password":return fh(e,{returnSecureToken:!0,email:n._email,password:n._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",pce);case"emailLink":return function vce(t,e){return rC.apply(this,arguments)}(e,{email:n._email,oobCode:n._password});default:Xn(e,"internal-error")}})()}_linkToIdToken(e,n){var r=this;return v(function*(){switch(r.signInMethod){case"password":return fh(e,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hce);case"emailLink":return function Ice(t,e){return iC.apply(this,arguments)}(e,{idToken:n,email:r._email,oobCode:r._password});default:Xn(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function eo(t,e){return oC.apply(this,arguments)}function oC(){return(oC=v(function*(t,e){return Yi(t,"POST","/v1/accounts:signInWithIdp",st(t,e))})).apply(this,arguments)}class yh{constructor(e){var n,r,i,o,s,a;const c=th(nh(e)),u=null!==(n=c.apiKey)&&void 0!==n?n:null,d=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function Ace(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);W(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const n=function Sce(t){const e=th(nh(t)).link,n=e?th(nh(e)).deep_link_id:null,r=th(nh(t)).deep_link_id;return(r?th(nh(r)).link:null)||r||n||e||t}(e);try{return new yh(n)}catch{return null}}}let Nj=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return gh._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){const i=yh.parseLink(r);return W(i,"argument-error"),gh._fromEmailAndCode(n,i.code,i.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class to{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Rce extends to{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function Oj(t,e){return dC.apply(this,arguments)}function dC(){return(dC=v(function*(t,e){return Yi(t,"POST","/v1/accounts:signUp",st(t,e))})).apply(this,arguments)}class xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(function*(){const o=yield Xi._fromIdTokenResponse(e,r,i),s=kj(r);return new xr({user:o,providerId:s,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return v(function*(){yield e._updateTokensIfNecessary(r,!0);const i=kj(r);return new xr({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function kj(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ym extends Yr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ym.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ym(e,n,r,i)}}function Fj(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Ym._fromErrorAndOperation(t,o,e,r):o})}function gC(){return(gC=v(function*(t,e,n=!1){const r=yield Ji(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return xr._forOperation(t,"link",r)})).apply(this,arguments)}function _C(){return(_C=v(function*(t,e,n=!1){const{auth:r}=t;if(Ti(r.app))return Promise.reject(en(r));const i="reauthenticate";try{const o=yield Ji(t,Fj(r,i,e,t),n);W(o.idToken,r,"internal-error");const s=zm(o.idToken);W(s,r,"internal-error");const{sub:a}=s;return W(t.uid===a,r,"user-mismatch"),xr._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Xn(r,"user-mismatch"),o}})).apply(this,arguments)}function Uj(t,e){return yC.apply(this,arguments)}function yC(){return(yC=v(function*(t,e,n=!1){if(Ti(t.app))return Promise.reject(en(t));const r="signIn",i=yield Fj(t,r,e),o=yield xr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}function vC(t,e){return IC.apply(this,arguments)}function IC(){return(IC=v(function*(t,e){return Uj(Mt(t),e)})).apply(this,arguments)}function Xm(t,e,n){var r;W((null===(r=n.url)||void 0===r?void 0:r.length)>0,t,"invalid-continue-uri"),W(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(W(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(W(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function AC(t){return SC.apply(this,arguments)}function SC(){return(SC=v(function*(t){const e=Mt(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})).apply(this,arguments)}function RC(){return(RC=v(function*(t,e,n){const r=Mt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Xm(r,i,n),yield fh(r,i,"getOobCode",mce)})).apply(this,arguments)}function OC(){return(OC=v(function*(t,e,n){if(Ti(t.app))return Promise.reject(en(t));const r=Mt(t),s=yield fh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oj).catch(c=>{throw"auth/password-does-not-meet-requirements"===c.code&&AC(t),c}),a=yield xr._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})).apply(this,arguments)}function UC(){return UC=v(function*(t,e){const n=ot(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&Xm(n.auth,i,e);const{email:o}=yield function gce(t,e){return Zb.apply(this,arguments)}(n.auth,i);o!==t.email&&(yield t.reload())}),UC.apply(this,arguments)}function BC(){return(BC=v(function*(t,e){return at(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function $C(){return $C=v(function*(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=ot(t),o={idToken:yield r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=yield Ji(r,function Bce(t,e){return BC.apply(this,arguments)}(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:c})=>"password"===c);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(s)}),$C.apply(this,arguments)}const Zm="__sak";class $j{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const rue=(()=>{class t extends $j{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bj(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Wae(){return function Noe(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return v(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return v(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return v(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),Hj=(()=>{class t extends $j{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let oue=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return v(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var h=v(function*(p){return p(i.origin,a)});return function(p){return h.apply(this,arguments)}}()),d=yield function iue(t){return Promise.all(t.map(function(){var e=v(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function QC(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class sue{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return v(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((c,u)=>{const d=QC("",20);o.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:d,data:n},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Ut(){return window}function YC(){return typeof Ut().WorkerGlobalScope<"u"&&"function"==typeof Ut().importScripts}function JC(){return(JC=v(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Gj="firebaseLocalStorageDb",e_="firebaseLocalStorage",qj="fbase_key";class Eh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function t_(t,e){return t.transaction([e_],e?"readwrite":"readonly").objectStore(e_)}function XC(){const t=indexedDB.open(Gj,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(e_,{keyPath:qj})}catch(i){n(i)}}),t.addEventListener("success",v(function*(){const r=t.result;r.objectStoreNames.contains(e_)?e(r):(r.close(),yield function hue(){const t=indexedDB.deleteDatabase(Gj);return new Eh(t).toPromise()}(),e(yield XC()))}))})}function zj(t,e,n){return ZC.apply(this,arguments)}function ZC(){return(ZC=v(function*(t,e,n){const r=t_(t,!0).put({[qj]:e,value:n});return new Eh(r).toPromise()})).apply(this,arguments)}function eD(){return(eD=v(function*(t,e){const n=t_(t,!1).get(e),r=yield new Eh(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function Wj(t,e){const n=t_(t,!0).delete(e);return new Eh(n).toPromise()}const mue=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return v(function*(){return n.db||(n.db=yield XC()),n.db})()}_withRetries(n){var r=this;return v(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return v(function*(){return YC()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return v(function*(){n.receiver=oue._getInstance(function lue(){return YC()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=v(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=v(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return v(function*(){var r,i;if(n.activeServiceWorker=yield function cue(){return JC.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new sue(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return v(function*(){if(r.sender&&r.activeServiceWorker&&function uue(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return v(function*(){try{if(!indexedDB)return!1;const n=yield XC();return yield zj(n,Zm,"1"),yield Wj(n,Zm),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return v(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return v(function*(){return i._withPendingWrite(v(function*(){return yield i._withRetries(o=>zj(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return v(function*(){const i=yield r._withRetries(o=>function fue(t,e){return eD.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return v(function*(){return r._withPendingWrite(v(function*(){return yield r._withRetries(i=>Wj(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return v(function*(){const r=yield n._withRetries(s=>{const a=t_(s,!1).getAll();return new Eh(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(v(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();Aj("rcb"),new ch(3e4,6e4);class uD extends ph{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Pue(t){return Uj(t.auth,new uD(t),t.bypassAuthState)}function xue(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),function Lj(t,e){return _C.apply(this,arguments)}(n,new uD(t),t.bypassAuthState)}function Nue(t){return lD.apply(this,arguments)}function lD(){return(lD=v(function*(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),function pC(t,e){return gC.apply(this,arguments)}(n,new uD(t),t.bypassAuthState)})).apply(this,arguments)}class Oue{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=v(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return v(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pue;case"linkViaPopup":case"linkViaRedirect":return Nue;case"reauthViaPopup":case"reauthViaRedirect":return xue;default:Xn(this.auth,"internal-error")}}resolve(e){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new ch(2e3,1e4);const kue="pendingRedirect",wh=new Map;class Fue extends Oue{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return v(function*(){let r=wh.get(n.auth._key());if(!r){try{const o=(yield function Vue(t,e){return gD.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}wh.set(n.auth._key(),r)}return n.bypassAuthState||wh.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return v(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return v(function*(){})()}cleanUp(){}}function gD(){return(gD=v(function*(t,e){const n=function Yj(t){return Wm(kue,t.config.apiKey,t.name)}(e),r=function Qj(t){return Zi(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Lue(t,e){wh.set(t._key(),e)}function Jj(t,e){return wD.apply(this,arguments)}function wD(){return(wD=v(function*(t,e,n=!1){if(Ti(t.app))return Promise.reject(en(t));const r=Mt(t),i=function ca(t,e){return e?Zi(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}(r,e),s=yield new Fue(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Hue{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Gue(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eB(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!eB(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zj(e))}saveEventToCache(e){this.cachedEventUids.add(Zj(e)),this.lastProcessedEventTime=Date.now()}}function Zj(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eB({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function bD(){return(bD=v(function*(t,e={}){return at(t,"GET","/v1/projects",e)})).apply(this,arguments)}const zue=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wue=/^https?/;function CD(){return CD=v(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function que(t){return bD.apply(this,arguments)}(t);for(const n of e)try{if(Que(n))return}catch{}Xn(t,"unauthorized-domain")}),CD.apply(this,arguments)}function Que(t){const e=ah(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Wue.test(n))return!1;if(zue.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Yue=new ch(3e4,6e4);function tB(){const t=Ut().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let r_=null;const Zue=new ch(5e3,15e3),ele="__/auth/iframe",tle="emulator/auth/iframe",nle={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rle=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ile(t){const e=t.config;W(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bb(e,tle):`https://${t.config.authDomain}/${ele}`,r={apiKey:e.apiKey,appName:t.name,v:tu},i=rle.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${eh(r).slice(1)}`}function DD(){return DD=v(function*(t){const e=yield function Xue(t){return r_=r_||function Jue(t){return new Promise((e,n)=>{var r,i,o;function s(){tB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tB(),n(Pr(t,"network-request-failed"))},timeout:Yue.get()})}if(null!==(i=null===(r=Ut().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Ut().gapi)||void 0===o||!o.load){const a=Aj("iframefcb");return Ut()[a]=()=>{gapi.load?s():n(Pr(t,"network-request-failed"))},Hb(`${function nce(){return hh.gapiScript}()}?onload=${a}`).catch(c=>n(c))}s()}}).catch(e=>{throw r_=null,e})}(t),r_}(t),n=Ut().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:ile(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nle,dontclear:!0},r=>new Promise(function(){var i=v(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Pr(t,"network-request-failed"),c=Ut().setTimeout(()=>{s(a)},Zue.get());function u(){Ut().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),DD.apply(this,arguments)}const sle={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fle="__/auth/handler",ple="emulator/auth/handler",gle=encodeURIComponent("fac");function rB(t,e,n,r,i,o){return AD.apply(this,arguments)}function AD(){return(AD=v(function*(t,e,n,r,i,o){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tu,eventId:i};if(e instanceof to){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function Voe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof Rce){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const c=yield t._getAppCheckToken(),u=c?`#${gle}=${encodeURIComponent(c)}`:"";return`${function mle({config:t}){return t.emulator?bb(t,ple):`https://${t.authDomain}/${fle}`}(t)}?${eh(a).slice(1)}${u}`})).apply(this,arguments)}const SD="webStorageSupport",yle=class _le{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hj,this._completeRedirectFn=Jj,this._overrideRedirectResult=Lue}_openPopup(e,n,r,i){var o=this;return v(function*(){var s;zo(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield rB(e,n,r,ah(),i);return function dle(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},sle),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Rt().toLowerCase();n&&(a=vj(u)?"_blank":n),_j(u)&&(e=e||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((p,[g,_])=>`${p}${g}=${_},`,"");if(function zae(t=Rt()){var e;return Bb(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function hle(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new nB(null);const h=window.open(e||"",a,d);W(h,t,"popup-blocked");try{h.focus()}catch{}return new nB(h)}(e,a,QC())})()}_openRedirect(e,n,r,i){var o=this;return v(function*(){return yield o._originValidation(e),function aue(t){Ut().location.href=t}(yield rB(e,n,r,ah(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(zo(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return v(function*(){const r=yield function ole(t){return DD.apply(this,arguments)}(e),i=new Hue(e);return r.register("authEvent",o=>(W(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(SD,{type:SD},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[SD];void 0!==s&&n(!!s),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Kue(t){return CD.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bj()||yj()||Bb()}};var aB="@firebase/auth";class vle{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return v(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Tle=xU("authIdTokenMaxAge")||300;let uB=null;const ble=t=>function(){var e=v(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Tle)return;const o=r?.token;uB!==o&&(uB=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function Ci(t=db()){const e=qo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function sce(t,e){const n=qo(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(ia(n.getOptions(),e??{}))return i;Xn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:yle,persistence:[mue,rue,Hj]}),r=xU("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=ble(o.toString());(function Qce(t,e,n){ot(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Kce(t,e,n,r){ot(t).onIdTokenChanged(e,n,r)}(n,a=>s(a))}}const i=MU("auth");return i&&function cce(t,e,n){const r=Mt(t);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=Mj(e),{host:s,port:a}=function uce(t){const e=Mj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Pj(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:Pj(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function lce(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}(function Zae(t){hh=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Pr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function Cle(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Ele(t){wi(new Jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cj(t)},u=new Xae(r,i,o,c);return function ace(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wi(new Jr("auth-internal",e=>{const n=Mt(e.getProvider("auth").getImmediate());return new vle(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(aB,"1.7.9",function Ile(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),mr(aB,"1.7.9","esm2017")}("Browser");var ua,hB,lB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dB={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,w,T){T||(T=0);var S=Array(16);if("string"==typeof w)for(var R=0;16>R;++R)S[R]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(R=0;16>R;++R)S[R]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;var x=C.g[3],b=(w=C.g[0])+(x^(T=C.g[1])&((R=C.g[2])^x))+S[0]+3614090360&4294967295;b=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=(T=(R=(x=(w=T+(b<<7&4294967295|b>>>25))+((b=x+(R^w&(T^R))+S[1]+3905402710&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(w^T))+S[2]+606105819&4294967295)<<17&4294967295|b>>>15))+((b=T+(w^R&(x^w))+S[3]+3250441966&4294967295)<<22&4294967295|b>>>10))+((b=w+(x^T&(R^x))+S[4]+4118548399&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^w&(T^R))+S[5]+1200080426&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(w^T))+S[6]+2821735955&4294967295)<<17&4294967295|b>>>15))+((b=T+(w^R&(x^w))+S[7]+4249261313&4294967295)<<22&4294967295|b>>>10))+((b=w+(x^T&(R^x))+S[8]+1770035416&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^w&(T^R))+S[9]+2336552879&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(w^T))+S[10]+4294925233&4294967295)<<17&4294967295|b>>>15))+((b=T+(w^R&(x^w))+S[11]+2304563134&4294967295)<<22&4294967295|b>>>10))+((b=w+(x^T&(R^x))+S[12]+1804603682&4294967295)<<7&4294967295|b>>>25))+((b=x+(R^w&(T^R))+S[13]+4254626195&4294967295)<<12&4294967295|b>>>20))+((b=R+(T^x&(w^T))+S[14]+2792965006&4294967295)<<17&4294967295|b>>>15))+((b=T+(w^R&(x^w))+S[15]+1236535329&4294967295)<<22&4294967295|b>>>10))+((b=w+(R^x&(T^R))+S[1]+4129170786&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(w^T))+S[6]+3225465664&4294967295)<<9&4294967295|b>>>23))+((b=R+(w^T&(x^w))+S[11]+643717713&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^w&(R^x))+S[0]+3921069994&4294967295)<<20&4294967295|b>>>12))+((b=w+(R^x&(T^R))+S[5]+3593408605&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(w^T))+S[10]+38016083&4294967295)<<9&4294967295|b>>>23))+((b=R+(w^T&(x^w))+S[15]+3634488961&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^w&(R^x))+S[4]+3889429448&4294967295)<<20&4294967295|b>>>12))+((b=w+(R^x&(T^R))+S[9]+568446438&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(w^T))+S[14]+3275163606&4294967295)<<9&4294967295|b>>>23))+((b=R+(w^T&(x^w))+S[3]+4107603335&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^w&(R^x))+S[8]+1163531501&4294967295)<<20&4294967295|b>>>12))+((b=w+(R^x&(T^R))+S[13]+2850285829&4294967295)<<5&4294967295|b>>>27))+((b=x+(T^R&(w^T))+S[2]+4243563512&4294967295)<<9&4294967295|b>>>23))+((b=R+(w^T&(x^w))+S[7]+1735328473&4294967295)<<14&4294967295|b>>>18))+((b=T+(x^w&(R^x))+S[12]+2368359562&4294967295)<<20&4294967295|b>>>12))+((b=w+(T^R^x)+S[5]+4294588738&4294967295)<<4&4294967295|b>>>28))+((b=x+(w^T^R)+S[8]+2272392833&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^w^T)+S[11]+1839030562&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^w)+S[14]+4259657740&4294967295)<<23&4294967295|b>>>9))+((b=w+(T^R^x)+S[1]+2763975236&4294967295)<<4&4294967295|b>>>28))+((b=x+(w^T^R)+S[4]+1272893353&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^w^T)+S[7]+4139469664&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^w)+S[10]+3200236656&4294967295)<<23&4294967295|b>>>9))+((b=w+(T^R^x)+S[13]+681279174&4294967295)<<4&4294967295|b>>>28))+((b=x+(w^T^R)+S[0]+3936430074&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^w^T)+S[3]+3572445317&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^w)+S[6]+76029189&4294967295)<<23&4294967295|b>>>9))+((b=w+(T^R^x)+S[9]+3654602809&4294967295)<<4&4294967295|b>>>28))+((b=x+(w^T^R)+S[12]+3873151461&4294967295)<<11&4294967295|b>>>21))+((b=R+(x^w^T)+S[15]+530742520&4294967295)<<16&4294967295|b>>>16))+((b=T+(R^x^w)+S[2]+3299628645&4294967295)<<23&4294967295|b>>>9))+((b=w+(R^(T|~x))+S[0]+4096336452&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(w|~R))+S[7]+1126891415&4294967295)<<10&4294967295|b>>>22))+((b=R+(w^(x|~T))+S[14]+2878612391&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~w))+S[5]+4237533241&4294967295)<<21&4294967295|b>>>11))+((b=w+(R^(T|~x))+S[12]+1700485571&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(w|~R))+S[3]+2399980690&4294967295)<<10&4294967295|b>>>22))+((b=R+(w^(x|~T))+S[10]+4293915773&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~w))+S[1]+2240044497&4294967295)<<21&4294967295|b>>>11))+((b=w+(R^(T|~x))+S[8]+1873313359&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(w|~R))+S[15]+4264355552&4294967295)<<10&4294967295|b>>>22))+((b=R+(w^(x|~T))+S[6]+2734768916&4294967295)<<15&4294967295|b>>>17))+((b=T+(x^(R|~w))+S[13]+1309151649&4294967295)<<21&4294967295|b>>>11))+((x=(w=T+((b=w+(R^(T|~x))+S[4]+4149444226&4294967295)<<6&4294967295|b>>>26))+((b=x+(T^(w|~R))+S[11]+3174756917&4294967295)<<10&4294967295|b>>>22))^((R=x+((b=R+(w^(x|~T))+S[2]+718787259&4294967295)<<15&4294967295|b>>>17))|~w))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+x&4294967295}function s(C,w){this.h=w;for(var T=[],S=!0,R=C.length-1;0<=R;R--){var x=0|C[R];S&&x==w||(T[R]=x,S=!1)}this.g=T}(function e(C,w){function T(){}T.prototype=w.prototype,C.D=w.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(S,R,x){for(var b=Array(arguments.length-2),ho=2;ho<arguments.length;ho++)b[ho-2]=arguments[ho];return w.prototype[R].apply(S,b)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,w){void 0===w&&(w=C.length);for(var T=w-this.blockSize,S=this.B,R=this.h,x=0;x<w;){if(0==R)for(;x<=T;)i(this,C,x),x+=this.blockSize;if("string"==typeof C){for(;x<w;)if(S[R++]=C.charCodeAt(x++),R==this.blockSize){i(this,S),R=0;break}}else for(;x<w;)if(S[R++]=C[x++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;var T=8*this.o;for(w=C.length-8;w<C.length;++w)C[w]=255&T,T/=256;for(this.u(C),C=Array(16),w=T=0;4>w;++w)for(var S=0;32>S;S+=8)C[T++]=this.g[w]>>>S&255;return C};var a={};function c(C){return-128<=C&&128>C?function o(C,w){var T=a;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=w(C)}(C,function(w){return new s([0|w],0>w?-1:0)}):new s([0|C],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return E(u(-C));for(var w=[],T=1,S=0;C>=T;S++)w[S]=C/T|0,T*=4294967296;return new s(w,0)}var h=c(0),p=c(1),g=c(16777216);function _(C){if(0!=C.h)return!1;for(var w=0;w<C.g.length;w++)if(0!=C.g[w])return!1;return!0}function I(C){return-1==C.h}function E(C){for(var w=C.g.length,T=[],S=0;S<w;S++)T[S]=~C.g[S];return new s(T,~C.h).add(p)}function A(C,w){return C.add(E(w))}function D(C,w){for(;(65535&C[w])!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function F(C,w){this.g=C,this.h=w}function $(C,w){if(_(w))throw Error("division by zero");if(_(C))return new F(h,h);if(I(C))return w=$(E(C),w),new F(E(w.g),E(w.h));if(I(w))return w=$(C,E(w)),new F(E(w.g),w.h);if(30<C.g.length){if(I(C)||I(w))throw Error("slowDivide_ only works with positive integers.");for(var T=p,S=w;0>=S.l(C);)T=J(T),S=J(S);var R=X(T,1),x=X(S,1);for(S=X(S,2),T=X(T,2);!_(S);){var b=x.add(S);0>=b.l(C)&&(R=R.add(T),x=b),S=X(S,1),T=X(T,1)}return w=A(C,R.j(w)),new F(R,w)}for(R=h;0<=C.l(w);){for(T=Math.max(1,Math.floor(C.m()/w.m())),S=48>=(S=Math.ceil(Math.log(T)/Math.LN2))?1:Math.pow(2,S-48),b=(x=u(T)).j(w);I(b)||0<b.l(C);)b=(x=u(T-=S)).j(w);_(x)&&(x=p),R=R.add(x),C=A(C,b)}return new F(R,C)}function J(C){for(var w=C.g.length+1,T=[],S=0;S<w;S++)T[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(T,C.h)}function X(C,w){var T=w>>5;w%=32;for(var S=C.g.length-T,R=[],x=0;x<S;x++)R[x]=0<w?C.i(x+T)>>>w|C.i(x+T+1)<<32-w:C.i(x+T);return new s(R,C.h)}(t=s.prototype).m=function(){if(I(this))return-E(this).m();for(var C=0,w=1,T=0;T<this.g.length;T++){var S=this.i(T);C+=(0<=S?S:4294967296+S)*w,w*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(I(this))return"-"+E(this).toString(C);for(var w=u(Math.pow(C,6)),T=this,S="";;){var R=$(T,w).g,x=((0<(T=A(T,R.j(w))).g.length?T.g[0]:T.h)>>>0).toString(C);if(_(T=R))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return I(C=A(this,C))?-1:_(C)?0:1},t.abs=function(){return I(this)?E(this):this},t.add=function(C){for(var w=Math.max(this.g.length,C.g.length),T=[],S=0,R=0;R<=w;R++){var x=S+(65535&this.i(R))+(65535&C.i(R)),b=(x>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);S=b>>>16,T[R]=(b&=65535)<<16|(x&=65535)}return new s(T,-2147483648&T[T.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(I(this))return I(C)?E(this).j(E(C)):E(E(this).j(C));if(I(C))return E(this.j(E(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var w=this.g.length+C.g.length,T=[],S=0;S<2*w;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<C.g.length;R++){var x=this.i(S)>>>16,b=65535&this.i(S),ho=C.i(R)>>>16,gf=65535&C.i(R);T[2*S+2*R]+=b*gf,D(T,2*S+2*R),T[2*S+2*R+1]+=x*gf,D(T,2*S+2*R+1),T[2*S+2*R+1]+=b*ho,D(T,2*S+2*R+1),T[2*S+2*R+2]+=x*ho,D(T,2*S+2*R+2)}for(S=0;S<w;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=w;S<2*w;S++)T[S]=0;return new s(T,0)},t.A=function(C){return $(this,C).h},t.and=function(C){for(var w=Math.max(this.g.length,C.g.length),T=[],S=0;S<w;S++)T[S]=this.i(S)&C.i(S);return new s(T,this.h&C.h)},t.or=function(C){for(var w=Math.max(this.g.length,C.g.length),T=[],S=0;S<w;S++)T[S]=this.i(S)|C.i(S);return new s(T,this.h|C.h)},t.xor=function(C){for(var w=Math.max(this.g.length,C.g.length),T=[],S=0;S<w;S++)T[S]=this.i(S)^C.i(S);return new s(T,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hB=dB.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=function d(C,w){if(0==C.length)throw Error("number format error: empty string");if(2>(w=w||10)||36<w)throw Error("radix out of range: "+w);if("-"==C.charAt(0))return E(d(C.substring(1),w));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(w,8)),S=h,R=0;R<C.length;R+=8){var x=Math.min(8,C.length-R),b=parseInt(C.substring(R,R+x),w);8>x?(x=u(Math.pow(w,x)),S=S.j(x).add(u(b))):S=(S=S.j(T)).add(u(b))}return S},ua=dB.Integer=s}).apply(typeof lB<"u"?lB:typeof self<"u"?self:typeof window<"u"?window:{});var fB,Th,pB,s_,MD,gB,mB,_B,o_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},no={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof o_&&o_];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}(this);!function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var M=l[y];if(!(M in m))break e;m=m[M]}(f=f(y=m[l=l[l.length-1]]))!=y&&null!=f&&e(m,l,{configurable:!0,writable:!0,value:f})}}("Array.prototype.values",function(l){return l||function(){return function o(l,f){l instanceof String&&(l+="");var m=0,y=!1,M={next:function(){if(!y&&m<l.length){var O=m++;return{value:f(O,l[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}(this,function(f,m){return m})}});var s=s||{},a=this||self;function c(l){var f=typeof l;return"array"==(f="object"!=f?f:l?Array.isArray(l)?"array":f:"null")||"object"==f&&"number"==typeof l.length}function u(l){var f=typeof l;return"object"==f&&null!=l||"function"==f}function d(l,f,m){return l.call.apply(l.bind,arguments)}function h(l,f,m){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,y),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function p(l,f,m){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function g(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(y,M,O){for(var Q=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)Q[Ye-2]=arguments[Ye];return f.prototype[M].apply(y,Q)}}function I(l){const f=l.length;if(0<f){const m=Array(f);for(let y=0;y<f;y++)m[y]=l[y];return m}return[]}function E(l,f){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(c(y)){const M=l.length||0,O=y.length||0;l.length=M+O;for(let Q=0;Q<O;Q++)l[M+Q]=y[Q]}else l.push(y)}}function D(l){return/^[\s\xa0]*$/.test(l)}function F(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function $(l){return $[" "](l),l}$[" "]=function(){};var J=!(-1==F().indexOf("Gecko")||-1!=F().toLowerCase().indexOf("webkit")&&-1==F().indexOf("Edge")||-1!=F().indexOf("Trident")||-1!=F().indexOf("MSIE")||-1!=F().indexOf("Edge"));function X(l,f,m){for(const y in l)f.call(m,l[y],y,l)}function w(l){const f={};for(const m in l)f[m]=l[m];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,f){let m,y;for(let M=1;M<arguments.length;M++){for(m in y=arguments[M],y)l[m]=y[m];for(let O=0;O<T.length;O++)m=T[O],Object.prototype.hasOwnProperty.call(y,m)&&(l[m]=y[m])}}function R(l){var f=1;l=l.split(":");const m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=KS;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}var gf=new class A{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}(()=>new f_e,l=>l.reset());class f_e{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let mf,_f=!1,KS=new class ho{constructor(){this.h=this.g=null}add(f,m){const y=gf.get();y.set(f,m),this.h?this.h.next=y:this.g=y,this.h=y}},OG=()=>{const l=a.Promise.resolve(void 0);mf=()=>{l.then(p_e)}};var p_e=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(m){x(m)}var f=gf;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}_f=!1};function hs(){this.s=this.s,this.C=this.C}function Sn(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}hs.prototype.s=!1,hs.prototype.ma=function(){this.s||(this.s=!0,this.N())},hs.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Sn.prototype.h=function(){this.defaultPrevented=!0};var g_e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l}();function yf(l,f){if(Sn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(J){e:{try{$(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else"mouseover"==m?f=l.fromElement:"mouseout"==m&&(f=l.toElement);this.relatedTarget=f,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:m_e[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&yf.aa.h.call(this)}}_(yf,Sn);var m_e={2:"touch",3:"pen",4:"mouse"};yf.prototype.h=function(){yf.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var vf="closure_listenable_"+(1e6*Math.random()|0),__e=0;function y_e(l,f,m,y,M){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!y,this.ha=M,this.key=++__e,this.da=this.fa=!1}function fy(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function py(l){this.src=l,this.g={},this.h=0}function QS(l,f){var m=f.type;if(m in l.g){var O,y=l.g[m],M=Array.prototype.indexOf.call(y,f,void 0);(O=0<=M)&&Array.prototype.splice.call(y,M,1),O&&(fy(f),0==l.g[m].length&&(delete l.g[m],l.h--))}}function YS(l,f,m,y){for(var M=0;M<l.length;++M){var O=l[M];if(!O.da&&O.listener==f&&O.capture==!!m&&O.ha==y)return M}return-1}py.prototype.add=function(l,f,m,y,M){var O=l.toString();(l=this.g[O])||(l=this.g[O]=[],this.h++);var Q=YS(l,f,y,M);return-1<Q?(f=l[Q],m||(f.fa=!1)):((f=new y_e(f,this.src,O,!!y,M)).fa=m,l.push(f)),f};var JS="closure_lm_"+(1e6*Math.random()|0),XS={};function kG(l,f,m,y,M){if(y&&y.once)return VG(l,f,m,y,M);if(Array.isArray(f)){for(var O=0;O<f.length;O++)kG(l,f[O],m,y,M);return null}return m=nR(m),l&&l[vf]?l.K(f,m,u(y)?!!y.capture:!!y,M):FG(l,f,m,!1,y,M)}function FG(l,f,m,y,M,O){if(!f)throw Error("Invalid event type");var Q=u(M)?!!M.capture:!!M,Ye=eR(l);if(Ye||(l[JS]=Ye=new py(l)),(m=Ye.add(f,m,y,Q,O)).proxy)return m;if(y=function v_e(){const f=I_e;return function l(m){return f.call(l.src,l.listener,m)}}(),m.proxy=y,y.src=l,y.listener=m,l.addEventListener)g_e||(M=Q),void 0===M&&(M=!1),l.addEventListener(f.toString(),y,M);else if(l.attachEvent)l.attachEvent(UG(f.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return m}function VG(l,f,m,y,M){if(Array.isArray(f)){for(var O=0;O<f.length;O++)VG(l,f[O],m,y,M);return null}return m=nR(m),l&&l[vf]?l.L(f,m,u(y)?!!y.capture:!!y,M):FG(l,f,m,!0,y,M)}function LG(l,f,m,y,M){if(Array.isArray(f))for(var O=0;O<f.length;O++)LG(l,f[O],m,y,M);else y=u(y)?!!y.capture:!!y,m=nR(m),l&&l[vf]?(l=l.i,(f=String(f).toString())in l.g&&-1<(m=YS(O=l.g[f],m,y,M))&&(fy(O[m]),Array.prototype.splice.call(O,m,1),0==O.length&&(delete l.g[f],l.h--))):l&&(l=eR(l))&&(f=l.g[f.toString()],l=-1,f&&(l=YS(f,m,y,M)),(m=-1<l?f[l]:null)&&ZS(m))}function ZS(l){if("number"!=typeof l&&l&&!l.da){var f=l.src;if(f&&f[vf])QS(f.i,l);else{var m=l.type,y=l.proxy;f.removeEventListener?f.removeEventListener(m,y,l.capture):f.detachEvent?f.detachEvent(UG(m),y):f.addListener&&f.removeListener&&f.removeListener(y),(m=eR(f))?(QS(m,l),0==m.h&&(m.src=null,f[JS]=null)):fy(l)}}}function UG(l){return l in XS?XS[l]:XS[l]="on"+l}function I_e(l,f){if(l.da)l=!0;else{f=new yf(f,this);var m=l.listener,y=l.ha||l.src;l.fa&&ZS(l),l=m.call(y,f)}return l}function eR(l){return(l=l[JS])instanceof py?l:null}var tR="__closure_events_fn_"+(1e9*Math.random()>>>0);function nR(l){return"function"==typeof l?l:(l[tR]||(l[tR]=function(f){return l.handleEvent(f)}),l[tR])}function Rn(){hs.call(this),this.i=new py(this),this.M=this,this.F=null}function jn(l,f){var m,y=l.F;if(y)for(m=[];y;y=y.F)m.push(y);if(l=l.M,y=f.type||f,"string"==typeof f)f=new Sn(f,l);else if(f instanceof Sn)f.target=f.target||l;else{var M=f;S(f=new Sn(y,l),M)}if(M=!0,m)for(var O=m.length-1;0<=O;O--){var Q=f.g=m[O];M=gy(Q,y,!0,f)&&M}if(M=gy(Q=f.g=l,y,!0,f)&&M,M=gy(Q,y,!1,f)&&M,m)for(O=0;O<m.length;O++)M=gy(Q=f.g=m[O],y,!1,f)&&M}function gy(l,f,m,y){if(!(f=l.i.g[String(f)]))return!0;f=f.concat();for(var M=!0,O=0;O<f.length;++O){var Q=f[O];if(Q&&!Q.da&&Q.capture==m){var Ye=Q.listener,gn=Q.ha||Q.src;Q.fa&&QS(l.i,Q),M=!1!==Ye.call(gn,y)&&M}}return M&&!y.defaultPrevented}function jG(l,f,m){if("function"==typeof l)m&&(l=p(l,m));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=p(l.handleEvent,l)}return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function BG(l){l.g=jG(()=>{l.g=null,l.i&&(l.i=!1,BG(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}_(Rn,hs),Rn.prototype[vf]=!0,Rn.prototype.removeEventListener=function(l,f,m,y){LG(this,l,f,m,y)},Rn.prototype.N=function(){if(Rn.aa.N.call(this),this.i){var f,l=this.i;for(f in l.g){for(var m=l.g[f],y=0;y<m.length;y++)fy(m[y]);delete l.g[f],l.h--}}this.F=null},Rn.prototype.K=function(l,f,m,y){return this.i.add(String(l),f,!1,m,y)},Rn.prototype.L=function(l,f,m,y){return this.i.add(String(l),f,!0,m,y)};class E_e extends hs{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:BG(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function If(l){hs.call(this),this.h=l,this.g={}}_(If,hs);var $G=[];function HG(l){X(l.g,function(f,m){this.g.hasOwnProperty(m)&&ZS(f)},l),l.g={}}If.prototype.N=function(){If.aa.N.call(this),HG(this)},If.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rR=a.JSON.stringify,w_e=a.JSON.parse,T_e=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function iR(){}function qG(){}iR.prototype.h=null;var Ef={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oR(){Sn.call(this,"d")}function sR(){Sn.call(this,"c")}_(oR,Sn),_(sR,Sn);var xa={},zG=null;function my(){return zG=zG||new Rn}function WG(l){Sn.call(this,xa.La,l)}function wf(l){const f=my();jn(f,new WG(f))}function KG(l,f){Sn.call(this,xa.STAT_EVENT,l),this.stat=f}function Bn(l){const f=my();jn(f,new KG(f,l))}function QG(l,f){Sn.call(this,xa.Ma,l),this.size=f}function Tf(l,f){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function bf(){this.g=!0}function Qu(l,f,m,y){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+function A_e(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m)for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var y=m[l];if(!(2>y.length)){var M=y[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if("noop"!=O&&"stop"!=O&&"close"!=O)for(var Q=1;Q<M.length;Q++)M[Q]=""}}}return rR(m)}catch{return f}}(l,m)+(y?" "+y:"")})}xa.La="serverreachability",_(WG,Sn),xa.STAT_EVENT="statevent",_(KG,Sn),xa.Ma="timingevent",_(QG,Sn),bf.prototype.xa=function(){this.g=!1},bf.prototype.info=function(){};var aR,_y={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},YG={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function yy(){}function fs(l,f,m,y){this.j=l,this.i=f,this.l=m,this.R=y||1,this.U=new If(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new JG}function JG(){this.i=null,this.g="",this.h=!1}_(yy,iR),yy.prototype.g=function(){return new XMLHttpRequest},yy.prototype.i=function(){return{}},aR=new yy;var XG={},cR={};function uR(l,f,m){l.L=1,l.v=wy(fo(f)),l.m=m,l.P=!0,ZG(l,null)}function ZG(l,f){l.F=Date.now(),vy(l),l.A=fo(l.v);var m=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),fq(m.i,"t",y),l.C=0,m=l.j.J,l.h=new JG,l.g=Pq(l.j,m?f:null,!l.m),0<l.O&&(l.M=new E_e(p(l.Y,l,l.g),l.O)),f=l.U,m=l.g,y=l.ca;var M="readystatechange";Array.isArray(M)||(M&&($G[0]=M.toString()),M=$G);for(var O=0;O<M.length;O++){var Q=kG(m,M[O],y||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),wf(),function b_e(l,f,m,y,M,O){l.info(function(){if(l.g)if(O)for(var Q="",Ye=O.split("&"),gn=0;gn<Ye.length;gn++){var Fe=Ye[gn].split("=");if(1<Fe.length){var Mn=Fe[0];Fe=Fe[1];var Pn=Mn.split("_");Q=2<=Pn.length&&"type"==Pn[1]?Q+(Mn+"=")+Fe+"&":Q+(Mn+"=redacted&")}}else Q=null;else Q=O;return"XMLHTTP REQ ("+y+") [attempt "+M+"]: "+f+"\n"+m+"\n"+Q})}(l.i,l.u,l.A,l.l,l.R,l.m)}function eq(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function S_e(l,f){var m=l.C,y=f.indexOf("\n",m);return-1==y?cR:(m=Number(f.substring(m,y)),isNaN(m)?XG:(y+=1)+m>f.length?cR:(f=f.slice(y,y+m),l.C=y+m,f))}function vy(l){l.S=Date.now()+l.I,tq(l,l.I)}function tq(l,f){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Tf(p(l.ba,l),f)}function lR(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function Cf(l){0==l.j.G||l.J||Aq(l.j,l)}function Na(l){lR(l);var f=l.M;f&&"function"==typeof f.ma&&f.ma(),l.M=null,HG(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function dR(l,f){try{var m=l.j;if(0!=m.G&&(m.g==l||hR(m.h,l)))if(!l.K&&hR(m.h,l)&&3==m.G){try{var y=m.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&3==y.length){var M=y;if(0==M[0]){e:if(!m.u){if(m.g){if(!(m.g.F+3e3<l.F))break e;Ay(m),Cy(m)}mR(m),Bn(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&0==m.v&&!m.C&&(m.C=Tf(p(m.Za,m),6e3));if(1>=iq(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ka(m,11)}else if((l.K||m.g==l)&&Ay(m),!D(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let Fe=M[f];if(m.T=Fe[0],Fe=Fe[1],2==m.G)if("c"==Fe[0]){m.K=Fe[1],m.ia=Fe[2];const Mn=Fe[3];null!=Mn&&(m.la=Mn,m.j.info("VER="+m.la));const Pn=Fe[4];null!=Pn&&(m.Aa=Pn,m.j.info("SVER="+m.Aa));const Xu=Fe[5];null!=Xu&&"number"==typeof Xu&&0<Xu&&(m.L=y=1.5*Xu,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const ei=l.g;if(ei){const Ry=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ry){var O=y.h;O.g||-1==Ry.indexOf("spdy")&&-1==Ry.indexOf("quic")&&-1==Ry.indexOf("h2")||(O.j=O.l,O.g=new Set,O.h&&(fR(O,O.h),O.h=null))}if(y.D){const yR=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;yR&&(y.ya=yR,lt(y.I,y.D,yR))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms"));var Q=l;if((y=m).qa=Mq(y,y.J?y.ia:null,y.W),Q.K){oq(y.h,Q);var Ye=Q,gn=y.L;gn&&(Ye.I=gn),Ye.B&&(lR(Ye),vy(Ye)),y.g=Q}else Cq(y);0<m.i.length&&Dy(m)}else"stop"!=Fe[0]&&"close"!=Fe[0]||ka(m,7);else 3==m.G&&("stop"==Fe[0]||"close"==Fe[0]?"stop"==Fe[0]?ka(m,7):gR(m):"noop"!=Fe[0]&&m.l&&m.l.ta(Fe),m.v=0)}wf()}catch{}}fs.prototype.ca=function(l){l=l.target;const f=this.M;f&&3==po(l)?f.j():this.Y(l)},fs.prototype.Y=function(l){try{if(l==this.g)e:{const Pn=po(this.g);var f=this.g.Ba();if(this.g.Z(),!(3>Pn)&&(3!=Pn||this.g&&(this.h.h||this.g.oa()||Iq(this.g)))){this.J||4!=Pn||7==f||wf(),lR(this);var m=this.g.Z();this.X=m;t:if(eq(this)){var y=Iq(this.g);l="";var M=y.length,O=4==po(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Na(this),Cf(this);var Q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(y[f],{stream:!(O&&f==M-1)});y.length=0,this.h.g+=l,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=200==m,function C_e(l,f,m,y,M,O,Q){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+M+"]: "+f+"\n"+m+"\n"+O+" "+Q})}(this.i,this.u,this.A,this.l,this.R,Pn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,gn=this.g;if((Ye=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Ye)){var Fe=Ye;break t}}Fe=null}if(!(m=Fe)){this.o=!1,this.s=3,Bn(12),Na(this),Cf(this);break e}Qu(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dR(this,m)}if(this.P){let ei;for(m=!0;!this.J&&this.C<Q.length;){if(ei=S_e(this,Q),ei==cR){4==Pn&&(this.s=4,Bn(14),m=!1),Qu(this.i,this.l,null,"[Incomplete Response]");break}if(ei==XG){this.s=4,Bn(15),Qu(this.i,this.l,Q,"[Invalid Chunk]"),m=!1;break}Qu(this.i,this.l,ei,null),dR(this,ei)}if(eq(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Pn||0!=Q.length||this.h.h||(this.s=1,Bn(16),m=!1),this.o=this.o&&m,m){if(0<Q.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),_R(Mn),Mn.M=!0,Bn(11))}}else Qu(this.i,this.l,Q,"[Invalid Chunked Response]"),Na(this),Cf(this)}else Qu(this.i,this.l,Q,null),dR(this,Q);4==Pn&&Na(this),this.o&&!this.J&&(4==Pn?Aq(this.j,this):(this.o=!1,vy(this)))}else(function q_e(l){const f={};l=(l.g&&2<=po(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(D(l[y]))continue;var m=R(l[y]);const M=m[0];if("string"!=typeof(m=m[1]))continue;m=m.trim();const O=f[M]||[];f[M]=O,O.push(m)}!function C(l,f){for(const m in l)f.call(void 0,l[m],m,l)}(f,function(y){return y.join(", ")})})(this.g),400==m&&0<Q.indexOf("Unknown SID")?(this.s=3,Bn(12)):(this.s=0,Bn(13)),Na(this),Cf(this)}}}catch{}},fs.prototype.cancel=function(){this.J=!0,Na(this)},fs.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function D_e(l,f){l.info(function(){return"TIMEOUT: "+f})}(this.i,this.A),2!=this.L&&(wf(),Bn(17)),Na(this),this.s=2,Cf(this)):tq(this,this.S-l)};var R_e=class{constructor(l,f){this.g=l,this.map=f}};function nq(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rq(l){return!!l.h||!!l.g&&l.g.size>=l.j}function iq(l){return l.h?1:l.g?l.g.size:0}function hR(l,f){return l.h?l.h==f:!!l.g&&l.g.has(f)}function fR(l,f){l.g?l.g.add(f):l.h=f}function oq(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}function sq(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let f=l.i;for(const m of l.g.values())f=f.concat(m.D);return f}return I(l.i)}function aq(l,f){if(l.forEach&&"function"==typeof l.forEach)l.forEach(f,void 0);else if(c(l)||"string"==typeof l)Array.prototype.forEach.call(l,f,void 0);else for(var m=function P_e(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||"string"==typeof l){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(const y in l)f[m++]=y;return f}}}(l),y=function M_e(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(c(l)){for(var f=[],m=l.length,y=0;y<m;y++)f.push(l[y]);return f}for(y in f=[],m=0,l)f[m++]=l[y];return f}(l),M=y.length,O=0;O<M;O++)f.call(void 0,y[O],m&&m[O],l)}nq.prototype.cancel=function(){if(this.i=sq(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var cq=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Oa){this.h=l.h,Iy(this,l.j),this.o=l.o,this.g=l.g,Ey(this,l.s),this.l=l.l;var f=l.i,m=new Sf;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),uq(this,m),this.m=l.m}else l&&(f=String(l).match(cq))?(this.h=!1,Iy(this,f[1]||"",!0),this.o=Df(f[2]||""),this.g=Df(f[3]||"",!0),Ey(this,f[4]),this.l=Df(f[5]||"",!0),uq(this,f[6]||"",!0),this.m=Df(f[7]||"")):(this.h=!1,this.i=new Sf(null,this.h))}function fo(l){return new Oa(l)}function Iy(l,f,m){l.j=m?Df(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Ey(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function uq(l,f,m){f instanceof Sf?(l.i=f,function L_e(l,f){f&&!l.j&&(ps(l),l.i=null,l.g.forEach(function(m,y){var M=y.toLowerCase();y!=M&&(dq(this,y),fq(this,M,m))},l)),l.j=f}(l.i,l.h)):(m||(f=Af(f,F_e)),l.i=new Sf(f,l.h))}function lt(l,f,m){l.i.set(f,m)}function wy(l){return lt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Df(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Af(l,f,m){return"string"==typeof l?(l=encodeURI(l).replace(f,N_e),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function N_e(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}Oa.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Af(f,lq,!0),":");var m=this.g;return(m||"file"==f)&&(l.push("//"),(f=this.o)&&l.push(Af(f,lq,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(m=this.s)&&l.push(":",String(m))),(m=this.l)&&(this.g&&"/"!=m.charAt(0)&&l.push("/"),l.push(Af(m,"/"==m.charAt(0)?k_e:O_e,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Af(m,V_e)),l.join("")};var lq=/[#\/\?@]/g,O_e=/[#\?:]/g,k_e=/[#\?]/g,F_e=/[#\?@]/g,V_e=/#/g;function Sf(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function ps(l){l.g||(l.g=new Map,l.h=0,l.i&&function x_e(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var y=l[m].indexOf("="),M=null;if(0<=y){var O=l[m].substring(0,y);M=l[m].substring(y+1)}else O=l[m];f(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}function dq(l,f){ps(l),f=Yu(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function hq(l,f){return ps(l),f=Yu(l,f),l.g.has(f)}function fq(l,f,m){dq(l,f),0<m.length&&(l.i=null,l.g.set(Yu(l,f),I(m)),l.h+=m.length)}function Yu(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function gs(l,f,m,y,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),y(m)}catch{}}function B_e(){this.g=new T_e}function $_e(l,f,m){const y=m||"";try{aq(l,function(M,O){let Q=M;u(M)&&(Q=rR(M)),f.push(y+O+"="+encodeURIComponent(Q))})}catch(M){throw f.push(y+"type="+encodeURIComponent("_badmap")),M}}function Rf(l){this.l=l.Ub||null,this.j=l.eb||!1}function Ty(l,f){Rn.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function pq(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function Mf(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pf(l)}function Pf(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function gq(l){let f="";return X(l,function(m,y){f+=y,f+=":",f+=m,f+="\r\n"}),f}function pR(l,f,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=gq(m),"string"==typeof l?null!=m&&encodeURIComponent(String(m)):lt(l,f,m))}function Tt(l){Rn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=Sf.prototype).add=function(l,f){ps(this),this.i=null,l=Yu(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this},t.forEach=function(l,f){ps(this),this.g.forEach(function(m,y){m.forEach(function(M){l.call(f,M,y,this)},this)},this)},t.na=function(){ps(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let y=0;y<f.length;y++){const M=l[y];for(let O=0;O<M.length;O++)m.push(f[y])}return m},t.V=function(l){ps(this);let f=[];if("string"==typeof l)hq(this,l)&&(f=f.concat(this.g.get(Yu(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},t.set=function(l,f){return ps(this),this.i=null,hq(this,l=Yu(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l&&0<(l=this.V(l)).length?String(l[0]):f},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var y=f[m];const O=encodeURIComponent(String(y)),Q=this.V(y);for(y=0;y<Q.length;y++){var M=O;""!==Q[y]&&(M+="="+encodeURIComponent(String(Q[y]))),l.push(M)}}return this.i=l.join("&")},_(Rf,iR),Rf.prototype.g=function(){return new Ty(this.l,this.j)},Rf.prototype.i=function(l){return function(){return l}}({}),_(Ty,Rn),(t=Ty.prototype).open=function(l,f){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Pf(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mf(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pf(this)),this.g&&(this.readyState=3,Pf(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pq(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Mf(this):Pf(this),3==this.readyState&&pq(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Mf(this))},t.Qa=function(l){this.g&&(this.response=l,Mf(this))},t.ga=function(){this.g&&Mf(this)},t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var m=f.next();!m.done;)l.push((m=m.value)[0]+": "+m[1]),m=f.next();return l.join("\r\n")},Object.defineProperty(Ty.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(Tt,Rn);var H_e=/^https?$/i,G_e=["POST","PUT"];function mq(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,_q(l),by(l)}function _q(l){l.A||(l.A=!0,jn(l,"complete"),jn(l,"error"))}function yq(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=po(l)||2!=l.Z()))if(l.u&&4==po(l))jG(l.Ea,0,l);else if(jn(l,"readystatechange"),4==po(l)){l.h=!1;try{const Q=l.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var y;if(y=0===Q){var M=String(l.D).match(cq)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),y=!H_e.test(M?M.toLowerCase():"")}m=y}if(m)jn(l,"complete"),jn(l,"success");else{l.m=6;try{var O=2<po(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",_q(l)}}finally{by(l)}}}function by(l,f){if(l.g){vq(l);const m=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||jn(l,"ready");try{m.onreadystatechange=y}catch{}}}function vq(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function po(l){return l.g?l.g.readyState:0}function Iq(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function xf(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function Eq(l){this.Aa=0,this.i=[],this.j=new bf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xf("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xf("baseRetryDelayMs",5e3,l),this.cb=xf("retryDelaySeedMs",1e4,l),this.Wa=xf("forwardChannelMaxRetries",2,l),this.wa=xf("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new nq(l&&l.concurrentRequestLimit),this.Da=new B_e,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function gR(l){if(wq(l),3==l.G){var f=l.U++,m=fo(l.I);if(lt(m,"SID",l.K),lt(m,"RID",f),lt(m,"TYPE","terminate"),Nf(l,m),(f=new fs(l,l.j,f)).L=2,f.v=wy(fo(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&((new Image).src=f.v,m=!0),m||(f.g=Pq(f.j,null),f.g.ea(f.v)),f.F=Date.now(),vy(f)}Rq(l)}function Cy(l){l.g&&(_R(l),l.g.cancel(),l.g=null)}function wq(l){Cy(l),l.u&&(a.clearTimeout(l.u),l.u=null),Ay(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function Dy(l){if(!rq(l.h)&&!l.s){l.s=!0;var f=l.Ga;mf||OG(),_f||(mf(),_f=!0),KS.add(f,l),l.B=0}}function Tq(l,f){var m;m=f?f.l:l.U++;const y=fo(l.I);lt(y,"SID",l.K),lt(y,"RID",m),lt(y,"AID",l.T),Nf(l,y),l.m&&l.o&&pR(y,l.m,l.o),m=new fs(l,l.j,m,l.B+1),null===l.m&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=bq(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),fR(l.h,m),uR(m,y,f)}function Nf(l,f){l.H&&X(l.H,function(m,y){lt(f,y,m)}),l.l&&aq({},function(m,y){lt(f,y,m)})}function bq(l,f,m){m=Math.min(l.i.length,m);var y=l.l?p(l.l.Na,l.l,l):null;e:{var M=l.i;let O=-1;for(;;){const Q=["count="+m];-1==O?0<m?(O=M[0].g,Q.push("ofs="+O)):O=0:Q.push("ofs="+O);let Ye=!0;for(let gn=0;gn<m;gn++){let Fe=M[gn].g;const Mn=M[gn].map;if(Fe-=O,0>Fe)O=Math.max(0,M[gn].g-100),Ye=!1;else try{$_e(Mn,Q,"req"+Fe+"_")}catch{y&&y(Mn)}}if(Ye){y=Q.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,y}function Cq(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;mf||OG(),_f||(mf(),_f=!0),KS.add(f,l),l.v=0}}function mR(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=Tf(p(l.Fa,l),Sq(l,l.v)),l.v++,0))}function _R(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function Dq(l){l.g=new fs(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var f=fo(l.qa);lt(f,"RID","rpc"),lt(f,"SID",l.K),lt(f,"AID",l.T),lt(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&lt(f,"TO",l.ja),lt(f,"TYPE","xmlhttp"),Nf(l,f),l.m&&l.o&&pR(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=wy(fo(f)),m.m=null,m.P=!0,ZG(m,l)}function Ay(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function Aq(l,f){var m=null;if(l.g==f){Ay(l),_R(l),l.g=null;var y=2}else{if(!hR(l.h,f))return;m=f.D,oq(l.h,f),y=1}if(0!=l.G)if(f.o)if(1==y){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;jn(y=my(),new QG(y,m)),Dy(l)}else Cq(l);else if(3==(M=f.s)||0==M&&0<f.X||!(1==y&&function z_e(l,f){return!(iq(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=f.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=Tf(p(l.Ga,l,f),Sq(l,l.B)),l.B++,0)))}(l,f)||2==y&&mR(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),M){case 1:ka(l,5);break;case 4:ka(l,10);break;case 3:ka(l,6);break;default:ka(l,2)}}function Sq(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function ka(l,f){if(l.j.info("Error code "+f),2==f){var m=p(l.fb,l),y=l.Xa;const M=!y;y=new Oa(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Iy(y,"https"),wy(y),M?function U_e(l,f){const m=new bf;if(a.Image){const y=new Image;y.onload=g(gs,m,"TestLoadImage: loaded",!0,f,y),y.onerror=g(gs,m,"TestLoadImage: error",!1,f,y),y.onabort=g(gs,m,"TestLoadImage: abort",!1,f,y),y.ontimeout=g(gs,m,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else f(!1)}(y.toString(),m):function j_e(l,f){new bf;const y=new AbortController,M=setTimeout(()=>{y.abort(),gs(0,0,!1,f)},1e4);fetch(l,{signal:y.signal}).then(O=>{clearTimeout(M),gs(0,0,!!O.ok,f)}).catch(()=>{clearTimeout(M),gs(0,0,!1,f)})}(y.toString(),m)}else Bn(2);l.G=0,l.l&&l.l.sa(f),Rq(l),wq(l)}function Rq(l){if(l.G=0,l.ka=[],l.l){const f=sq(l.h);(0!=f.length||0!=l.i.length)&&(E(l.ka,f),E(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function Mq(l,f,m){var y=m instanceof Oa?fo(m):new Oa(m);if(""!=y.g)f&&(y.g=f+"."+y.g),Ey(y,y.s);else{var M=a.location;y=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var O=new Oa(null);y&&Iy(O,y),f&&(O.g=f),M&&Ey(O,M),m&&(O.l=m),y=O}return f=l.ya,(m=l.D)&&f&&lt(y,m,f),lt(y,"VER",l.la),Nf(l,y),y}function Pq(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(f=new Tt(l.Ca&&!l.pa?new Rf({eb:m}):l.pa)).Ha(l.J),f}function xq(){}function Sy(){}function vr(l,f){Rn.call(this),this.g=new Eq(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!D(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!D(f)&&(this.g.D=f,null!==(l=this.h)&&f in l&&f in(l=this.h)&&delete l[f]),this.j=new Ju(this)}function Nq(l){oR.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=null!==f&&l in f?f[l]:void 0),this.data=f}else this.data=l}function Oq(){sR.call(this),this.status=1}function Ju(l){this.g=l}(t=Tt.prototype).Ha=function(l){this.J=l},t.ea=function(l,f,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():aR.g(),this.v=function GG(l){return l.h||(l.h=l.i())}(this.o?this.o:aR),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(O){return void mq(this,O)}if(l=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var M in y)m.set(M,y[M]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const O of y.keys())m.set(O,y.get(O))}y=Array.from(m.keys()).find(O=>"content-type"==O.toLowerCase()),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(G_e,f,void 0))||y||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,Q]of m)this.g.setRequestHeader(O,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vq(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){mq(this,O)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,jn(this,"complete"),jn(this,"abort"),by(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),by(this,!0)),Tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yq(this):this.bb())},t.bb=function(){yq(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<po(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&0==f.indexOf(l)&&(f=f.substring(l.length)),w_e(f)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=Eq.prototype).la=8,t.G=1,t.connect=function(l,f,m,y){Bn(0),this.W=l,this.H=f||{},m&&void 0!==y&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Mq(this,null,this.W),Dy(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new fs(this,this.j,l);let O=this.o;if(this.S&&(O?(O=w(O),S(O,this.S)):O=this.S),null!==this.m||this.O||(M.H=O,O=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){var y=this.i[m];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(f+=y)){f=m;break e}if(4096===f||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=bq(this,M,f),lt(m=fo(this.I),"RID",l),lt(m,"CVER",22),this.D&&lt(m,"X-HTTP-Session-Id",this.D),Nf(this,m),O&&(this.O?f="headers="+encodeURIComponent(String(gq(O)))+"&"+f:this.m&&pR(m,this.m,O)),fR(this.h,M),this.Ua&&lt(m,"TYPE","init"),this.P?(lt(m,"$req",f),lt(m,"SID","null"),M.T=!0,uR(M,m,null)):uR(M,m,f),this.G=2}}else 3==this.G&&(l?Tq(this,l):0==this.i.length||rq(this.h)||Tq(this))},t.Fa=function(){if(this.u=null,Dq(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tf(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bn(10),Cy(this),Dq(this))},t.Za=function(){null!=this.C&&(this.C=null,Cy(this),mR(this),Bn(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Bn(2)):(this.j.info("Failed to ping google.com"),Bn(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=xq.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Sy.prototype.g=function(l,f){return new vr(l,f)},_(vr,Rn),vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vr.prototype.close=function(){gR(this.g)},vr.prototype.o=function(l){var f=this.g;if("string"==typeof l){var m={};m.__data__=l,l=m}else this.u&&((m={}).__data__=rR(l),l=m);f.i.push(new R_e(f.Ya++,l)),3==f.G&&Dy(f)},vr.prototype.N=function(){this.g.l=null,delete this.j,gR(this.g),delete this.g,vr.aa.N.call(this)},_(Nq,oR),_(Oq,sR),_(Ju,xq),Ju.prototype.ua=function(){jn(this.g,"a")},Ju.prototype.ta=function(l){jn(this.g,new Nq(l))},Ju.prototype.sa=function(l){jn(this.g,new Oq)},Ju.prototype.ra=function(){jn(this.g,"b")},Sy.prototype.createWebChannel=Sy.prototype.g,vr.prototype.send=vr.prototype.o,vr.prototype.open=vr.prototype.m,vr.prototype.close=vr.prototype.close,_B=no.createWebChannelTransport=function(){return new Sy},mB=no.getStatEventTarget=function(){return my()},gB=no.Event=xa,MD=no.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_y.NO_ERROR=0,_y.TIMEOUT=8,_y.HTTP_ERROR=6,s_=no.ErrorCode=_y,YG.COMPLETE="complete",pB=no.EventType=YG,qG.EventType=Ef,Ef.OPEN="a",Ef.CLOSE="b",Ef.ERROR="c",Ef.MESSAGE="d",Rn.prototype.listen=Rn.prototype.K,Th=no.WebChannel=qG,no.FetchXmlHttpFactory=Rf,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,fB=no.XhrIo=Tt}).apply(typeof o_<"u"?o_:typeof self<"u"?self:typeof window<"u"?window:{});const yB="@firebase/firestore";class tn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");let su="10.14.0";const Ko=new jm("@firebase/firestore");function au(){return Ko.logLevel}function j(t,...e){if(Ko.logLevel<=Se.DEBUG){const n=e.map(PD);Ko.debug(`Firestore (${su}): ${t}`,...n)}}function Pt(t,...e){if(Ko.logLevel<=Se.ERROR){const n=e.map(PD);Ko.error(`Firestore (${su}): ${t}`,...n)}}function Nr(t,...e){if(Ko.logLevel<=Se.WARN){const n=e.map(PD);Ko.warn(`Firestore (${su}): ${t}`,...n)}}function PD(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function ee(t="Unexpected state"){const e=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: `+t;throw Pt(e),new Error(e)}function ne(t,e){t||ee()}function K(t,e){return t}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class nn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class vB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ale{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tn.UNAUTHENTICATED))}shutdown(){}}class Sle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Rle{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;ne(void 0===this.o);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nn,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(v(function*(){yield u.promise,yield o(r.currentUser)}))},c=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne("string"==typeof r.accessToken),new vB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ne(null===e||"string"==typeof e),new tn(e)}}class Mle{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ple{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Mle(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xle{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ne(void 0===this.o);const r=o=>{null!=o.error&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne("string"==typeof n.token),this.R=n.token,new IB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Nle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class EB{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Nle(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function cu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new ct(0,0))}static max(){return new oe(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bh{constructor(e,n,r){void 0===n?n=0:n>e.length&&ee(),void 0===r?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===bh.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends bh{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const Ole=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends bh{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return Ole.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new gt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new B(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new B(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new B(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Re.fromString(e))}static fromName(e){return new Y(Re.fromString(e).popFirst(5))}static empty(){return new Y(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Re.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Re(e.slice()))}}class _r{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _r(oe.min(),Y.empty(),-1)}static max(){return new _r(oe.max(),Y.empty(),-1)}}function ND(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Y.comparator(t.documentKey,e.documentKey),0!==n?n:he(t.largestBatchId,e.largestBatchId))}const CB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Qo(t){return OD.apply(this,arguments)}function OD(){return(OD=v(function*(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==CB)throw t;j("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(i=>i?P.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new P((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new P((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function Yo(t){return"IndexedDbTransactionError"===t.name}let yr=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Dh(t){return null==t}function Ah(t){return 0===t&&1/t==-1/0}function FB(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class nt{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new u_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new u_(this.root,e,this.comparator,!1)}getReverseIterator(){return new u_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new u_(this.root,e,this.comparator,!0)}}class u_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??dn.RED,this.left=i??dn.EMPTY,this.right=o??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new dn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1,dn.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,i,o){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ze{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new UB(this.data.getIterator())}getIteratorFrom(e){return new UB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class UB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zn{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new Zn([])}unionWith(e){let n=new ze(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class jB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jB("Invalid base64 string: "+o):o}}(e);return new wt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const sde=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(t){if(ne(!!t),"string"==typeof t){let e=0;const n=sde.exec(t);if(ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function io(t){return"string"==typeof t?wt.fromBase64String(t):wt.fromUint8Array(t)}function l_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function d_(t){const e=t.mapValue.fields.__previous_value__;return l_(e)?d_(e):e}function Sh(t){const e=ro(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}class ade{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class fa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}const Xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l_(t)?4:qB(t)?9007199254740991:g_(t)?10:11:ee()}function Si(t,e){if(t===e)return!0;const n=Zo(t);if(n!==Zo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sh(t).isEqual(Sh(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ro(i.timestampValue),a=ro(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,io(t.bytesValue).isEqual(io(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return mt(i.geoPointValue.latitude)===mt(o.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return mt(i.integerValue)===mt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=mt(i.doubleValue),a=mt(o.doubleValue);return s===a?Ah(s)===Ah(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return cu(t.arrayValue.values||[],e.arrayValue.values||[],Si);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(FB(s)!==FB(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!Si(s[c],a[c])))return!1;return!0}(t,e);default:return ee()}var o}function Rh(t,e){return void 0!==(t.values||[]).find(n=>Si(n,e))}function es(t,e){if(t===e)return 0;const n=Zo(t),r=Zo(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=mt(o.integerValue||o.doubleValue),c=mt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return BB(t.timestampValue,e.timestampValue);case 4:return BB(Sh(t),Sh(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(o,s){const a=io(o),c=io(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=he(a[u],c[u]);if(0!==d)return d}return he(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=he(mt(o.latitude),mt(s.latitude));return 0!==a?a:he(mt(o.longitude),mt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $B(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;const g=null===(a=(o.fields||{}).value)||void 0===a?void 0:a.arrayValue,_=null===(c=(s.fields||{}).value)||void 0===c?void 0:c.arrayValue,I=he((null===(u=g?.values)||void 0===u?void 0:u.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==I?I:$B(g,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Xo.mapValue&&s===Xo.mapValue)return 0;if(o===Xo.mapValue)return 1;if(s===Xo.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const p=he(c[h],d[h]);if(0!==p)return p;const g=es(a[c[h]],u[d[h]]);if(0!==g)return g}return he(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ee()}}function BB(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return he(t,e);const n=ro(t),r=ro(e),i=he(n.seconds,r.seconds);return 0!==i?i:he(n.nanos,r.nanos)}function $B(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=es(n[i],r[i]);if(o)return o}return he(n.length,r.length)}function hu(t){return LD(t)}function LD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ro(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?io(t.bytesValue).toBase64():"referenceValue"in t?Y.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=LD(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${LD(n.fields[s])}`;return i+"}"}(t.mapValue):ee()}function pa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function UD(t){return!!t&&"integerValue"in t}function Mh(t){return!!t&&"arrayValue"in t}function HB(t){return!!t&&"nullValue"in t}function GB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function p_(t){return!!t&&"mapValue"in t}function g_(t){var e,n;return"__vector__"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ph(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ph(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ph(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qB(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!p_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ph(n)}setAll(e){let n=gt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Ph(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());p_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];p_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Jo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new hn(Ph(this.value))}}function QB(t){const e=[];return Jo(t.fields,(n,r)=>{const i=new gt([n]);if(p_(r)){const o=QB(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Zn(e)}class ut{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ut(e,0,oe.min(),oe.min(),oe.min(),hn.empty(),0)}static newFoundDocument(e,n,r,i){return new ut(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new ut(e,2,n,oe.min(),oe.min(),hn.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,oe.min(),oe.min(),hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ts{constructor(e,n){this.position=e,this.inclusive=n}}function YB(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Y.comparator(Y.fromName(s.referenceValue),n.key):es(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function JB(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Si(t.position[n],e.position[n]))return!1;return!0}class xh{constructor(e,n="asc"){this.field=e,this.dir=n}}function lde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class XB{}class Me extends XB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new dde(e,n,r):"array-contains"===n?new pde(e,r):"in"===n?new i$(e,r):"not-in"===n?new gde(e,r):"array-contains-any"===n?new mde(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new hde(e,r):new fde(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(es(n,this.value)):null!==n&&Zo(this.value)===Zo(n)&&this.matchesComparison(es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ge extends XB{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ge(e,n)}matches(e){return fu(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fu(t){return"and"===t.op}function BD(t){return function ZB(t){for(const e of t.filters)if(e instanceof Ge)return!1;return!0}(t)&&fu(t)}function $D(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+hu(t.value);if(BD(t))return t.filters.map(e=>$D(e)).join(",");{const e=t.filters.map(n=>$D(n)).join(",");return`${t.op}(${e})`}}function e$(t,e){return t instanceof Me?(r=t,(i=e)instanceof Me&&r.op===i.op&&r.field.isEqual(i.field)&&Si(r.value,i.value)):t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&e$(s,i.filters[a]),!0)}(t,e):void ee();var r,i}function n$(t){return t instanceof Me?`${(n=t).field.canonicalString()} ${n.op} ${hu(n.value)}`:t instanceof Ge?function(n){return n.op.toString()+" {"+n.getFilters().map(n$).join(" ,")+"}"}(t):"Filter";var n}class dde extends Me{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class hde extends Me{constructor(e,n){super(e,"in",n),this.keys=r$(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fde extends Me{constructor(e,n){super(e,"not-in",n),this.keys=r$(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r$(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class pde extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mh(n)&&Rh(n.arrayValue,this.value)}}class i$ extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Rh(this.value.arrayValue,n)}}class gde extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Rh(this.value.arrayValue,n)}}class mde extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rh(this.value.arrayValue,r))}}class _de{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function HD(t,e=null,n=[],r=[],i=null,o=null,s=null){return new _de(t,e,n,r,i,o,s)}function ga(t){const e=K(t);if(null===e.ue){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$D(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Dh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hu(r)).join(",")),e.ue=n}return e.ue}function Nh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!e$(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JB(t.startAt,e.startAt)&&JB(t.endAt,e.endAt)}function m_(t){return Y.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class oo{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function pu(t){return new oo(t)}function c$(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function GD(t){return null!==t.collectionGroup}function gu(t){const e=K(t);if(null===e.ce){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ze(gt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new xh(o,r))}),n.has(gt.keyField().canonicalString())||e.ce.push(new xh(gt.keyField(),r))}return e.ce}function bn(t){const e=K(t);return e.le||(e.le=function l$(t,e){if("F"===t.limitType)return HD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new xh(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new ts(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ts(t.startAt.position,t.startAt.inclusive):null;return HD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,gu(t))),e.le}function qD(t,e){const n=t.filters.concat([e]);return new oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function y_(t,e,n){return new oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Oh(t,e){return Nh(bn(t),bn(e))&&t.limitType===e.limitType}function d$(t){return`${ga(bn(t))}|lt:${t.limitType}`}function mu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>n$(i)).join(", ")}]`),Dh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hu(i)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of gu(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,c){const u=YB(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,gu(r),i)||r.endAt&&!function(s,a,c){const u=YB(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,gu(r),i)));var r,i}function f$(t){return(e,n)=>{let r=!1;for(const i of gu(t)){const o=yde(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function yde(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return null!==c&&null!==u?es(c,u):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}class so{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return LB(this.inner)}size(){return this.innerSize}}const vde=new nt(Y.comparator);function er(){return vde}const p$=new nt(Y.comparator);function Fh(...t){let e=p$;for(const n of t)e=e.insert(n.key,n);return e}function g$(t){let e=p$;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ri(){return Vh()}function m$(){return Vh()}function Vh(){return new so(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ide=new nt(Y.comparator),Ede=new ze(Y.comparator);function ve(...t){let e=Ede;for(const n of t)e=e.add(n);return e}const wde=new ze(he);function WD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function _$(t){return{integerValue:""+t}}function y$(t,e){return function RB(t){return"number"==typeof t&&Number.isInteger(t)&&!Ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?_$(e):WD(t,e)}class v_{constructor(){this._=void 0}}function Tde(t,e,n){return t instanceof _u?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&l_(o)&&(o=d_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ma?I$(t,e):t instanceof _a?E$(t,e):function(i,o){const s=v$(i,o),a=w$(s)+w$(i.Pe);return UD(s)&&UD(i.Pe)?_$(a):WD(i.serializer,a)}(t,e)}function bde(t,e,n){return t instanceof ma?I$(t,e):t instanceof _a?E$(t,e):n}function v$(t,e){return t instanceof yu?UD(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class _u extends v_{}class ma extends v_{constructor(e){super(),this.elements=e}}function I$(t,e){const n=T$(e);for(const r of t.elements)n.some(i=>Si(i,r))||n.push(r);return{arrayValue:{values:n}}}class _a extends v_{constructor(e){super(),this.elements=e}}function E$(t,e){let n=T$(e);for(const r of t.elements)n=n.filter(i=>!Si(i,r));return{arrayValue:{values:n}}}class yu extends v_{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function w$(t){return mt(t.integerValue||t.doubleValue)}function T$(t){return Mh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Dde{constructor(e,n){this.version=e,this.transformResults=n}}class _t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function I_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class E_{}function b$(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Iu(t.key,_t.none()):new vu(t.key,t.data,_t.none());{const n=t.data,r=hn.empty();let i=new ze(gt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new ao(t.key,r,new Zn(i.toArray()),_t.none())}}function Ade(t,e,n){t instanceof vu?function(i,o,s){const a=i.value.clone(),c=A$(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ao?function(i,o,s){if(!I_(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=A$(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(D$(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Uh(t,e,n,r){return t instanceof vu?function(o,s,a,c){if(!I_(o.precondition,s))return a;const u=o.value.clone(),d=S$(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ao?function(o,s,a,c){if(!I_(o.precondition,s))return a;const u=S$(o.fieldTransforms,c,s),d=s.data;return d.setAll(D$(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,I_(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Sde(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=v$(r.transform,i||null);null!=o&&(null===n&&(n=hn.empty()),n.set(r.field,o))}return n||null}function C$(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&cu(r,i,(o,s)=>function Cde(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof ma&&i instanceof ma||r instanceof _a&&i instanceof _a?cu(r.elements,i.elements,Si):r instanceof yu&&i instanceof yu?Si(r.Pe,i.Pe):r instanceof _u&&i instanceof _u);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class vu extends E_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ao extends E_{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function D$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function A$(t,e,n){const r=new Map;ne(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,bde(s,a,n[i]))}return r}function S$(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Tde(o,s,e))}return r}class Iu extends E_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KD extends E_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Ade(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Uh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Uh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=m$();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const c=b$(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&cu(this.mutations,e.mutations,(n,r)=>C$(n,r))&&cu(this.baseMutations,e.baseMutations,(n,r)=>C$(n,r))}}class YD{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ne(e.mutations.length===r.length);let i=function(){return Ide}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new YD(e,n,r,i)}}class JD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rde{constructor(e,n){this.count=e,this.unchangedNames=n}}var jt,Ne;function P$(t){if(void 0===t)return Pt("GRPC error has no .code"),N.UNKNOWN;switch(t){case jt.OK:return N.OK;case jt.CANCELLED:return N.CANCELLED;case jt.UNKNOWN:return N.UNKNOWN;case jt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case jt.INTERNAL:return N.INTERNAL;case jt.UNAVAILABLE:return N.UNAVAILABLE;case jt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case jt.NOT_FOUND:return N.NOT_FOUND;case jt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case jt.ABORTED:return N.ABORTED;case jt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case jt.DATA_LOSS:return N.DATA_LOSS;default:return ee()}}(Ne=jt||(jt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";const Mde=new ua([4294967295,4294967295],0);function N$(t){const e=function x$(){return new TextEncoder}().encode(t),n=new hB;return n.update(e),new Uint8Array(n.digest())}function O$(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ua([n,r],0),new ua([i,o],0)]}class XD{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jh(`Invalid padding: ${n}`);if(r<0)throw new jh(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new jh(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new jh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ua.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ua.fromNumber(r)));return 1===i.compare(Mde)&&(i=new ua([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const n=N$(e),[r,i]=O$(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new XD(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const n=N$(e),[r,i]=O$(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class jh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bh{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$h.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bh(oe.min(),i,new nt(he),er(),ve())}}class $h{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $h(r,n,ve(),ve(),ve())}}class T_{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class k${constructor(e,n){this.targetId=e,this.me=n}}class F${constructor(e,n,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class V${constructor(){this.fe=0,this.ge=U$(),this.pe=wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),r=ve();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new $h(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=U$()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Pde{constructor(e){this.Le=e,this.Be=new Map,this.ke=er(),this.qe=L$(),this.Qe=new nt(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(m_(o))if(0===r){const s=new Y(o.path);this.Ue(n,s,ut.newNoDocument(s,oe.min()))}else ne(1===r);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),c=a?this.Xe(a,e,s):1;0!==c&&(this.je(n),this.Qe=this.Qe.insert(n,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=io(r).toUint8Array()}catch(c){if(c instanceof jB)return Nr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new XD(s,i,o)}catch(c){return Nr(c instanceof jh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&m_(a.target)){const c=new Y(a.target.path);null!==this.ke.get(c)||this.it(s,c)||this.Ue(s,c,ut.newNoDocument(c,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ve();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const u=this.Je(c);return!u||"TargetPurposeLimboResolution"===u.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Bh(e,n,this.Qe,this.ke,r);return this.ke=er(),this.qe=L$(),this.Qe=new nt(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new V$,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ze(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=null!==this.Je(e);return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new V$),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function L$(){return new nt(Y.comparator)}function U$(){return new nt(Y.comparator)}const xde={asc:"ASCENDING",desc:"DESCENDING"},Nde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ode={and:"AND",or:"OR"};class kde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ZD(t,e){return t.useProto3Json||Dh(e)?e:{value:e}}function Eu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Fde(t,e){return Eu(t,e.toTimestamp())}function xt(t){return ne(!!t),oe.fromTimestamp(function(n){const r=ro(n);return new ct(r.seconds,r.nanos)}(t))}function eA(t,e){return tA(t,e).canonicalString()}function tA(t,e){const n=(i=t,new Re(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function B$(t){const e=Re.fromString(t);return ne(X$(e)),e}function Hh(t,e){return eA(t.databaseId,e.path)}function Mi(t,e){const n=B$(e);if(n.get(1)!==t.databaseId.projectId)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(G$(n))}function $$(t,e){return eA(t.databaseId,e)}function nA(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G$(t){return ne(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function q$(t,e,n){return{name:Hh(t,e),fields:n.value.mapValue.fields}}function W$(t,e){return{documents:[$$(t,e.path)]}}function b_(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$$(t,i);const o=function(u){if(0!==u.length)return J$(Ge.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(0!==u.length)return u.map(d=>{return{field:ns((p=d).field),direction:Bde(p.dir)};var p})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=ZD(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i};var u}function Q$(t){let e=function H$(t){const e=B$(t);return 4===e.length?Re.emptyPath():G$(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ne(1===r);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const p=Y$(h);return p instanceof Ge&&BD(p)?p.getFilters():[p]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(p=>{return new xh(wu((_=p).field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let p;return p="object"==typeof h?h.value:h,Dh(p)?null:p}(n.limit));let c=null;var h;n.startAt&&(c=new ts((h=n.startAt).values||[],!!h.before));let u=null;return n.endAt&&(u=function(h){return new ts(h.values||[],!h.before)}(n.endAt)),function a$(t,e,n,r,i,o,s,a){return new oo(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",c,u)}function Y$(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wu(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wu(n.unaryFilter.field);return Me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wu(n.unaryFilter.field);return Me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wu(n.unaryFilter.field);return Me.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):void 0!==t.fieldFilter?Me.create(wu((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Ge.create(n.compositeFilter.filters.map(r=>Y$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee();var n}function Bde(t){return xde[t]}function $de(t){return Nde[t]}function Hde(t){return Ode[t]}function ns(t){return{fieldPath:t.canonicalString()}}function wu(t){return gt.fromServerFormat(t.fieldPath)}function J$(t){return t instanceof Me?function(n){if("=="===n.op){if(GB(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NAN"}};if(HB(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(GB(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NAN"}};if(HB(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(n.field),op:$de(n.op),value:n.value}}}(t):t instanceof Ge?function(n){const r=n.getFilters().map(i=>J$(i));return 1===r.length?r[0]:{compositeFilter:{op:Hde(n.op),filters:r}}}(t):ee()}function Gde(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function X$(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class co{constructor(e,n,r,i,o=oe.min(),s=oe.min(),a=wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Z${constructor(e){this.ct=e}}function iA(t){const e=Q$({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?y_(e,e.limit,"L"):e}class Ea{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(mt(e.integerValue));else if("doubleValue"in e){const r=mt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ah(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),"string"==typeof r&&(r=ro(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(io(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?qB(e)?this.dt(n,Number.MAX_SAFE_INTEGER):g_(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ee()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const o=e.fields||{};this.dt(n,53);const s="value",a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(n,15),n.At(mt(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),Y.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Ea.vt=new Ea;class Zde{constructor(){this.un=new lA}addToCollectionParentIndex(e,n){return this.un.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(_r.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class lA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(Re.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(Re.comparator)).toArray()}}new Uint8Array(0);class Cn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(41943040,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);class Ta{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ta(0)}static kn(){return new Ta(-1)}}class wH{constructor(){this.changes=new so(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ahe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class AH{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Uh(r.mutation,i,Zn.empty(),ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){const i=Ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Fh();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=er();const s=Vh(),a=Vh();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(void 0===d||d.mutation instanceof ao)?o=o.insert(u.key,u):void 0!==d?(s.set(u.key,d.mutation.getFieldMask()),Uh(d.mutation,u,d.mutation.getFieldMask(),ct.now())):s.set(u.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new ahe(d,null!==(h=s.get(u))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Vh();let i=new nt((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(c=>{const u=n.get(c);if(null===u)return;let d=r.get(c)||Zn.empty();d=a.applyToLocalView(u,d),r.set(c,d);const h=(i.get(a.batchId)||ve()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,h=m$();d.forEach(p=>{if(!o.has(p)){const g=b$(n.get(p),r.get(p));null!==g&&h.set(p,g),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return Y.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):GD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Ri());let a=-1,c=o;return s.next(u=>P.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,ve())).next(d=>({batchId:a,changes:g$(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Fh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Fh();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,c=>{const u=(h=n,p=c.child(o),new oo(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,p;return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,p)=>{s=s.insert(h,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{const d=u.getKey();null===s.get(d)&&(s=s.insert(d,ut.newInvalidDocument(d)))});let a=Fh();return s.forEach((c,u)=>{const d=o.get(c);void 0!==d&&Uh(d.mutation,u,Zn.empty(),ct.now()),kh(n,u)&&(a=a.insert(c,u))}),a})}}class che{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return P.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,{id:(i=n).id,version:i.version,createTime:xt(i.createTime)}),P.resolve();var i}getNamedQuery(e,n){return P.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,{name:(i=n).name,query:iA(i.bundledQuery),readTime:xt(i.readTime)}),P.resolve();var i}}class uhe{constructor(){this.overlays=new nt(Y.comparator),this.Ir=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ri();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const i=Ri(),o=n.length+1,s=new Y(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new nt((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);null===d&&(d=Ri(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Ri(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return P.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new JD(n,r));let o=this.Ir.get(n);void 0===o&&(o=ve(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}class lhe{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}}class dA{constructor(){this.Tr=new ze(rn.Er),this.dr=new ze(rn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new Re([])),r=new rn(n,e),i=new rn(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Re([])),r=new rn(n,e),i=new rn(n,e+1);let o=ve();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new rn(e,0),r=this.Tr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class rn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||Y.comparator(e.key,n.key)}}class dhe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ze(rn.Er)}checkEmpty(e){return P.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++;const s=new QD(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new rn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.vr(n+1),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rn(n,0),i=new rn(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(he);return n.forEach(i=>{const o=new rn(i,0),s=new rn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Y.isDocumentKey(o)||(o=o.child(""));const s=new rn(new Y(o),0);let a=new ze(he);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},s),P.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){ne(0===this.Fr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return P.forEach(n.mutations,i=>{const o=new rn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rn(n,0),i=this.br.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return P.resolve()}Fr(e,n){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class hhe{constructor(e){this.Mr=e,this.docs=new nt(Y.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=er();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ut.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=er();const s=n.path,a=new Y(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||ND(new _r((t=d).readTime,t.key,-1),r)<=0||(i.has(d.key)||kh(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}var t;return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ee()}Or(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fhe(this)}getSize(e){return P.resolve(this.size)}}class fhe extends wH{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}class phe{constructor(e){this.persistence=e,this.Nr=new so(n=>ga(n),Nh),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dA,this.targetCount=0,this.kr=Ta.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),P.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ta(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Kn(n),P.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Br.containsKey(n))}}class hA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new yr(0),this.Kr=!1,this.Kr=!0,this.$r=new lhe,this.referenceDelegate=e(this),this.Ur=new phe(this),this.indexManager=new Zde,this.remoteDocumentCache=new hhe(r=>this.referenceDelegate.Wr(r)),this.serializer=new Z$(n),this.Gr=new che(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uhe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new dhe(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new ghe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class ghe extends DB{constructor(e){super(),this.currentSequenceNumber=e}}class x_{constructor(e){this.persistence=e,this.Jr=new dA,this.Yr=null}static Zr(e){return new x_(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),P.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{const i=Y.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return P.or([()=>P.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class mA{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ve(),i=ve();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new mA(e,n.fromCache,r,i)}}class _he{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class RH{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function OU(){return!function Roe(){var t;const e=null===(t=Vm())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function AB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Rt())>0?6:4}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new _he;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(au()<=Se.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",mu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(au()<=Se.DEBUG&&j("QueryEngine","Query:",mu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(au()<=Se.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",mu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):P.resolve())}Yi(e,n){if(c$(n))return P.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=y_(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=ve(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,a);return this.ns(n,u,s,c.readTime)?this.Yi(e,y_(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return c$(n)||i.isEqual(oe.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?P.resolve(null):(au()<=Se.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mu(n)),this.rs(e,s,n,function TB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(1e9===r?new ct(n+1,0):new ct(n,r));return new _r(i,Y.empty(),e)}(i,-1)).next(a=>a))})}ts(e,n){let r=new ze(f$(e));return n.forEach((i,o)=>{kh(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return au()<=Se.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",mu(n)),this.Ji.getDocumentsMatchingQuery(e,n,_r.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class yhe{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new nt(he),this._s=new so(o=>ga(o),Nh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AH(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function PH(t,e){return _A.apply(this,arguments)}function _A(){return(_A=v(function*(t,e){const n=K(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=ve();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function xH(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Ehe(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Su(t,e,n){return yA.apply(this,arguments)}function yA(){return(yA=v(function*(t,e,n){const r=K(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Yo(s))throw s;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function k_(t,e,n){const r=K(t);let i=oe.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const h=K(c),p=h._s.get(d);return void 0!==p?P.resolve(h.os.get(p)):h.Ur.getTargetData(u,d)}(r,s,bn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:oe.min(),n?o:ve())).next(a=>(function FH(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}(r,function h$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,Ts:o})))}class TA{constructor(){this.activeTargetIds=function zD(){return wde}()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UH{constructor(){this.so=new TA,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new TA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bhe{_o(e){}shutdown(){}}class jH{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let L_=null;function CA(){return null===L_?L_=268435456+Math.round(2147483648*Math.random()):L_++,"0x"+L_.toString(16)}const Che={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dhe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Dn="WebChannelConnection";class Ahe extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=CA(),c=this.xo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(n,c,u,i).then(d=>(j("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Nr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+su,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){return`${this.Do}/v1/${r}:${Che[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=CA();return new Promise((s,a)=>{const c=new fB;c.setWithCredentials(!0),c.listenOnce(pB.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case s_.NO_ERROR:const d=c.getResponseJson();j(Dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case s_.TIMEOUT:j(Dn,`RPC '${e}' ${o} timed out`),a(new B(N.DEADLINE_EXCEEDED,"Request time out"));break;case s_.HTTP_ERROR:const h=c.getStatus();if(j(Dn,`RPC '${e}' ${o} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p?.error;if(g&&g.status&&g.message){const _=function(E){const A=E.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(A)>=0?A:N.UNKNOWN}(g.status);a(new B(_,g.message))}else a(new B(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(N.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{j(Dn,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);j(Dn,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=CA(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_B(),a=mB(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");j(Dn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=s.createWebChannel(d,c);let p=!1,g=!1;const _=new Dhe({Io:E=>{g?j(Dn,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(j(Dn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),j(Dn,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),I=(E,A,D)=>{E.listen(A,F=>{try{D(F)}catch($){setTimeout(()=>{throw $},0)}})};return I(h,Th.EventType.OPEN,()=>{g||(j(Dn,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),I(h,Th.EventType.CLOSE,()=>{g||(g=!0,j(Dn,`RPC '${e}' stream ${i} transport closed`),_.So())}),I(h,Th.EventType.ERROR,E=>{g||(g=!0,Nr(Dn,`RPC '${e}' stream ${i} transport errored:`,E),_.So(new B(N.UNAVAILABLE,"The operation could not be completed")))}),I(h,Th.EventType.MESSAGE,E=>{var A;if(!g){const D=E.data[0];ne(!!D);const $=D.error||(null===(A=D[0])||void 0===A?void 0:A.error);if($){j(Dn,`RPC '${e}' stream ${i} received error:`,$);const J=$.status;let X=function(T){const S=jt[T];if(void 0!==S)return P$(S)}(J),C=$.message;void 0===X&&(X=N.INTERNAL,C="Unknown error status: "+J+" with message "+$.message),g=!0,_.So(new B(X,C)),h.close()}else j(Dn,`RPC '${e}' stream ${i} received:`,D),_.bo(D)}}),I(a,gB.STAT_EVENT,E=>{E.stat===MD.PROXY?j(Dn,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===MD.NOPROXY&&j(Dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function U_(){return typeof document<"u"?document:null}function Xh(t){return new kde(t,!0)}class DA{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class $H{constructor(e,n,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new DA(e,n)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return v(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return v(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){var r=this;return v(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Pt(n.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):n&&n.code===N.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(n)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new B(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go(v(function*(){e.state=0,e.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class She extends $H{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=function Lde(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:ee(),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(ne(void 0===d||"string"==typeof d),wt.fromBase64String(d||"")):(ne(void 0===d||d instanceof Buffer||d instanceof Uint8Array),wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=void 0===u.code?N.UNKNOWN:P$(u.code);return new B(d,u.message||"")}(s);n=new F$(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Mi(t,r.document.name),o=xt(r.document.updateTime),s=r.document.createTime?xt(r.document.createTime):oe.min(),a=new hn({mapValue:{fields:r.document.fields}}),c=ut.newFoundDocument(i,o,s,a);n=new T_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Mi(t,r.document),o=r.readTime?xt(r.readTime):oe.min(),s=ut.newNoDocument(i,o);n=new T_([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=Mi(t,r.document);n=new T_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ee();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Rde(i,o);n=new k$(r.targetId,s)}}var u;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return oe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?xt(s.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=nA(this.serializer),n.addTarget=function(o,s){let a;const c=s.target;if(a=m_(c)?{documents:W$(o,c)}:{query:b_(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=j$(o,s.resumeToken);const u=ZD(o,s.expectedCount);null!==u&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(oe.min())>0){a.readTime=Eu(o,s.snapshotVersion.toTimestamp());const u=ZD(o,s.expectedCount);null!==u&&(a.expectedCount=u)}return a}(this.serializer,e);const r=function jde(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=nA(this.serializer),n.removeTarget=e,this.a_(n)}}class Rhe extends $H{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=function Ude(t,e){return t&&t.length>0?(ne(void 0!==e),t.map(n=>function(i,o){let s=xt(i.updateTime?i.updateTime:o);return s.isEqual(oe.min())&&(s=xt(o)),new Dde(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=xt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=nA(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Gh(t,e){let n;if(e instanceof vu)n={update:q$(t,e.key,e.value)};else if(e instanceof Iu)n={delete:Hh(t,e.key)};else if(e instanceof ao)n={update:q$(t,e.key,e.data),updateMask:Gde(e.fieldMask)};else{if(!(e instanceof KD))return ee();n={verify:Hh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof _u)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ma)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _a)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yu)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Fde(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ee()),n;var o}(this.serializer,r))};this.a_(n)}}class Mhe extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,tA(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(N.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,tA(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Phe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pt(n),this.D_=!1):j("OnlineStateTracker",n)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class xhe{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(v(function*(){var c;ss(s)&&(j("RemoteStore","Restarting streams for network reachability change."),yield(c=v(function*(d){const h=K(d);h.L_.add(4),yield Ru(h),h.q_.set("Unknown"),h.L_.delete(4),yield Zh(h)}),function u(d){return c.apply(this,arguments)})(s))}))}),this.q_=new Phe(r,i)}}function Zh(t){return AA.apply(this,arguments)}function AA(){return(AA=v(function*(t){if(ss(t))for(const e of t.B_)yield e(!0)})).apply(this,arguments)}function Ru(t){return SA.apply(this,arguments)}function SA(){return(SA=v(function*(t){for(const e of t.B_)yield e(!1)})).apply(this,arguments)}function j_(t,e){const n=K(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),PA(n)?MA(n):xu(n).r_()&&RA(n,e))}function Mu(t,e){const n=K(t),r=xu(n);n.N_.delete(e),r.r_()&&HH(n,e),0===n.N_.size&&(r.r_()?r.o_():ss(n)&&n.q_.set("Unknown"))}function RA(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xu(t).A_(e)}function HH(t,e){t.Q_.xe(e),xu(t).R_(e)}function MA(t){t.Q_=new Pde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xu(t).start(),t.q_.v_()}function PA(t){return ss(t)&&!xu(t).n_()&&t.N_.size>0}function ss(t){return 0===K(t).L_.size}function GH(t){t.Q_=void 0}function Nhe(t){return xA.apply(this,arguments)}function xA(){return(xA=v(function*(t){t.q_.set("Online")})).apply(this,arguments)}function Ohe(t){return NA.apply(this,arguments)}function NA(){return(NA=v(function*(t){t.N_.forEach((e,n)=>{RA(t,e)})})).apply(this,arguments)}function khe(t,e){return OA.apply(this,arguments)}function OA(){return(OA=v(function*(t,e){GH(t),PA(t)?(t.q_.M_(e),MA(t)):t.q_.set("Unknown")})).apply(this,arguments)}function Fhe(t,e,n){return kA.apply(this,arguments)}function kA(){return kA=v(function*(t,e,n){if(t.q_.set("Online"),e instanceof F$&&2===e.state&&e.cause)try{yield(r=v(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.N_.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.N_.delete(c),o.Q_.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield B_(t,r)}else if(e instanceof T_?t.Q_.Ke(e):e instanceof k$?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=yield xH(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{const d=o.N_.get(c);if(!d)return;o.N_.set(c,d.withResumeToken(wt.EMPTY_BYTE_STRING,d.snapshotVersion)),HH(o,c);const h=new co(d.target,c,u,d.sequenceNumber);RA(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield B_(t,r)}var r}),kA.apply(this,arguments)}function B_(t,e,n){return FA.apply(this,arguments)}function FA(){return(FA=v(function*(t,e,n){if(!Yo(e))throw e;t.L_.add(1),yield Ru(t),t.q_.set("Offline"),n||(n=()=>xH(t.localStore)),t.asyncQueue.enqueueRetryable(v(function*(){j("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Zh(t)}))})).apply(this,arguments)}function qH(t,e){return e().catch(n=>B_(t,n,e))}function Pu(t){return VA.apply(this,arguments)}function VA(){return(VA=v(function*(t){const e=K(t),n=as(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Vhe(e);)try{const i=yield Ehe(e.localStore,r);if(null===i){0===e.O_.length&&n.o_();break}r=i.batchId,Lhe(e,i)}catch(i){yield B_(e,i)}zH(e)&&WH(e)})).apply(this,arguments)}function Vhe(t){return ss(t)&&t.O_.length<10}function Lhe(t,e){t.O_.push(e);const n=as(t);n.r_()&&n.V_&&n.m_(e.mutations)}function zH(t){return ss(t)&&!as(t).n_()&&t.O_.length>0}function WH(t){as(t).start()}function Uhe(t){return LA.apply(this,arguments)}function LA(){return(LA=v(function*(t){as(t).p_()})).apply(this,arguments)}function jhe(t){return UA.apply(this,arguments)}function UA(){return(UA=v(function*(t){const e=as(t);for(const n of t.O_)e.m_(n.mutations)})).apply(this,arguments)}function Bhe(t,e,n){return jA.apply(this,arguments)}function jA(){return(jA=v(function*(t,e,n){const r=t.O_.shift(),i=YD.from(r,e,n);yield qH(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Pu(t)})).apply(this,arguments)}function $he(t,e){return BA.apply(this,arguments)}function BA(){return BA=v(function*(t,e){var n;e&&as(t).V_&&(yield(n=v(function*(i,o){if(function M$(t){switch(t){default:return ee();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}(a=o.code)&&a!==N.ABORTED){const s=i.O_.shift();as(i).s_(),yield qH(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Pu(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),zH(t)&&WH(t)}),BA.apply(this,arguments)}function KH(t,e){return $A.apply(this,arguments)}function $A(){return($A=v(function*(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=ss(n);n.L_.add(3),yield Ru(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Zh(n)})).apply(this,arguments)}function HA(t,e){return GA.apply(this,arguments)}function GA(){return(GA=v(function*(t,e){const n=K(t);e?(n.L_.delete(2),yield Zh(n)):e||(n.L_.add(2),yield Ru(n),n.q_.set("Unknown"))})).apply(this,arguments)}function xu(t){return t.K_||(t.K_=function(n,r,i){const o=K(n);return o.w_(),new She(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Nhe.bind(null,t),Ro:Ohe.bind(null,t),mo:khe.bind(null,t),d_:Fhe.bind(null,t)}),t.B_.push(function(){var e=v(function*(n){n?(t.K_.s_(),PA(t)?MA(t):t.q_.set("Unknown")):(yield t.K_.stop(),GH(t))});return function(n){return e.apply(this,arguments)}}())),t.K_}function as(t){return t.U_||(t.U_=function(n,r,i){const o=K(n);return o.w_(),new Rhe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Uhe.bind(null,t),mo:$he.bind(null,t),f_:jhe.bind(null,t),g_:Bhe.bind(null,t)}),t.B_.push(function(){var e=v(function*(n){n?(t.U_.s_(),yield Pu(t)):(yield t.U_.stop(),t.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))});return function(n){return e.apply(this,arguments)}}())),t.U_}class qA{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new qA(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new B(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nu(t,e){if(Pt("AsyncQueue",`${e}: ${t}`),Yo(t))return new B(N.UNAVAILABLE,`${e}: ${t}`);throw t}class Ou{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Fh(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new Ou(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ou)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ou;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class QH{constructor(){this.W_=new nt(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(n,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(n):1===e.type&&2===r.type?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ku{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new ku(e,n,Ou.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Hhe{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ghe{constructor(){this.queries=YH(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(n,r){const i=K(n),o=i.queries;i.queries=YH(),o.forEach((s,a)=>{for(const c of a.j_)c.onError(r)})}(this,new B(N.ABORTED,"Firestore shutting down"))}}function YH(){return new so(t=>d$(t),Oh)}function WA(){return(WA=v(function*(t,e){const n=K(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Hhe,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=Nu(s,`Initialization of query '${mu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&YA(n)})).apply(this,arguments)}function QA(){return(QA=v(function*(t,e){const n=K(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),0===o.j_.length?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function qhe(t,e){const n=K(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&YA(n)}function zhe(t,e,n){const r=K(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function YA(t){t.Y_.forEach(e=>{e.next()})}var JA,JH;(JH=JA||(JA={})).ea="default",JH.Cache="cache";class XA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ku(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=ku.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==JA.Cache}}class e4{constructor(e){this.key=e}}class t4{constructor(e){this.key=e}}class n4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=f$(e),this.Ra=new Ou(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new QH,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,u="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),g=kh(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;p&&g?p.data.isEqual(g.data)?_!==I&&(r.track({type:3,doc:g}),E=!0):this.ga(p,g)||(r.track({type:2,doc:g}),E=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),E=!0):p&&!g&&(r.track({type:1,doc:p}),E=!0,(c||u)&&(a=!0)),E&&(g?(s=s.add(g),o=I?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((d,h)=>function(g,_){const I=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return I(g)-I(_)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=null!=i&&i;const a=n&&!i?this.ya():[],c=0===this.da.size&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,0!==s.length||u?{snapshot:new ku(this.query,e.Ra,o,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new QH,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new t4(r))}),this.da.forEach(r=>{e.has(r)||n.push(new e4(r))}),n}ba(e){this.Ta=e.Ts,this.da=ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ku.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Qhe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Yhe{constructor(e){this.key=e,this.va=!1}}class Jhe{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new so(a=>d$(a),Oh),this.Ma=new Map,this.xa=new Set,this.Oa=new nt(Y.comparator),this.Na=new Map,this.La=new dA,this.Ba={},this.ka=new Map,this.qa=Ta.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Xhe(t,e){return ZA.apply(this,arguments)}function ZA(){return(ZA=v(function*(t,e,n=!0){const r=$_(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield r4(r,e,n,!0),i})).apply(this,arguments)}function Zhe(t,e){return e0.apply(this,arguments)}function e0(){return(e0=v(function*(t,e){const n=$_(t);yield r4(n,e,!0,!1)})).apply(this,arguments)}function r4(t,e,n,r){return t0.apply(this,arguments)}function t0(){return(t0=v(function*(t,e,n,r){const i=yield function Au(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new co(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}(t.localStore,bn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function n0(t,e,n,r,i){return r0.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&j_(t.remoteStore,i),a})).apply(this,arguments)}function r0(){return r0=v(function*(t,e,n,r,i){t.Ka=(h,p,g)=>{return(_=v(function*(E,A,D,F){let $=A.view.ma(D);$.ns&&($=yield k_(E.localStore,A.query,!1).then(({documents:w})=>A.view.ma(w,$)));const J=F&&F.targetChanges.get(A.targetId),X=F&&null!=F.targetMismatches.get(A.targetId),C=A.view.applyChanges($,E.isPrimaryClient,J,X);return g0(E,A.targetId,C.wa),C.snapshot}),function I(E,A,D,F){return _.apply(this,arguments)})(t,h,p,g);var _};const o=yield k_(t.localStore,e,!0),s=new n4(e,o.Ts),a=s.ma(o.documents),c=$h.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),u=s.applyChanges(a,t.isPrimaryClient,c);g0(t,n,u.wa);const d=new Qhe(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}),r0.apply(this,arguments)}function efe(t,e,n){return o0.apply(this,arguments)}function o0(){return(o0=v(function*(t,e,n){const r=K(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Oh(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Su(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mu(r.remoteStore,i.targetId),Fu(r,i.targetId)}).catch(Qo))):(Fu(r,i.targetId),yield Su(r.localStore,i.targetId,!0))})).apply(this,arguments)}function tfe(t,e){return s0.apply(this,arguments)}function s0(){return(s0=v(function*(t,e){const n=K(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mu(n.remoteStore,r.targetId))})).apply(this,arguments)}function a0(){return(a0=v(function*(t,e,n){const r=function D0(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ife.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ofe.bind(null,e),e}(t);try{const i=yield function(s,a){const c=K(s),u=ct.now(),d=a.reduce((g,_)=>g.add(_.key),ve());let h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=er(),I=ve();return c.cs.getEntries(g,d).next(E=>{_=E,_.forEach((A,D)=>{D.isValidDocument()||(I=I.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(E=>{h=E;const A=[];for(const D of a){const F=Sde(D,h.get(D.key).overlayedDocument);null!=F&&A.push(new ao(D.key,F,QB(F.value.mapValue),_t.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,A,a)}).next(E=>{p=E;const A=E.applyToLocalDocumentSet(h,I);return c.documentOverlayCache.saveOverlays(g,E.batchId,A)})}).then(()=>({batchId:p.batchId,changes:g$(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ba[s.currentUser.toKey()];u||(u=new nt(he)),u=u.insert(a,c),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,n),yield uo(r,i.changes),yield Pu(r.remoteStore)}catch(i){const o=Nu(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function i4(t,e){return c0.apply(this,arguments)}function c0(){return(c0=v(function*(t,e){const n=K(t);try{const r=yield function Ihe(t,e){const n=K(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,h)));let g=p.withSequenceNumber(o.currentSequenceNumber);var I,E,A;null!==e.targetMismatches.get(h)?g=g.withResumeToken(wt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),E=g,A=d,(0===(I=p).resumeToken.approximateByteSize()||E.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&a.push(n.Ur.updateTargetData(o,g))});let c=er(),u=ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function NH(t,e,n){let r=ve(),i=ve();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=er();return n.forEach((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:s,Is:i}})}(o,s,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(oe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(o).next(h=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.os=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ne(s.va):i.removedDocuments.size>0&&(ne(s.va),s.va=!1))}),yield uo(n,r,e)}catch(r){yield Qo(r)}})).apply(this,arguments)}function o4(t,e,n){const r=K(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=K(s);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(u=!0)}),u&&YA(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rfe(t,e,n){return u0.apply(this,arguments)}function u0(){return(u0=v(function*(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new nt(Y.comparator);s=s.insert(o,ut.newNoDocument(o,oe.min()));const a=ve().add(o),c=new Bh(oe.min(),new Map,new nt(he),s,a);yield i4(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),m0(r)}else yield Su(r.localStore,e,!1).then(()=>Fu(r,e,n)).catch(Qo)})).apply(this,arguments)}function ife(t,e){return l0.apply(this,arguments)}function l0(){return(l0=v(function*(t,e){const n=K(t),r=e.batch.batchId;try{const i=yield function vhe(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const h=u.batch,p=h.keys();let g=P.resolve();return p.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(I=>{const E=u.docVersions.get(_);ne(null!==E),I.version.compareTo(E)<0&&(h.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),d.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);p0(n,r,null),f0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield uo(n,i)}catch(i){yield Qo(i)}})).apply(this,arguments)}function ofe(t,e,n){return d0.apply(this,arguments)}function d0(){return(d0=v(function*(t,e,n){const r=K(t);try{const i=yield function(s,a){const c=K(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(ne(null!==h),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);p0(r,e,n),f0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield uo(r,i)}catch(i){yield Qo(i)}})).apply(this,arguments)}function f0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function p0(t,e,n){const r=K(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Fu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||s4(t,r)})}function s4(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);null!==n&&(Mu(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),m0(t))}function g0(t,e,n){for(const r of n)r instanceof e4?(t.La.addReference(r.key,e),afe(t,r)):r instanceof t4?(j("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||s4(t,r.key)):ee()}function afe(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(j("SyncEngine","New document in limbo: "+n),t.xa.add(r),m0(t))}function m0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new Yhe(n)),t.Oa=t.Oa.insert(n,r),j_(t.remoteStore,new co(bn(pu(n.path)),r,"TargetPurposeLimboResolution",yr.oe))}}function uo(t,e,n){return _0.apply(this,arguments)}function _0(){return _0=v(function*(t,e,n){const r=K(t),i=[],o=[],s=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:null===(d=n?.targetChanges.get(c.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);const h=mA.Wi(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.Ca.d_(i),yield(a=v(function*(u,d){const h=K(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(d,g=>P.forEach(g.$i,_=>h.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>P.forEach(g.Ui,_=>h.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!Yo(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const _=h.os.get(g),E=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.os=h.os.insert(g,E)}}}),function c(u,d){return a.apply(this,arguments)})(r.localStore,o))}),_0.apply(this,arguments)}function cfe(t,e){return y0.apply(this,arguments)}function y0(){return(y0=v(function*(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=yield PH(n.localStore,e);n.currentUser=e,(o=n).ka.forEach(a=>{a.forEach(c=>{c.reject(new B(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ka.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield uo(n,r.hs)}var o})).apply(this,arguments)}function ufe(t,e){const n=K(t),r=n.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function $_(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=i4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ufe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rfe.bind(null,e),e.Ca.d_=qhe.bind(null,e.eventManager),e.Ca.$a=zhe.bind(null,e.eventManager),e}let Vu=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return v(function*(){r.serializer=Xh(n.databaseInfo.databaseId),r.sharedClientState=r.Wa(n),r.persistence=r.Ga(n),yield r.persistence.start(),r.localStore=r.za(n),r.gcScheduler=r.ja(n,r.localStore),r.indexBackfillerScheduler=r.Ha(n,r.localStore)})()}ja(n,r){return null}Ha(n,r){return null}za(n){return function MH(t,e,n,r){return new yhe(t,e,n,r)}(this.persistence,new RH,n.initialUser,this.serializer)}Ga(n){return new hA(x_.Zr,this.serializer)}Wa(n){return new UH}terminate(){var n=this;return v(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})(),Lu=(()=>{class t{initialize(n,r){var i=this;return v(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>o4(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=cfe.bind(null,i.syncEngine),yield HA(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Ghe}createDatastore(n){const r=Xh(n.databaseInfo.databaseId),i=new Ahe(n.databaseInfo);return new Mhe(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>o4(this.syncEngine,r,0),c=jH.D()?new jH:new bhe,new xhe(i,o,s,a,c);var i,o,s,a,c}createSyncEngine(n,r){return function(o,s,a,c,u,d,h){const p=new Jhe(o,s,a,c,u,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return v(function*(){var r,i,o;yield(o=v(function*(a){const c=K(a);j("RemoteStore","RemoteStore shutting down."),c.L_.add(5),yield Ru(c),c.k_.shutdown(),c.q_.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class H_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}class wfe{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tn.UNAUTHENTICATED,this.clientId=EB.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=v(function*(c){j("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(j("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Nu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function S0(t,e){return R0.apply(this,arguments)}function R0(){return R0=v(function*(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=v(function*(o){r.isEqual(o)||(yield PH(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),R0.apply(this,arguments)}function d4(t,e){return M0.apply(this,arguments)}function M0(){return(M0=v(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function P0(t){return x0.apply(this,arguments)}(t);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>KH(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>KH(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function x0(){return(x0=v(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield S0(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Nr("Error using user provided cache. Falling back to memory cache: "+e),yield S0(t,new Vu)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield S0(t,new Vu);var i;return t._offlineComponents})).apply(this,arguments)}function G_(t){return N0.apply(this,arguments)}function N0(){return(N0=v(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield d4(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield d4(t,new Lu))),t._onlineComponents})).apply(this,arguments)}function k0(){return(k0=v(function*(t){const e=yield G_(t),n=e.eventManager;return n.onListen=Xhe.bind(null,e.syncEngine),n.onUnlisten=efe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Zhe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tfe.bind(null,e.syncEngine),n})).apply(this,arguments)}function m4(t,e,n={}){const r=new nn;return t.asyncQueue.enqueueAndForget(v(function*(){return function(o,s,a,c,u){const d=new H_({next:p=>{d.Za(),s.enqueueAndForget(()=>function KA(t,e){return QA.apply(this,arguments)}(o,h)),p.fromCache&&"server"===c.source?u.reject(new B(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new XA(a,d,{includeMetadataChanges:!0,_a:!0});return function zA(t,e){return WA.apply(this,arguments)}(o,h)}(yield function ju(t){return k0.apply(this,arguments)}(t),t.asyncQueue,e,n,r)})),r.promise}function _4(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const y4=new Map;function F0(t,e,n){if(!n)throw new B(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v4(t){if(!Y.isDocumentKey(t))throw new B(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function I4(t){if(Y.isDocumentKey(t))throw new B(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function q_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":ee()}function De(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=q_(t);throw new B(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class w4{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new B(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new B(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Ofe(t,e,n,r){if(!0===e&&!0===r)throw new B(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=_4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ef{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w4({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w4(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Ale;switch(r.type){case"firstParty":return new Ple(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return v(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=y4.get(n);r&&(j("ComponentProvider","Removing Datastore"),y4.delete(n),r.terminate())}(this),Promise.resolve()}}class fn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fn(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class Pi extends fn{constructor(e,n,r){super(e,n,pu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Y(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function An(t,e,...n){if(t=ot(t),F0("collection","path",e),t instanceof ef){const r=Re.fromString(e,...n);return I4(r),new Pi(t,null,r)}{if(!(t instanceof Nt||t instanceof Pi))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return I4(r),new Pi(t.firestore,null,r)}}function cs(t,e,...n){if(t=ot(t),1===arguments.length&&(e=EB.newId()),F0("doc","path",e),t instanceof ef){const r=Re.fromString(e,...n);return v4(r),new Nt(t,null,new Y(r))}{if(!(t instanceof Nt||t instanceof Pi))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return v4(r),new Nt(t.firestore,t instanceof Pi?t.converter:null,new Y(r))}}class b4{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new DA(this,"async_queue_retry"),this.Vu=()=>{const r=U_();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=U_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=U_();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new nn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return v(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(n){if(!Yo(n))throw n;j("AsyncQueue","Operation failed with retryable error: "+n)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Pt("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=qA.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ee()}verifyOperationInProgress(){}wu(){var e=this;return v(function*(){let n;do{n=e.mu,yield n}while(n!==e.mu)})()}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Qe extends ef{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new b4,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return v(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new b4(n),e._firestoreClient=void 0,yield n}})()}}function Vfe(t,e){const r="string"==typeof t?t:e||"(default)",i=qo("object"==typeof t?t:db(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(()=>{const e=MU("firestore");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();o&&function kfe(t,e,n,r={}){var i;const o=(t=De(t,ef))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=tn.MOCK_USER;else{a=function Aoe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[km(JSON.stringify({alg:"none",type:"JWT"})),km(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new B(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new tn(u)}t._authCredentials=new Sle(new vB(a,c))}}(i,...o)}return i}function It(t){if(t._terminated)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function C4(t){var e,n,r;const i=t._freezeSettings(),o=(c=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new ade(t._databaseId,c,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_4(d.experimentalLongPollingOptions),d.useFetchStreams));var c,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new wfe(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}(t),t._firestoreClient}class Ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ca(wt.fromBase64String(e))}catch(n){throw new B(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ca(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Da{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new B(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bu{constructor(e){this._methodName=e}}class U0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}class z_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}const Ufe=/^__.*__$/;class jfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new ao(e,this.data,this.fieldMask,n,this.fieldTransforms):new vu(e,this.data,n,this.fieldTransforms)}}class A4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ao(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function S4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class W_{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new W_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Y_(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(S4(this.Cu)&&Ufe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Bfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xh(e)}Qu(e,n,r,i=!1){return new W_({Cu:e,methodName:n,qu:r,path:gt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Aa(t){const e=t._freezeSettings(),n=Xh(t._databaseId);return new Bfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function K_(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);z0("Data must be an object, but it was:",s,r);const a=P4(r,s);let c,u;if(o.merge)c=new Zn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const p=rf(e,h,n);if(!s.contains(p))throw new B(N.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);N4(d,p)||d.push(p)}c=new Zn(d),u=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=s.fieldTransforms;return new jfe(new hn(a),c,u)}class nf extends Bu{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nf}}function G0(t,e,n,r){const i=t.Qu(1,e,n);z0("Data must be an object, but it was:",i,r);const o=[],s=hn.empty();Jo(r,(c,u)=>{const d=Q_(e,c,n);u=ot(u);const h=i.Nu(d);if(u instanceof nf)o.push(d);else{const p=Sa(u,h);null!=p&&(o.push(d),s.set(d,p))}});const a=new Zn(o);return new A4(s,a,i.fieldTransforms)}function q0(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[rf(e,r,n)],c=[i];if(o.length%2!=0)throw new B(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push(rf(e,o[p])),c.push(o[p+1]);const u=[],d=hn.empty();for(let p=a.length-1;p>=0;--p)if(!N4(u,a[p])){const g=a[p];let _=c[p];_=ot(_);const I=s.Nu(g);if(_ instanceof nf)u.push(g);else{const E=Sa(_,I);null!=E&&(u.push(g),d.set(g,E))}}const h=new Zn(u);return new A4(d,h,s.fieldTransforms)}function Sa(t,e){if(x4(t=ot(t)))return z0("Unsupported field value:",e,t),P4(t,e);if(t instanceof Bu)return function(r,i){if(!S4(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Sa(a,i.Lu(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=ot(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return y$(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=ct.fromDate(r);return{timestampValue:Eu(i.serializer,o)}}if(r instanceof ct){const o=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Eu(i.serializer,o)}}if(r instanceof U0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ca)return{bytesValue:j$(i.serializer,r._byteString)};if(r instanceof Nt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:eA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof z_)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(c=>{if("number"!=typeof c)throw a.Bu("VectorValues must only contain numeric values.");return WD(a.serializer,c)})}}}}};var a;throw i.Bu(`Unsupported field value: ${q_(r)}`)}(t,e)}function P4(t,e){const n={};return LB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jo(t,(r,i)=>{const o=Sa(i,e.Mu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function x4(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof U0||t instanceof Ca||t instanceof Nt||t instanceof Bu||t instanceof z_)}function z0(t,e,n){if(!x4(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=q_(n);throw e.Bu("an object"===r?t+" a custom object":t+" "+r)}var i}function rf(t,e,n){if((e=ot(e))instanceof Da)return e._internalPath;if("string"==typeof e)return Q_(t,e);throw Y_("Field path arguments must be of type string or ",t,!1,void 0,n)}const $fe=new RegExp("[~\\*/\\[\\]]");function Q_(t,e,n){if(e.search($fe)>=0)throw Y_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Da(...e.split("."))._internalPath}catch{throw Y_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Y_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new B(N.INVALID_ARGUMENT,a+t+c)}function N4(t,e){return t.some(n=>n.isEqual(e))}class sf{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(J_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Hfe extends sf{data(){return super.data()}}function J_(t,e){return"string"==typeof e?Q_(t,e):e instanceof Da?e._internalPath:e._delegate._internalPath}class W0{}class af extends W0{}function Xr(t,e,...n){let r=[];e instanceof W0&&r.push(e),r=r.concat(n),function(o){const s=o.filter(c=>c instanceof $u).length,a=o.filter(c=>c instanceof cf).length;if(s>1||s>0&&a>0)throw new B(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class cf extends af{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new cf(e,n,r)}_apply(e){const n=this._parse(e);return L4(e._query,n),new fn(e.firestore,e.converter,qD(e._query,n))}_parse(e){const n=Aa(e.firestore);return function(o,s,a,c,u,d,h){let p;if(u.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new B(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){V4(h,d);const g=[];for(const _ of h)g.push(F4(c,o,_));p={arrayValue:{values:g}}}else p=F4(c,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||V4(h,d),p=function M4(t,e,n,r=!1){return Sa(n,t.Qu(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return Me.create(u,d,p)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function tr(t,e,n){const r=e,i=J_("where",t);return cf._create(i,r,n)}class $u extends W0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $u(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Ge.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)L4(s,c),s=qD(s,c)}(e._query,n),new fn(e.firestore,e.converter,qD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function F4(t,e,n){if("string"==typeof(n=ot(n))){if(""===n)throw new B(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GD(e)&&-1!==n.indexOf("/"))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!Y.isDocumentKey(r))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pa(t,new Y(r))}if(n instanceof Nt)return pa(t,n._key);throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${q_(n)}.`)}function V4(t,e){if(!Array.isArray(t)||0===t.length)throw new B(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L4(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new B(N.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class j4{convertValue(e,n="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>mt(s.doubleValue));return new z_(o)}convertGeoPoint(e){return new U0(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=d_(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Sh(e));default:return null}}convertTimestamp(e){const n=ro(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);ne(X$(r));const i=new fa(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(n)||Pt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function ty(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ra{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hu extends sf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ny(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(J_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ny extends Hu{data(e={}){return super.data(e)}}class Gu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ra(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ny(this._firestore,this._userDataWriter,r.key,r,new Ra(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new ny(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ra(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new ny(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ra(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:zfe(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}class us extends j4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ca(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Zr(t){t=De(t,fn);const e=De(t.firestore,Qe),n=It(e),r=new us(e);return function O4(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new B(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),m4(n,t._query).then(i=>new Gu(e,r,t,i))}function ry(t,e,n,...r){t=De(t,Nt);const i=De(t.firestore,Qe),o=Aa(i);let s;return s="string"==typeof(e=ot(e))||e instanceof Da?q0(o,"updateDoc",t._key,e,n,r):G0(o,"updateDoc",t._key,e),lf(i,[s.toMutation(t._key,_t.exists(!0))])}function Q0(t){return lf(De(t.firestore,Qe),[new Iu(t._key,_t.none())])}function uf(t,e){const n=De(t.firestore,Qe),r=cs(t),i=ty(t.converter,e);return lf(n,[K_(Aa(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,_t.exists(!1))]).then(()=>r)}function lf(t,e){return function(r,i){const o=new nn;return r.asyncQueue.enqueueAndForget(v(function*(){return function nfe(t,e,n){return a0.apply(this,arguments)}(yield function O0(t){return G_(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(It(t),e)}class npe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Aa(e)}set(e,n,r){this._verifyNotCommitted();const i=ls(e,this._firestore),o=ty(i.converter,n,r),s=K_(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,_t.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=ls(e,this._firestore);let s;return s="string"==typeof(n=ot(n))||n instanceof Da?q0(this._dataReader,"WriteBatch.update",o._key,n,r,i):G0(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ls(e,this._firestore);return this._mutations=this._mutations.concat(new Iu(n._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ls(t,e){if((t=ot(t)).firestore!==e)throw new B(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}!function(e,n=!0){su=tu,wi(new Jr("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Qe(new Rle(r.getProvider("auth-internal")),new xle(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new B(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),mr(yB,"4.7.3",e),mr(yB,"4.7.3","esm2017")}();const G4="@firebase/installations",X0="0.6.9",q4=1e4,z4=`w:${X0}`,W4="FIS_v2",spe="https://firebaseinstallations.googleapis.com/v1",ape=36e5,lo=new ra("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function K4(t){return t instanceof Yr&&t.code.includes("request-failed")}function Z0({projectId:t}){return`${spe}/projects/${t}/installations`}function Q4(t){return{token:t.token,requestStatus:2,expiresIn:dpe(t.expiresIn),creationTime:Date.now()}}function eS(t,e){return tS.apply(this,arguments)}function tS(){return(tS=v(function*(t,e){const r=(yield e.json()).error;return lo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function Y4({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nS(t){return rS.apply(this,arguments)}function rS(){return(rS=v(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function dpe(t){return Number(t.replace("s","000"))}function iS(){return(iS=v(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Z0(t),i=Y4(t),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:W4,appId:t.appId,sdkVersion:z4})},c=yield nS(()=>fetch(r,a));if(c.ok){const u=yield c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Q4(u.authToken)}}throw yield eS("Create Installation",c)})).apply(this,arguments)}function X4(t){return new Promise(e=>{setTimeout(e,t)})}const gpe=/^[cdef][\w-]{21}$/,oS="";function mpe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function _pe(t){return function ppe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return gpe.test(n)?n:oS}catch{return oS}}function qu(t){return`${t.appName}!${t.appId}`}const zu=new Map;function Z4(t,e){const n=qu(t);eG(n,e),function Ipe(t,e){const n=function tG(){return!Ma&&"BroadcastChannel"in self&&(Ma=new BroadcastChannel("[Firebase] FID Change"),Ma.onmessage=t=>{eG(t.data.key,t.data.fid)}),Ma}();n&&n.postMessage({key:t,fid:e}),function nG(){0===zu.size&&Ma&&(Ma.close(),Ma=null)}()}(n,e)}function eG(t,e){const n=zu.get(t);if(n)for(const r of n)r(e)}let Ma=null;const Epe="firebase-installations-database",wpe=1,Pa="firebase-installations-store";let sS=null;function aS(){return sS||(sS=GU(Epe,wpe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Pa)}})),sS}function oy(t,e){return cS.apply(this,arguments)}function cS(){return(cS=v(function*(t,e){const n=qu(t),i=(yield aS()).transaction(Pa,"readwrite"),o=i.objectStore(Pa),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&Z4(t,e.fid),e})).apply(this,arguments)}function uS(t){return lS.apply(this,arguments)}function lS(){return(lS=v(function*(t){const e=qu(t),r=(yield aS()).transaction(Pa,"readwrite");yield r.objectStore(Pa).delete(e),yield r.done})).apply(this,arguments)}function df(t,e){return dS.apply(this,arguments)}function dS(){return(dS=v(function*(t,e){const n=qu(t),i=(yield aS()).transaction(Pa,"readwrite"),o=i.objectStore(Pa),s=yield o.get(n),a=e(s);return void 0===a?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&Z4(t,a.fid),a})).apply(this,arguments)}function hS(t){return fS.apply(this,arguments)}function fS(){return fS=v(function*(t){let e;const n=yield df(t.appConfig,r=>{const i=function Tpe(t){return iG(t||{fid:mpe(),registrationStatus:0})}(r),o=function bpe(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(lo.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Cpe(t,e){return pS.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Dpe(t)}:{installationEntry:e}}(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===oS?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),fS.apply(this,arguments)}function pS(){return pS=v(function*(t,e){try{const n=yield function fpe(t,e){return iS.apply(this,arguments)}(t,e);return oy(t.appConfig,n)}catch(n){throw K4(n)&&409===n.customData.serverCode?yield uS(t.appConfig):yield oy(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),pS.apply(this,arguments)}function Dpe(t){return gS.apply(this,arguments)}function gS(){return(gS=v(function*(t){let e=yield rG(t.appConfig);for(;1===e.registrationStatus;)yield X4(100),e=yield rG(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield hS(t);return r||n}return e})).apply(this,arguments)}function rG(t){return df(t,e=>{if(!e)throw lo.create("installation-not-found");return iG(e)})}function iG(t){return function Ape(t){return 1===t.registrationStatus&&t.registrationTime+q4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function mS(){return(mS=v(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function Rpe(t,{fid:e}){return`${Z0(t)}/${e}/authTokens:generate`}(t,n),i=function J4(t,{refreshToken:e}){const n=Y4(t);return n.append("Authorization",function hpe(t){return`${W4} ${t}`}(e)),n}(t,n),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:z4,appId:t.appId}})},c=yield nS(()=>fetch(r,a));if(c.ok)return Q4(yield c.json());throw yield eS("Generate Auth Token",c)})).apply(this,arguments)}function _S(t){return yS.apply(this,arguments)}function yS(){return yS=v(function*(t,e=!1){let n;const r=yield df(t.appConfig,o=>{if(!sG(o))throw lo.create("not-registered");const s=o.authToken;if(!e&&function xpe(t){return 2===t.requestStatus&&!function Npe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ape}(t)}(s))return o;if(1===s.requestStatus)return n=function Mpe(t,e){return vS.apply(this,arguments)}(t,e),o;{if(!navigator.onLine)throw lo.create("app-offline");const a=function Ope(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(o);return n=function Ppe(t,e){return IS.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),yS.apply(this,arguments)}function vS(){return(vS=v(function*(t,e){let n=yield oG(t.appConfig);for(;1===n.authToken.requestStatus;)yield X4(100),n=yield oG(t.appConfig);const r=n.authToken;return 0===r.requestStatus?_S(t,e):r})).apply(this,arguments)}function oG(t){return df(t,e=>{if(!sG(e))throw lo.create("not-registered");return function kpe(t){return 1===t.requestStatus&&t.requestTime+q4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function IS(){return IS=v(function*(t,e){try{const n=yield function Spe(t,e){return mS.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield oy(t.appConfig,r),n}catch(n){if(!K4(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield oy(t.appConfig,r)}else yield uS(t.appConfig);throw n}}),IS.apply(this,arguments)}function sG(t){return void 0!==t&&2===t.registrationStatus}function ES(){return(ES=v(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield hS(e);return r?r.catch(console.error):_S(e).catch(console.error),n.fid})).apply(this,arguments)}function wS(){return wS=v(function*(t,e=!1){const n=t;return yield function Lpe(t){return TS.apply(this,arguments)}(n),(yield _S(n,e)).token}),wS.apply(this,arguments)}function TS(){return(TS=v(function*(t){const{registrationPromise:e}=yield hS(t);e&&(yield e)})).apply(this,arguments)}function DS(t){return lo.create("missing-app-config-values",{valueName:t})}const aG="installations",Hpe=t=>{const e=t.getProvider("app").getImmediate(),n=function Bpe(t){if(!t||!t.options)throw DS("App Configuration");if(!t.name)throw DS("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw DS(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:qo(e,"heartbeat"),_delete:()=>Promise.resolve()}},Gpe=t=>{const n=qo(t.getProvider("app").getImmediate(),aG).getImmediate();return{getId:()=>function Fpe(t){return ES.apply(this,arguments)}(n),getToken:i=>function Vpe(t){return wS.apply(this,arguments)}(n,i)}};(function qpe(){wi(new Jr(aG,Hpe,"PUBLIC")),wi(new Jr("installations-internal",Gpe,"PRIVATE"))})(),mr(G4,X0),mr(G4,X0,"esm2017");const sy="analytics",zpe="firebase_id",Wpe="origin",Kpe=6e4,Qpe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",AS="https://www.googletagmanager.com/gtag/js",on=new jm("@firebase/analytics"),Un=new ra("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Jpe(t){if(!t.startsWith(AS)){const e=Un.create("invalid-gtag-resource",{gtagURL:t});return on.warn(e.message),""}return t}function cG(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function SS(){return(SS=v(function*(t,e,n,r,i,o){const s=r[i];try{if(s)yield e[s];else{const c=(yield cG(n)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){on.error(a)}t("config",i,o)})).apply(this,arguments)}function RS(){return(RS=v(function*(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield cG(n);for(const c of s){const u=a.find(h=>h.measurementId===c),d=u&&e[u.appId];if(!d){o=[];break}o.push(d)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),t("event",r,i||{})}catch(o){on.error(o)}})).apply(this,arguments)}const sge=30,uG=new class cge{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function uge(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function MS(){return(MS=v(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:uge(r)},o=Qpe.replace("{app-id}",n),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const c=yield s.json();null!==(e=c.error)&&void 0!==e&&e.message&&(a=c.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function PS(){return(PS=v(function*(t,e=uG,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Un.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Un.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new pge;return setTimeout(v(function*(){a.abort()}),void 0!==n?n:Kpe),lG({appId:r,apiKey:i,measurementId:o},s,a,e)})).apply(this,arguments)}function lG(t,e,n){return xS.apply(this,arguments)}function xS(){return xS=v(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=uG){var o;const{appId:s,measurementId:a}=t;try{yield function hge(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(Un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(c){if(a)return on.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw c}try{const c=yield function lge(t){return MS.apply(this,arguments)}(t);return i.deleteThrottleMetadata(s),c}catch(c){const u=c;if(!function fge(t){if(!(t instanceof Yr&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(i.deleteThrottleMetadata(s),a)return on.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:s,measurementId:a};throw c}const d=503===Number(null===(o=u?.customData)||void 0===o?void 0:o.httpStatus)?LU(n,i.intervalMillis,sge):LU(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(s,h),on.debug(`Calling attemptFetch again in ${d} millis`),lG(t,h,r,i)}}),xS.apply(this,arguments)}class pge{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let NS,jS;function OS(){return(OS=v(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const o=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function BS(){return(BS=v(function*(){if(!Lm())return on.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield eb()}catch(t){return on.warn(Un.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function $S(){return $S=v(function*(t,e,n,r,i,o,s){var a;const c=function dge(t){return PS.apply(this,arguments)}(t);c.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&on.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>on.error(g)),e.push(c);const u=function Ege(){return BS.apply(this,arguments)}().then(g=>{if(g)return r.getId()}),[d,h]=yield Promise.all([c,u]);(function oge(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(AS)&&n.src.includes(t))return n;return null})(o)||function Zpe(t,e){const n=function Xpe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Jpe}),r=document.createElement("script"),i=`${AS}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(o,d.measurementId),jS&&(i("consent","default",jS),function dG(t){jS=t}(void 0)),i("js",new Date);const p=null!==(a=s?.config)&&void 0!==a?a:{};return p[Wpe]="firebase",p.update=!0,null!=h&&(p[zpe]=h),i("config",d.measurementId,p),NS&&(i("set",NS),function hG(t){NS=t}(void 0)),d.measurementId}),$S.apply(this,arguments)}class Tge{constructor(e){this.app=e}_delete(){return delete xi[this.app.options.appId],Promise.resolve()}}let xi={},fG=[];const pG={};let mG,Ni,ay="dataLayer",HS=!1;function Cge(t,e,n){!function bge(){const t=[];if(ZT()&&t.push("This is a browser extension environment."),kU()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Un.create("invalid-analytics-context",{errorInfo:e});on.warn(n.message)}}();const r=t.options.appId;if(!r)throw Un.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Un.create("no-api-key");on.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xi[r])throw Un.create("already-exists",{id:r});if(!HS){!function ege(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(ay);const{wrappedGtag:o,gtagCore:s}=function ige(t,e,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function rge(t,e,n,r){function o(){return o=v(function*(s,...a){try{if("event"===s){const[c,u]=a;yield function nge(t,e,n,r,i){return RS.apply(this,arguments)}(t,e,n,c,u)}else if("config"===s){const[c,u]=a;yield function tge(t,e,n,r,i,o){return SS.apply(this,arguments)}(t,e,n,r,c,u)}else if("consent"===s){const[c,u]=a;t("consent",c,u)}else if("get"===s){const[c,u,d]=a;t("get",c,u,d)}else if("set"===s){const[c]=a;t("set",c)}else t(s,...a)}catch(c){on.error(c)}}),o.apply(this,arguments)}return function i(s){return o.apply(this,arguments)}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(xi,fG,pG,ay,"gtag");Ni=o,mG=s,HS=!0}return xi[r]=function wge(t,e,n,r,i,o,s){return $S.apply(this,arguments)}(t,fG,pG,e,mG,ay,n),new Tge(t)}function GS(){return(GS=v(function*(){if(ZT()||!kU()||!Lm())return!1;try{return yield eb()}catch{return!1}})).apply(this,arguments)}const _G="@firebase/analytics";!function Mge(){wi(new Jr(sy,(e,{options:n})=>Cge(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),wi(new Jr("analytics-internal",function t(e){try{const n=e.getProvider(sy).getImmediate();return{logEvent:(r,i,o)=>function Rge(t,e,n,r){t=ot(t),function gge(t,e,n,r,i){return OS.apply(this,arguments)}(Ni,xi[t.app.options.appId],e,n,r).catch(i=>on.error(i))}(n,r,i,o)}}catch(n){throw Un.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),mr(_G,"0.10.8"),mr(_G,"0.10.8","esm2017")}();const Pge={apiKey:"AIzaSyCPru2yZ5eybekTPaiT6TLC5qY9s5fAAf4",authDomain:"masni-organizer.firebaseapp.com",projectId:"masni-organizer",storageBucket:"masni-organizer.firebasestorage.app",messagingSenderId:"348994153152",appId:"1:348994153152:web:802fb8fbc50afd3d2f1b25",measurementId:"G-SWYDY4FHRN"};let ds=(()=>{class t{app;auth;db;constructor(){this.app=KU(Pge),function Sge(){return GS.apply(this,arguments)}().then(n=>{n&&function Dge(t=db()){const e=qo(t=ot(t),sy);return e.isInitialized()?e.getImmediate():function Age(t,e={}){const n=qo(t,sy);if(n.isInitialized()){const i=n.getImmediate();if(ia(e,n.getOptions()))return i;throw Un.create("already-initialized")}return n.initialize({options:e})}(t)}(this.app)}).catch(n=>{console.error("Analytics not supported:",n)}),this.auth=Ci(this.app),this.db=Vfe(this.app)}signup(n,r,i){var o=this;return v(function*(){try{const a=(yield function Vce(t,e,n){return OC.apply(this,arguments)}(o.auth,n,r)).user;yield function $ce(t,e){return $C.apply(this,arguments)}(a,{displayName:i}),yield uf(An(o.db,"users"),{uid:a.uid,email:a.email,name:i}),yield o.sendVerificationEmail(),console.log("Signup successful, displayName set, and verification email sent.")}catch(s){throw o.handleError(s),new Error(s instanceof Error?s.message:"An unknown error occurred during signup")}})()}login(n,r){var i=this;return v(function*(){try{yield function Lce(t,e,n){return Ti(t.app)?Promise.reject(en(t)):vC(ot(t),Nj.credential(e,n)).catch(function(){var r=v(function*(i){throw"auth/password-does-not-meet-requirements"===i.code&&AC(t),i});return function(i){return r.apply(this,arguments)}}())}(i.auth,n,r),console.log("Login successful")}catch(o){throw i.handleError(o),new Error(o instanceof Error?o.message:"An unknown error occurred during login")}})()}logout(){var n=this;return v(function*(){try{yield function Yce(t){return ot(t).signOut()}(n.auth),console.log("Logout successful")}catch(r){throw n.handleError(r),new Error(r instanceof Error?r.message:"An unknown error occurred during logout")}})()}isLoggedIn(){return null!==this.auth.currentUser}resetPassword(n){var r=this;return v(function*(){try{yield function kce(t,e,n){return RC.apply(this,arguments)}(r.auth,n),console.log("Password reset email sent successfully")}catch(i){throw r.handleError(i),new Error(i instanceof Error?i.message:"An unknown error occurred during password reset")}})()}sendVerificationEmail(){var n=this;return v(function*(){const r=n.auth.currentUser;if(r)try{yield function jce(t,e){return UC.apply(this,arguments)}(r),console.log("Verification email sent.")}catch(i){throw n.handleError(i),new Error(i instanceof Error?i.message:"An unknown error occurred while sending the verification email.")}})()}isEmailVerified(){const n=this.auth.currentUser;return!!n&&n.emailVerified}addAppointment(n){var r=this;return v(function*(){const i=Ci().currentUser;if(!i)throw new Error("User not authenticated");const o=i.uid;if(!n.date)throw new Error("Appointment date is required");try{const s=yield uf(An(r.db,`appointments/${o}/userAppointments`),{date:n.date,startTime:n.startTime,endTime:n.endTime,title:n.title,description:n.description});console.log("Appointment added with ID:",s.id)}catch(s){throw r.handleError(s),new Error("Error adding appointment: "+(s instanceof Error?s.message:"Unknown error"))}})()}getAppointments(){const n=Ci().currentUser;if(!n)throw new Error("User not authenticated");const o=Xr(An(this.db,`appointments/${n.uid}/userAppointments`));return new dt(s=>{Zr(o).then(a=>{const c=a.docs.map(u=>({id:u.id,...u.data()}));s.next(c),s.complete()}).catch(a=>{s.error(a)})})}handleError(n){n instanceof Error?console.error("Error:",n.message):console.error("Error:",n)}getAppointmentsByEmail(n){const r=An(this.db,"users");An(this.db,"appointments");const i=Xr(r,tr("email","==",n));return new dt(o=>{Zr(i).then(s=>{if(s.empty)return void o.error("User not found");const c=s.docs[0].data().uid;return Zr(Xr(An(this.db,`appointments/${c}/userAppointments`)))}).then(s=>{if(!s||s.empty)return o.next([]),void o.complete();const a=s.docs.map(c=>c.data());o.next(a),o.complete()}).catch(s=>{o.error(s)})})}deleteAppointment(n){var r=this;return v(function*(){const i=Ci().currentUser;if(!i)throw new Error("User not authenticated");const s=cs(r.db,`appointments/${i.uid}/userAppointments/${n}`);try{yield Q0(s),console.log(`Appointment with ID ${n} deleted successfully`)}catch(a){throw console.error("Error deleting appointment:",a),a}})()}addFoodItem(n){var r=this;return v(function*(){try{const i=Ci().currentUser;if(!i)throw new Error("User is not authenticated");const o=yield uf(An(r.db,"foodItems"),{name:n.name,description:n.description,userId:n.userId,userEmail:i.email,used:n.used||!1});console.log("Food item added with ID:",o.id),n.id=o.id}catch(i){console.error("Error adding food item:",i)}})()}getFoodItems(n){var r=this;return v(function*(){const o=Xr(An(r.db,"foodItems"),tr("userEmail","==",n)),s=yield Zr(o),a=[];return s.forEach(c=>{a.push({id:c.id,...c.data()})}),a})()}updateFoodItem(n,r){var i=this;return v(function*(){const o=cs(i.db,"foodItems",n);yield ry(o,{name:r.name,description:r.description,userId:r.userId,used:r.used}),console.log("Food item updated:",n)})()}deleteFoodItem(n){var r=this;return v(function*(){const i=cs(r.db,"foodItems",n);yield Q0(i),console.log("Food item deleted:",n)})()}clearFoodItems(n){var r=this;return v(function*(){const i=yield r.getFoodItems(n);for(const o of i)o.id?yield r.deleteFoodItem(o.id):console.error("Food item does not have a valid ID:",o)})()}addShoppingListItem(n){var r=this;return v(function*(){try{const i=Ci().currentUser;if(!i)throw new Error("User is not authenticated");const o=yield uf(An(r.db,"shoppingListItems"),{name:n.name,userId:n.userId,userEmail:i.email,used:n.used||!1});console.log("Shopping List Item added with ID:",o.id),n.id=o.id}catch(i){console.error("Error adding shopping list item:",i)}})()}getShoppingListItems(n){var r=this;return v(function*(){const o=Xr(An(r.db,"shoppingListItems"),tr("userEmail","==",n)),s=yield Zr(o),a=[];return s.forEach(c=>{a.push({id:c.id,...c.data()})}),a})()}updateShoppingListItem(n,r){var i=this;return v(function*(){const o=cs(i.db,"shoppingListItems",n);yield ry(o,{name:r.name,userId:r.userId,used:r.used}),console.log("Shopping list item updated:",n)})()}deleteShoppingListItem(n){var r=this;return v(function*(){const i=cs(r.db,"shoppingListItems",n);yield Q0(i),console.log("Shopping List item deleted:",n)})()}clearShoppingListItems(n){var r=this;return v(function*(){const i=yield r.getShoppingListItems(n);for(const o of i)o.id?yield r.deleteShoppingListItem(o.id):console.error("Shopping List item does not have a valid ID:",o)})()}searchUsers(n){return Zr(Xr(An(this.db,"users"),tr("email","==",n))).then(i=>i.empty?[]:i.docs.map(o=>o.data())).catch(i=>{throw console.error("Error getting users:",i),new Error("Error retrieving users")})}sendInvitation(n){var r=this;return v(function*(){const i=r.auth.currentUser;if(!i)throw new Error("User not authenticated");try{yield uf(An(r.db,"invitations"),{senderEmail:i.email,recipientEmail:n,status:"pending",timestamp:ct.now()}),console.log(`Invitation sent to ${n}`)}catch(o){throw console.error("Error sending invitation:",o),new Error("Error sending invitation")}})()}getReceivedInvitations(){var n=this;return v(function*(){const r=n.auth.currentUser;if(!r)throw new Error("User not authenticated");const o=Xr(An(n.db,"invitations"),tr("recipientEmail","==",r.email),tr("status","==","pending"));try{return(yield Zr(o)).docs.map(a=>({id:a.id,...a.data()}))}catch(s){throw console.error("Error fetching received invitations:",s),new Error("Error fetching invitations")}})()}acceptInvitation(n){var r=this;return v(function*(){const i=cs(r.db,"invitations",n);try{yield ry(i,{status:"accepted"}),console.log(`Invitation ${n} accepted`)}catch(o){throw console.error("Error accepting invitation:",o),new Error("Error accepting invitation")}})()}declineInvitation(n){var r=this;return v(function*(){const i=cs(r.db,"invitations",n);try{yield ry(i,{status:"declined"}),console.log(`Invitation ${n} declined`)}catch(o){throw console.error("Error declining invitation:",o),new Error("Error declining invitation")}})()}getSharedUsers(){var n=this;return v(function*(){const r=n.auth.currentUser;if(!r)throw new Error("User not authenticated");const i=An(n.db,"invitations"),o=An(n.db,"users");try{const s=Xr(i,tr("senderEmail","==",r.email),tr("status","==","accepted")),a=yield Zr(s),c=Xr(i,tr("recipientEmail","==",r.email),tr("status","==","accepted")),u=yield Zr(c),d=[...a.docs.map(g=>g.data().recipientEmail),...u.docs.map(g=>g.data().senderEmail)],p=[...new Set(d)].map(function(){var g=v(function*(_){const I=Xr(o,tr("email","==",_)),A=(yield Zr(I)).docs[0];return A?{email:_,name:A.data().name||"Unknown"}:{email:_,name:"Unknown"}});return function(_){return g.apply(this,arguments)}}());return yield Promise.all(p)}catch(s){throw console.error("Error fetching shared users:",s),new Error("Error fetching shared users")}})()}revokeAccess(n){var r=this;return v(function*(){const i=r.auth.currentUser;if(!i)return void console.error("No authenticated user");const s=Xr(An(r.db,"invitations"),tr("status","==","accepted"),tr("senderEmail","in",[i.email,n]),tr("recipientEmail","in",[i.email,n]));try{const a=yield Zr(s);if(console.log("Revoke Query Snapshot:",a),a.empty)console.log("No access found to revoke");else{const c=function ipe(t){return It(t=De(t,Qe)),new npe(t,e=>lf(t,e))}(r.db);a.docs.forEach(u=>{c.update(u.ref,{status:"revoked"})}),yield c.commit(),console.log(`Access revoked for ${n}`)}}catch(a){throw console.error("Error revoking access:",a),new Error("Error revoking access")}})()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xge(t,e){1&t&&(H(0,"label",13),te(1,"Name:"),q())}function Nge(t,e){if(1&t){const n=Kt();H(0,"input",14),Yn("ngModelChange",function(i){yt(n);const o=ye();return dr(o.name,i)||(o.name=i),vt(i)}),q()}2&t&&Qn("ngModel",ye().name)}function Oge(t,e){1&t&&(H(0,"label",15),te(1,"Password:"),q())}function kge(t,e){if(1&t){const n=Kt();H(0,"input",16),Yn("ngModelChange",function(i){yt(n);const o=ye();return dr(o.password,i)||(o.password=i),vt(i)}),q()}2&t&&Qn("ngModel",ye().password)}function Fge(t,e){if(1&t&&(H(0,"p",17),te(1),q()),2&t){const n=ye();Z(),Dr(n.errorMessage)}}function Vge(t,e){if(1&t){const n=Kt();H(0,"button",18),be("click",function(){return yt(n),vt(ye().onForgotPassword())}),te(1,"Forgot Password?"),q()}}function Lge(t,e){if(1&t){const n=Kt();H(0,"button",18),be("click",function(){return yt(n),vt(ye().onSignUp())}),te(1,"Don't have an account?"),Gi(2,"br"),te(3," Sign Up"),q()}}function Uge(t,e){if(1&t){const n=Kt();H(0,"button",18),be("click",function(){return yt(n),vt(ye().onBackToLogin())}),te(1,"Back to Login"),q()}}function jge(t,e){1&t&&(H(0,"p"),te(1," A verification email will be sent to your email address. Please check your inbox. "),q())}let Bge=(()=>{class t{router;firebaseService;email="";password="";name="";errorMessage="";isLoginMode=!0;isSignUpMode=!1;constructor(n,r){this.router=n,this.firebaseService=r}login(){this.isLoginMode?this.firebaseService.login(this.email,this.password).then(()=>{this.firebaseService.isEmailVerified()?this.router.navigate(["/home"]).catch(n=>{console.error("Navigation to home failed:",n)}):this.errorMessage="Please verify your email before logging in."}).catch(n=>{this.errorMessage=n.message}):this.isSignUpMode?this.signUp():this.firebaseService.resetPassword(this.email).then(()=>{this.errorMessage="",alert("Password reset email sent.")}).catch(n=>{this.errorMessage=n.message})}signUp(){this.name&&this.email&&this.password?this.firebaseService.signup(this.email,this.password,this.name).then(()=>{this.errorMessage="",this.router.navigate(["/login"])}).catch(n=>{this.errorMessage=n.message}):this.errorMessage="Please fill in all fields!"}onForgotPassword(){this.isLoginMode=!1,this.isSignUpMode=!1}onBackToLogin(){this.isLoginMode=!0,this.isSignUpMode=!1}onSignUp(){this.isLoginMode=!1,this.isSignUpMode=!0}static \u0275fac=function(r){return new(r||t)(U(Rr),U(ds))};static \u0275cmp=ni({type:t,selectors:[["app-login"]],standalone:!0,features:[gi],decls:20,vars:12,consts:[[1,"login-container"],[3,"submit"],["for","name",4,"ngIf"],["type","text","id","name","name","name","required","",3,"ngModel","ngModelChange",4,"ngIf"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password",4,"ngIf"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange",4,"ngIf"],["type","submit"],["class","error",4,"ngIf"],[1,"reset-password"],[3,"click",4,"ngIf"],[4,"ngIf"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],[1,"error"],[3,"click"]],template:function(r,i){1&r&&(H(0,"div",0)(1,"h2"),te(2),q(),H(3,"form")(4,"form",1),be("submit",function(){return i.isSignUpMode?i.signUp():i.login()}),it(5,xge,2,0,"label",2)(6,Nge,1,1,"input",3),H(7,"label",4),te(8,"Email:"),q(),H(9,"input",5),Yn("ngModelChange",function(s){return dr(i.email,s)||(i.email=s),s}),q(),it(10,Oge,2,0,"label",6)(11,kge,1,1,"input",7),H(12,"button",8),te(13),q()(),it(14,Fge,2,1,"p",9),H(15,"div",10),it(16,Vge,2,0,"button",11)(17,Lge,4,0,"button",11)(18,Uge,2,0,"button",11)(19,jge,2,0,"p",12),q()()()),2&r&&(Z(2),Dr(i.isLoginMode?"Login":i.isSignUpMode?"Sign Up":"Reset Password"),Z(3),_e("ngIf",i.isSignUpMode),Z(),_e("ngIf",i.isSignUpMode),Z(3),Qn("ngModel",i.email),Z(),_e("ngIf",i.isLoginMode||i.isSignUpMode),Z(),_e("ngIf",i.isLoginMode||i.isSignUpMode),Z(2),qi(" ",i.isLoginMode?"Login":i.isSignUpMode?"Sign Up":"Send Reset Link"," "),Z(),_e("ngIf",i.errorMessage),Z(2),_e("ngIf",i.isLoginMode),Z(),_e("ngIf",i.isLoginMode),Z(),_e("ngIf",!i.isLoginMode),Z(),_e("ngIf",i.isSignUpMode&&!i.errorMessage))},dependencies:[Zd,zT,jo,Jc,NT,Xd,ta,Jd,zs,qs],styles:[".login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:85%;max-width:350px;margin:0 auto;padding:2rem;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 8px #0000001a;background-color:#fff;text-align:center}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#333;font-size:1.8rem;font-weight:600}.login-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#555}.login-container[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:95%;padding:.75rem;margin-bottom:1.5rem;border:1px solid #ccc;border-radius:4px;font-size:1rem;transition:border-color .3s}.login-container[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus, .login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.login-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;width:100%;padding:.75rem;border:none;border-radius:4px;background-color:#0075ff;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s,tranform .3s;margin-bottom:1rem;box-shadow:0 4px 6px #0003}.login-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}.login-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(2px)}.login-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d9534f;margin-top:1rem;font-weight:700;text-align:center}.reset-password[_ngcontent-%COMP%]{margin-top:1rem}.reset-password[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:none;border-radius:4px;background-color:#6da7e9;color:#fff;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s,tranform .3s;margin-bottom:1rem;box-shadow:0 4px 6px #0003}.reset-password[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background-color:#6da7e9}.reset-password[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(2px)}@media (max-width: 600px){.login-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:90%}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.login-container[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.9rem;padding:.65rem}}"]})}return t})();const $ge=()=>["/agenda"],Hge=()=>["/add"],Gge=()=>["/foodplanner"],qge=()=>["/shopping-list"];let zge=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ni({type:t,selectors:[["app-home"]],standalone:!0,features:[gi],decls:16,vars:8,consts:[[1,"tile-container"],[1,"tile",3,"routerLink"]],template:function(r,i){1&r&&(H(0,"div",0)(1,"div",1)(2,"h1"),te(3,"Agenda"),q()()(),H(4,"div",0)(5,"div",1)(6,"h1"),te(7,"Add Appointment"),q()()(),H(8,"div",0)(9,"div",1)(10,"h1"),te(11,"Foodplanner"),q()()(),H(12,"div",0)(13,"div",1)(14,"h1"),te(15,"Shopping List"),q()()()),2&r&&(Z(),_e("routerLink",Lc(4,$ge)),Z(4),_e("routerLink",Lc(5,Hge)),Z(4),_e("routerLink",Lc(6,Gge)),Z(4),_e("routerLink",Lc(7,qge)))},dependencies:[zd],styles:[".tile-container[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));grid-gap:20px;margin:0 auto;padding:1rem;max-width:80%}.tile[_ngcontent-%COMP%]{text-align:center;padding:1.5rem;background-color:#6da7e9;border-radius:15px;box-shadow:0 4px 6px #0003;color:#fff;transition:background-color .3s,transform .3s}.tile[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer}.tile[_ngcontent-%COMP%]:active{transform:translateY(2px)}.tile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem;margin:0}@media (max-width: 1024px){.tile-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr));padding:1rem}}@media (max-width: 768px){.tile-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));padding:.5rem}.tile[_ngcontent-%COMP%]{padding:1.2rem}.tile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 480px){.tile-container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:.5rem}.tile[_ngcontent-%COMP%]{padding:1rem}.tile[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1rem}}"]})}return t})();Math.pow(10,8);const IG=Symbol.for("constructDateFrom");function hf(t,e){return"function"==typeof t?t(e):t&&"object"==typeof t&&IG in t?t[IG](e):t instanceof Date?new t.constructor(e):new Date(e)}function cy(t,e){return hf(e||t,t)}function EG(t,...e){const n=hf.bind(null,t||e.find(r=>"object"==typeof r));return e.map(n)}function wG(t,e){const n=cy(t,e?.in);return n.setHours(0,0,0,0),n}function TG(t,e,n){const[r,i]=EG(n?.in,t,e);return+wG(r)==+wG(i)}function bG(t,e,n){const r=cy(t,n?.in);if(isNaN(e))return hf(n?.in||t,NaN);if(!e)return r;const i=r.getDate(),o=hf(n?.in||t,r.getTime());return o.setMonth(r.getMonth()+e+1,0),i>=o.getDate()?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}const eme=()=>["/add"],tme=(t,e,n)=>({date:t,startTime:e,endTime:n});function nme(t,e){1&t&&(H(0,"div",9),te(1," \u{1f4c5} "),q())}function rme(t,e){if(1&t){const n=Kt();H(0,"div",6),be("click",function(){const i=yt(n).$implicit;return vt(ye(2).openDay(i))}),te(1),Mo(2,"date"),H(3,"div",7),te(4),Mo(5,"date"),q(),it(6,nme,2,0,"div",8),q()}if(2&t){const n=e.$implicit,r=ye(2);Bs("today",r.isToday(n)),Z(),qi(" ",Po(2,5,n,"d")," "),Z(3),Dr(Po(5,8,n,"EEE")),Z(2),_e("ngIf",r.hasAppointments(n))}}function ime(t,e){if(1&t){const n=Kt();H(0,"div",2)(1,"h2"),te(2),Mo(3,"date"),q(),H(4,"button",3),be("click",function(){return yt(n),vt(ye().previousMonth())}),te(5,"Previous Month"),q(),H(6,"button",3),be("click",function(){return yt(n),vt(ye().nextMonth())}),te(7,"Next Month"),q(),H(8,"div",4),it(9,rme,7,11,"div",5),q()()}if(2&t){const n=ye();Z(2),Dr(Po(3,2,n.currentMonth,"MMMM yyyy")),Z(7),_e("ngForOf",n.daysInMonth)}}function ome(t,e){if(1&t){const n=Kt();H(0,"button",3),be("click",function(){yt(n);const i=ye(2).$implicit;return vt(ye(4).confirmDelete(i))}),te(1,"Delete"),q()}}function sme(t,e){if(1&t){const n=Kt();H(0,"div",23),be("click",function(){yt(n);const i=ye().$implicit;return vt(ye(4).selectAppointment(i))}),H(1,"strong"),te(2),q(),H(3,"p"),te(4),q(),H(5,"div",24)(6,"span"),te(7),Mo(8,"date"),q(),H(9,"span"),te(10),Mo(11,"date"),q()(),it(12,ome,2,0,"button",25),q()}if(2&t){const n=ye().$implicit,r=ye(4);Z(2),Dr(n.title),Z(2),Dr(n.description),Z(3),qi("Start: ",Po(8,5,r.convertToDate(r.selectedDay,n.startTime),"HH:mm"),""),Z(3),qi("End: ",Po(11,8,r.convertToDate(r.selectedDay,n.endTime),"HH:mm"),""),Z(2),_e("ngIf",r.isSelected(n))}}function ame(t,e){if(1&t&&(H(0,"div"),it(1,sme,13,11,"div",22),q()),2&t){const n=e.$implicit,r=ye(2).$implicit,i=ye(2);Z(),_e("ngIf",i.isTimeInSlot(n,r))}}function cme(t,e){if(1&t&&(H(0,"div",20),it(1,ame,2,1,"div",21),q()),2&t){const n=ye(3);Z(),_e("ngForOf",n.appointmentsForSelectedDay)}}function ume(t,e){1&t&&(H(0,"div"),te(1," No appointments for this time slot. "),q())}function lme(t,e){if(1&t&&(H(0,"div",13)(1,"div",14)(2,"span",15),te(3),q(),H(4,"div",16)(5,"button",17),Mo(6,"date"),te(7," + "),q()()(),it(8,cme,2,1,"div",18)(9,ume,2,0,"div",19),q()),2&t){const n=e.$implicit,r=ye(2);Z(3),Dr(n.label),Z(2),_e("routerLink",Lc(8,eme))("queryParams",C1(9,tme,Po(6,5,r.selectedDay,"yyyy-MM-dd"),n.startTime,n.endTime)),Z(3),_e("ngIf",r.areAppointmentsInTimeSlot(n)),Z(),_e("ngIf",!r.areAppointmentsInTimeSlot(n))}}function dme(t,e){if(1&t){const n=Kt();H(0,"div",10)(1,"button",3),be("click",function(){return yt(n),vt(ye().closeDay())}),te(2,"Back to Month View"),q(),H(3,"h2"),te(4),Mo(5,"date"),q(),H(6,"div",11),it(7,lme,10,13,"div",12),q()()}if(2&t){const n=ye();Z(4),Dr(Po(5,2,n.selectedDay,"EEEE, MMM d, yyyy")),Z(3),_e("ngForOf",n.timeSlots)}}let hme=(()=>{class t{firebaseService;route;currentMonth=new Date;daysInMonth=[];selectedDay=null;timeSlots=[];appointments=[];appointmentsForSelectedDay=[];selectedAppointmentId=null;sharedUsers=[];constructor(n,r){this.firebaseService=n,this.route=r}ngOnInit(){this.loadAppointments(),this.route.queryParams.subscribe(n=>{n.day&&(this.selectedDay=new Date(n.day))}),this.generateMonthDays()}generateMonthDays(){const n=function Qge(t,e){const n=cy(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}(this.currentMonth),r=function Yge(t,e){const n=cy(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}(this.currentMonth);this.daysInMonth=function Xge(t,e){const{start:n,end:r}=function Jge(t,e){const[n,r]=EG(t,e.start,e.end);return{start:n,end:r}}(e?.in,t);let i=+n>+r;const o=i?+n:+r,s=i?r:n;s.setHours(0,0,0,0);let a=e?.step??1;if(!a)return[];a<0&&(a=-a,i=!i);const c=[];for(;+s<=o;)c.push(hf(n,s)),s.setDate(s.getDate()+a),s.setHours(0,0,0,0);return i?c.reverse():c}({start:n,end:r})}loadAppointments(){this.firebaseService.getAppointments().subscribe({next:n=>{this.appointments=n,console.log("Loaded current user appointments:",JSON.stringify(this.appointments,null,2)),this.selectedDay&&this.openDay(this.selectedDay),this.loadSharedUserAppointments()},error:n=>{console.error("Error loading appointments for current user:",n)}})}loadSharedUserAppointments(){this.firebaseService.getSharedUsers().then(n=>{this.sharedUsers=n,this.sharedUsers.forEach(r=>{this.firebaseService.getAppointmentsByEmail(r.email).subscribe({next:i=>{console.log(`Loaded appointments for ${r.email}:`,i),this.appointments=[...this.appointments,...i]},error:i=>{console.error(`Error loading appointments for ${r.email}:`,i)}})})}).catch(n=>{console.error("Error loading shared users:",n)})}isToday(n){const r=new Date;return n.toDateString()===r.toDateString()}hasAppointments(n){return this.appointments.some(r=>TG(r.date.toDate(),n))}openDay(n){this.selectedDay=n,this.generateTimeSlots(),this.updateAppointmentsForSelectedDay()}closeDay(){this.selectedDay=null,this.appointmentsForSelectedDay=[]}generateTimeSlots(){this.timeSlots=Array.from({length:15},(n,r)=>{const i=(7+r).toString().padStart(2,"0");return{label:`${i}:00 - ${parseInt(i)+1}:00`,startTime:`${i}:00`,endTime:`${(parseInt(i)+1).toString().padStart(2,"0")}:00`}})}isTimeInSlot(n,r){const i=new Date(`1970-01-01T${n.startTime.padStart(5,"0")}:00`),o=new Date(`1970-01-01T${n.endTime.padStart(5,"0")}:00`),s=new Date(`1970-01-01T${r.startTime.padStart(5,"0")}:00`);return i<new Date(`1970-01-01T${r.endTime.padStart(5,"0")}:00`)&&o>s}previousMonth(){this.currentMonth=function Zge(t,e,n){return bG(t,-e,n)}(this.currentMonth,1),this.generateMonthDays()}nextMonth(){this.currentMonth=bG(this.currentMonth,1),this.generateMonthDays()}updateAppointmentsForSelectedDay(){this.appointmentsForSelectedDay=this.getAppointmentsForSelectedDay()}getAppointmentsForSelectedDay(){if(!this.selectedDay)return[];const n=new Date(this.selectedDay).setHours(0,0,0,0);return console.log("Selected Day:",n),this.appointments.filter(r=>{const i=r.date.toDate().setHours(0,0,0,0);return console.log("Checking appointment date:",i),TG(i,n)})}areAppointmentsInTimeSlot(n){return this.appointmentsForSelectedDay.some(r=>this.isTimeInSlot(r,n))}convertToDate(n,r){const[i,o]=r.split(":").map(a=>parseInt(a,10)),s=new Date(n);return s.setHours(i,o,0,0),s}selectAppointment(n){console.log("Selected appointment ID:",n.id),this.selectedAppointmentId=this.selectedAppointmentId===n.id?null:n.id}confirmDelete(n){n.id?confirm(`Are you sure you want to delete the appointment "${n.title}"?`)&&this.firebaseService.deleteAppointment(n.id).then(()=>{console.log("Appointment deleted"),this.appointments=this.appointments.filter(i=>i.id!==n.id),this.updateAppointmentsForSelectedDay()}).catch(i=>{console.error("Error deleting appointment:",i)}):alert("You can only delete your own appointments.")}isSelected(n){return this.selectedAppointmentId===n.id}static \u0275fac=function(r){return new(r||t)(U(ds),U(Uo))};static \u0275cmp=ni({type:t,selectors:[["app-agenda"]],standalone:!0,features:[gi],decls:2,vars:2,consts:[["class","month-view",4,"ngIf"],["class","day-view",4,"ngIf"],[1,"month-view"],[1,"normal-button",3,"click"],[1,"grid"],["class","day",3,"today","click",4,"ngFor","ngForOf"],[1,"day",3,"click"],[1,"day-abbreviation"],["class","appointment-indicator",4,"ngIf"],[1,"appointment-indicator"],[1,"day-view"],[1,"time-slots"],["class","time-slot",4,"ngFor","ngForOf"],[1,"time-slot"],[1,"time-label"],[1,"time-text"],[1,"add-button-container"],[1,"add-button",3,"routerLink","queryParams"],["class","appointments",4,"ngIf"],[4,"ngIf"],[1,"appointments"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],[1,"appointment-times"],["class","normal-button",3,"click",4,"ngIf"]],template:function(r,i){1&r&&it(0,ime,10,5,"div",0)(1,dme,8,5,"div",1),2&r&&(_e("ngIf",!i.selectedDay),Z(),_e("ngIf",i.selectedDay))},dependencies:[zs,Td,qs,cV,zd],styles:[".month-view[_ngcontent-%COMP%], .day-view[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.normal-button[_ngcontent-%COMP%]{background-color:#6da7e9;color:#fff;border:none;border-radius:50px;padding:.6rem 1rem;margin:0 .5rem;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s,transform .3s;text-align:left;box-shadow:0 4px 6px #0003;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.normal-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer}.normal-button[_ngcontent-%COMP%]:active{transform:translateY(2px)}.month-navigation[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.month-navigation[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;flex:1;text-align:center;font-size:2em;color:#37474f;text-shadow:1px 1px 2px rgba(0,0,0,.1)}h2[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:2.2em;margin-bottom:20px;color:#fff;background-color:#0075ff;border-radius:5px;padding:10px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:10px;background-color:#ffaa64;padding:15px;border-radius:8px;box-shadow:0 2px 10px #0003;margin:20px}.today[_ngcontent-%COMP%]{background-color:#b4c2d3!important}.day[_ngcontent-%COMP%]{padding:15px;cursor:pointer;background-color:#ffdfba;border:1px solid black;border-radius:8px;color:#333;font-weight:700;transition:background-color .3s,transform .3s}.day[_ngcontent-%COMP%]:hover{background-color:#f39e49!important;transform:scale(1.05)}.add-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.add-button[_ngcontent-%COMP%]{background-color:#6da7e9;color:#fff;border:none;border-radius:50px;padding:.3rem .6rem;font-size:1rem;font-weight:700;transition:background-color .3s,transform .3s;box-shadow:0 4px 6px #0003;text-align:center;display:inline-block;text-decoration:none!important}.add-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer}.appointment-indicator[_ngcontent-%COMP%]{font-size:1.2em;color:red;margin-top:5px}.day.selected[_ngcontent-%COMP%]{background-color:#00796b;color:#fff}.day-view[_ngcontent-%COMP%]{margin-top:20px}.day-view[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:2em;color:#fff;margin-bottom:15px}.time-slots[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin:10px}.time-slots[_ngcontent-%COMP%]{padding:10px;background-color:#ffaa64;color:#000;border-radius:5px;transition:background-color .3s,transform .3s}.time-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:96%;background-color:#ffdfba;padding:10px;color:#000;border-radius:5px;border:1px solid black;transition:background-color .3s,transform .3s}.time-text[_ngcontent-%COMP%]{flex-grow:1;text-align:center}.appointments[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#ffdfba;padding:10px;color:#000;border-radius:5px;border-left:1px solid black;border-right:1px solid black;border-bottom:1px solid black;transition:background-color .3s,transform .3s;cursor:pointer}.no-appointments[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-style:italic}.add-appointment-container[_ngcontent-%COMP%]{display:block;align-items:center;text-align:center;max-width:10%;min-width:200px;margin:0 auto}.add-appointment[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#6da7e9;color:#fff;border:none;border-radius:50px;padding:.3rem .6rem;font-size:.6rem;font-weight:700;cursor:pointer;transition:background-color .3s,transform .3s;box-shadow:0 4px 6px #0003;text-align:center;display:block}.add-appointment[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer}@media (max-width: 600px){.month-view[_ngcontent-%COMP%], .day-view[_ngcontent-%COMP%]{padding:0 10px}.time-label[_ngcontent-%COMP%]{width:93%}.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.month-navigation[_ngcontent-%COMP%]{flex-direction:column}.normal-button[_ngcontent-%COMP%]{width:100%;margin:5px 0}h2[_ngcontent-%COMP%]{font-size:1.5em}}.day[_ngcontent-%COMP%]{text-align:center}.day-abbreviation[_ngcontent-%COMP%]{font-size:.8em;color:#555}.appointment-times[_ngcontent-%COMP%]{display:flex;gap:10px;font-size:.8em;color:#555}.appointment-times[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;color:#333}"]})}return t})();var uy,fme=new Uint8Array(16);function pme(){if(!uy&&!(uy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uy(fme)}const gme=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var pn=[],zS=0;zS<256;++zS)pn.push((zS+256).toString(16).substr(1));const vme=function yme(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(pn[t[e+0]]+pn[t[e+1]]+pn[t[e+2]]+pn[t[e+3]]+"-"+pn[t[e+4]]+pn[t[e+5]]+"-"+pn[t[e+6]]+pn[t[e+7]]+"-"+pn[t[e+8]]+pn[t[e+9]]+"-"+pn[t[e+10]]+pn[t[e+11]]+pn[t[e+12]]+pn[t[e+13]]+pn[t[e+14]]+pn[t[e+15]]).toLowerCase();if(!function mme(t){return"string"==typeof t&&gme.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n},Eme=function Ime(t,e,n){var r=(t=t||{}).random||(t.rng||pme)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return vme(r)};let wme=(()=>{class t{firebaseService;route;router;date="";startTime="";endTime="";title="";description="";constructor(n,r,i){this.firebaseService=n,this.route=r,this.router=i,this.route.queryParams.subscribe(o=>{this.date=o.date||"",this.startTime=o.startTime||"",this.endTime=o.endTime||"",console.log("Received params:",o)})}addAppointment(){if(this.date&&this.startTime&&this.endTime&&this.title&&this.description){const n=new Date(this.date),r={id:Eme(),date:ct.fromDate(n),startTime:this.startTime,endTime:this.endTime,title:this.title,description:this.description};this.firebaseService.addAppointment(r).then(()=>{console.log("Appointment added successfully"),this.router.navigate(["/agenda"],{queryParams:{day:n.toISOString()}}),this.resetForm()}).catch(i=>{console.error("Error adding appointment: ",i)})}else console.error("All fields are required")}resetForm(){this.date="",this.startTime="",this.endTime="",this.title="",this.description=""}static \u0275fac=function(r){return new(r||t)(U(ds),U(Uo),U(Rr))};static \u0275cmp=ni({type:t,selectors:[["app-add"]],standalone:!0,features:[gi],decls:18,vars:5,consts:[["type","date","name","date","required","",3,"ngModelChange","ngModel"],["type","time","name","startTime","required","",3,"ngModelChange","ngModel"],["type","time","name","endTime","required","",3,"ngModelChange","ngModel"],["type","text","name","title","required","",3,"ngModelChange","ngModel"],["name","description",3,"ngModelChange","ngModel"],["type","button",3,"click"]],template:function(r,i){1&r&&(H(0,"form")(1,"label"),te(2," Date: "),H(3,"input",0),Yn("ngModelChange",function(s){return dr(i.date,s)||(i.date=s),s}),q()(),H(4,"label"),te(5," Start Time: "),H(6,"input",1),Yn("ngModelChange",function(s){return dr(i.startTime,s)||(i.startTime=s),s}),q()(),H(7,"label"),te(8," End Time: "),H(9,"input",2),Yn("ngModelChange",function(s){return dr(i.endTime,s)||(i.endTime=s),s}),q()(),H(10,"label"),te(11," Title: "),H(12,"input",3),Yn("ngModelChange",function(s){return dr(i.title,s)||(i.title=s),s}),q()(),H(13,"label"),te(14," Description: "),H(15,"textarea",4),Yn("ngModelChange",function(s){return dr(i.description,s)||(i.description=s),s}),q()(),H(16,"button",5),be("click",function(){return i.addAppointment()}),te(17,"Add Appointment"),q()()),2&r&&(Z(3),Qn("ngModel",i.date),Z(3),Qn("ngModel",i.startTime),Z(3),Qn("ngModel",i.endTime),Z(3),Qn("ngModel",i.title),Z(3),Qn("ngModel",i.description))},dependencies:[zs,Zd,zT,jo,Jc,NT,Xd,ta,Jd],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:500px;margin:0 auto;padding:1.5rem;border-radius:10px;box-shadow:0 2px 4px #0000001a;background-color:#ffaa64}label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:700}input[type=date][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:95%;padding:.5rem;margin-bottom:1rem;border:1px solid #ccc;border-radius:5px;font-size:1rem}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}button[_ngcontent-%COMP%]{padding:.7rem;background-color:#0075ff;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1rem;font-weight:700;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}@media (max-width: 600px){form[_ngcontent-%COMP%]{padding:1rem}input[type=date][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:.9rem}}"]})}return t})(),Wu=(()=>{class t{firebaseService;router;constructor(n,r){this.firebaseService=n,this.router=r}canActivate(){return!!this.firebaseService.isLoggedIn()||(this.router.navigate(["/login"]),!1)}static \u0275fac=function(r){return new(r||t)(me(ds),me(Rr))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tme(t,e){if(1&t){const n=Kt();H(0,"li",7),be("click",function(){const i=yt(n).$implicit;return vt(ye(2).toggleUsed(i))}),H(1,"span"),te(2),q(),H(3,"div",8)(4,"button",9),be("click",function(i){const o=yt(n).$implicit;return ye(2).deleteFoodItem(o.id),vt(i.stopPropagation())}),te(5,"\xd7"),q()()()}if(2&t){const n=e.$implicit;Bs("used",n.used),Z(2),yg("",n.name," (",n.description,")")}}function bme(t,e){if(1&t&&(H(0,"div",0)(1,"h3"),te(2,"Food Items"),q(),H(3,"ul"),it(4,Tme,6,4,"li",6),q()()),2&t){const n=ye();Z(4),_e("ngForOf",n.foodItems)}}function Dme(t,e){if(1&t){const n=Kt();H(0,"li",6),be("click",function(){const i=yt(n).$implicit;return vt(ye(2).toggleUsed(i))}),H(1,"span"),te(2),q(),H(3,"div",7)(4,"button",8),be("click",function(i){const o=yt(n).$implicit;return ye(2).deleteShoppingListItem(o.id),vt(i.stopPropagation())}),te(5,"\xd7"),q()()()}if(2&t){const n=e.$implicit;Bs("used",n.used),Z(2),Dr(n.name)}}function Ame(t,e){if(1&t&&(H(0,"div",0)(1,"h3"),te(2,"Shopping List Items"),q(),H(3,"ul"),it(4,Dme,6,3,"li",5),q()()),2&t){const n=ye();Z(4),_e("ngForOf",n.shoppingListItems)}}function Rme(t,e){if(1&t&&(H(0,"p",4),te(1),q()),2&t){const n=ye();Z(),Dr(n.errorMessage)}}function Mme(t,e){if(1&t){const n=Kt();H(0,"li"),te(1),H(2,"button",1),be("click",function(){const i=yt(n).$implicit;return vt(ye(2).sendInvitation(i.email))}),te(3,"Send Invitation"),q()()}if(2&t){const n=e.$implicit;Z(),yg(" ",n.email," - ",n.name," ")}}function Pme(t,e){if(1&t&&(H(0,"ul"),it(1,Mme,4,2,"li",5),q()),2&t){const n=ye();Z(),_e("ngForOf",n.users)}}function xme(t,e){1&t&&(H(0,"p"),te(1,"No results found."),q())}function Nme(t,e){if(1&t){const n=Kt();H(0,"li"),te(1),H(2,"button",6),be("click",function(){const i=yt(n).$implicit;return vt(ye(2).revokeAccess(i.email))}),te(3,"Revoke Access"),q()()}if(2&t){const n=e.$implicit;Z(),qi(" ",n.name," ")}}function Ome(t,e){if(1&t&&(H(0,"ul"),it(1,Nme,4,1,"li",5),q()),2&t){const n=ye();Z(),_e("ngForOf",n.sharedUsers)}}function kme(t,e){1&t&&(H(0,"p"),te(1,"No shared users at the moment."),q())}function Fme(t,e){if(1&t){const n=Kt();H(0,"li"),te(1),H(2,"button",7),be("click",function(){const i=yt(n).$implicit;return vt(ye(2).acceptInvitation(i.id))}),te(3,"Accept"),q(),H(4,"button",6),be("click",function(){const i=yt(n).$implicit;return vt(ye(2).declineInvitation(i.id))}),te(5,"Decline"),q()()}if(2&t){const n=e.$implicit;Z(),qi(" ",n.senderEmail," ")}}function Vme(t,e){if(1&t&&(H(0,"ul"),it(1,Fme,6,1,"li",5),q()),2&t){const n=ye();Z(),_e("ngForOf",n.receivedInvitations)}}function Lme(t,e){1&t&&(H(0,"p"),te(1,"No invitations at the moment."),q())}const Ume=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Bge},{path:"home",component:zge,canActivate:[Wu]},{path:"agenda",component:hme,canActivate:[Wu]},{path:"add",component:wme,canActivate:[Wu]},{path:"foodplanner",component:(()=>{class t{firebaseService;foodItems=[];newFoodItem={userEmail:null,name:"",description:"",userId:"",used:!1};userId="";userEmail=null;sharedUsers=[];constructor(n){this.firebaseService=n}ngOnInit(){const n=Ci().currentUser;n?(this.userId=n.uid,this.userEmail=n.email,this.loadSharedUsers().then(()=>{this.loadFoodItems()}).catch(r=>{console.error("Error loading shared users:",r)})):console.log("User is not authenticated")}loadFoodItems(){if(this.userEmail){const n=[this.userEmail,...this.sharedUsers.map(r=>r.email)];Promise.all(n.map(r=>this.firebaseService.getFoodItems(r))).then(r=>{this.foodItems=r.flat()}).catch(r=>{console.error("Error loading food items:",r)})}}loadSharedUsers(){var n=this;return v(function*(){try{n.sharedUsers=yield n.firebaseService.getSharedUsers()}catch(r){throw console.error("Error loading shared users:",r),r}})()}addFoodItem(){if(this.newFoodItem.name&&this.userId){const n=Ci().currentUser;n?(this.newFoodItem.userEmail=n.email||"",this.newFoodItem.userId=this.userId,this.firebaseService.addFoodItem(this.newFoodItem).then(()=>{this.foodItems.push({...this.newFoodItem}),this.newFoodItem={name:"",description:"",userId:"",userEmail:"",used:!1}}).catch(r=>{console.error("Error adding food item:",r)})):console.error("User is not authenticated")}}toggleUsed(n){n.used=!n.used,n.id&&this.firebaseService.updateFoodItem(n.id,n)}deleteFoodItem(n){this.firebaseService.deleteFoodItem(n).then(()=>{this.foodItems=this.foodItems.filter(r=>r.id!==n)}).catch(r=>{console.error("Error deleting food item:",r)})}clearAllItems(){const n=[this.userEmail,...this.sharedUsers.map(r=>r.email)];Promise.all(n.map(r=>this.firebaseService.getFoodItems(r))).then(r=>{const i=r.flat();Promise.all(i.map(o=>this.firebaseService.deleteFoodItem(o.id))).then(()=>{this.foodItems=[]}).catch(o=>{console.error("Error deleting food items:",o)})}).catch(r=>{console.error("Error loading food items:",r)})}static \u0275fac=function(r){return new(r||t)(U(ds))};static \u0275cmp=ni({type:t,selectors:[["app-foodplanner"]],standalone:!0,features:[gi],decls:11,vars:3,consts:[[1,"food-planner"],["placeholder","Dish Name",3,"ngModelChange","ngModel"],["placeholder","Description",3,"ngModelChange","ngModel"],[1,"clear-button",3,"click"],["class","food-planner",4,"ngIf"],[1,"clear-button-container"],[3,"used","click",4,"ngFor","ngForOf"],[3,"click"],[1,"delete-button-container"],[1,"delete-button",3,"click"]],template:function(r,i){1&r&&(H(0,"h2"),te(1,"Food Planner"),q(),H(2,"div",0)(3,"input",1),Yn("ngModelChange",function(s){return dr(i.newFoodItem.name,s)||(i.newFoodItem.name=s),s}),q(),H(4,"input",2),Yn("ngModelChange",function(s){return dr(i.newFoodItem.description,s)||(i.newFoodItem.description=s),s}),q(),H(5,"button",3),be("click",function(){return i.addFoodItem()}),te(6,"Add Food Item"),q()(),it(7,bme,5,1,"div",4),H(8,"div",5)(9,"button",3),be("click",function(){return i.clearAllItems()}),te(10,"Clear All Items"),q()()),2&r&&(Z(3),Qn("ngModel",i.newFoodItem.name),Z(),Qn("ngModel",i.newFoodItem.description),Z(3),_e("ngIf",i.foodItems.length>0))},dependencies:[zs,Td,qs,Zd,jo,Jc,ta],styles:[".food-planner[_ngcontent-%COMP%]{max-width:400px;margin:10px auto;padding:20px;background-color:#ffaa64;border-radius:8px;box-shadow:0 4px 8px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}h2[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block;align-items:center;max-width:400px;font-size:2.2em;color:#fff;background-color:#0075ff;border-radius:5px;padding:10px;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}h3[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#0075ff;color:#fff;margin:20px;text-align:center;padding:10px}input[_ngcontent-%COMP%]{width:100%;padding:8px;margin:5px 0;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}.delete-button[_ngcontent-%COMP%]{background-color:#dc2828;color:#fff;border:none;border-radius:50px;padding:.3rem .6rem;font-size:1rem;font-weight:700;transition:background-color .3s,transform .3s;box-shadow:0 4px 6px #0003;text-align:center;display:inline-block;text-decoration:none!important}.delete-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;display:flex;justify-content:space-between;padding:10px;background-color:#ffdfba;border:1px solid black;border-radius:5px;margin-top:5px;cursor:pointer}li.used[_ngcontent-%COMP%]{background-color:#8e785f;text-decoration:line-through;color:#000}li[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{text-decoration:none!important}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.clear-button-container[_ngcontent-%COMP%]{display:block;align-items:center;text-align:center;max-width:10%;min-width:200px;margin:auto}.clear-button[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#6da7e9;color:#fff;border:none;border-radius:50px;padding:.3rem .6rem;font-size:1rem;font-weight:700;transition:background-color .3s,transform .3s;box-shadow:0 4px 6px #0003;text-align:center;display:block;margin:10px auto}.clear-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer}"]})}return t})(),canActivate:[Wu]},{path:"shopping-list",component:(()=>{class t{firebaseService;shoppingListItems=[];newShoppingListItem={userEmail:null,name:"",userId:"",used:!1};userId="";userEmail=null;sharedUsers=[];constructor(n){this.firebaseService=n}ngOnInit(){const n=Ci().currentUser;n?(this.userId=n.uid,this.userEmail=n.email,this.loadSharedUsers().then(()=>{this.loadShoppingListItems()}).catch(r=>{console.error("Error loading shared users:",r)})):console.log("User is not authenticated")}loadShoppingListItems(){if(this.userEmail){const n=[this.userEmail,...this.sharedUsers.map(r=>r.email)];Promise.all(n.map(r=>this.firebaseService.getShoppingListItems(r))).then(r=>{this.shoppingListItems=r.flat()}).catch(r=>{console.error("Error loading shopping list items:",r)})}}loadSharedUsers(){var n=this;return v(function*(){try{n.sharedUsers=yield n.firebaseService.getSharedUsers()}catch(r){throw console.error("Error loading shared users:",r),r}})()}addShoppingListItem(){if(this.newShoppingListItem.name&&this.userId){const n=Ci().currentUser;n?(this.newShoppingListItem.userEmail=n.email||"",this.newShoppingListItem.userId=this.userId,this.firebaseService.addShoppingListItem(this.newShoppingListItem).then(()=>{this.shoppingListItems.push({...this.newShoppingListItem}),this.newShoppingListItem={name:"",userId:"",userEmail:"",used:!1}}).catch(r=>{console.error("Error adding shopping list item:",r)})):console.error("User is not authenticated")}}toggleUsed(n){n.used=!n.used,n.id&&this.firebaseService.updateShoppingListItem(n.id,n)}deleteShoppingListItem(n){this.firebaseService.deleteShoppingListItem(n).then(()=>{this.shoppingListItems=this.shoppingListItems.filter(r=>r.id!==n)}).catch(r=>{console.error("Error deleting shopping list item:",r)})}clearAllItems(){const n=[this.userEmail,...this.sharedUsers.map(r=>r.email)];Promise.all(n.map(r=>this.firebaseService.getShoppingListItems(r))).then(r=>{const i=r.flat();Promise.all(i.map(o=>this.firebaseService.deleteShoppingListItem(o.id))).then(()=>{this.shoppingListItems=[]}).catch(o=>{console.error("Error deleting shopping list items:",o)})}).catch(r=>{console.error("Error loading shopping list items:",r)})}static \u0275fac=function(r){return new(r||t)(U(ds))};static \u0275cmp=ni({type:t,selectors:[["app-shopping-list"]],standalone:!0,features:[gi],decls:10,vars:2,consts:[[1,"shopping-list"],["placeholder","Item Name",3,"ngModelChange","ngModel"],[1,"clear-button",3,"click"],["class","shopping-list",4,"ngIf"],[1,"clear-button-container"],[3,"used","click",4,"ngFor","ngForOf"],[3,"click"],[1,"delete-button-container"],[1,"delete-button",3,"click"]],template:function(r,i){1&r&&(H(0,"h2"),te(1,"Shopping List"),q(),H(2,"div",0)(3,"input",1),Yn("ngModelChange",function(s){return dr(i.newShoppingListItem.name,s)||(i.newShoppingListItem.name=s),s}),q(),H(4,"button",2),be("click",function(){return i.addShoppingListItem()}),te(5,"Add Shopping List Item"),q()(),it(6,Ame,5,1,"div",3),H(7,"div",4)(8,"button",2),be("click",function(){return i.clearAllItems()}),te(9,"Clear All Items"),q()()),2&r&&(Z(3),Qn("ngModel",i.newShoppingListItem.name),Z(3),_e("ngIf",i.shoppingListItems.length>0))},dependencies:[zs,Td,qs,Zd,jo,Jc,ta],styles:[".shopping-list[_ngcontent-%COMP%]{max-width:400px;margin:10px auto;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#ffaa64;border-radius:8px;box-shadow:0 4px 8px #0000001a}h2[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;display:block;align-items:center;max-width:400px;font-size:2.2em;color:#fff;background-color:#0075ff;border-radius:5px;padding:10px;text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}h3[_ngcontent-%COMP%]{background-color:#0075ff;color:#fff;margin:20px;text-align:center;padding:10px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}input[_ngcontent-%COMP%]{width:100%;padding:8px;margin:5px 0;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}.delete-button[_ngcontent-%COMP%]{background-color:#dc2828;color:#fff;border:none;border-radius:50px;padding:.3rem .6rem;font-size:1rem;font-weight:700;transition:background-color .3s,transform .3s;box-shadow:0 4px 6px #0003;text-align:center;display:inline-block;text-decoration:none!important}.delete-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px;background-color:#ffdfba;border:1px solid black;border-radius:5px;margin-top:5px;cursor:pointer;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}li.used[_ngcontent-%COMP%]{background-color:#8e785f;text-decoration:line-through;color:#000}li[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{text-decoration:none!important}li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.clear-button-container[_ngcontent-%COMP%]{display:block;align-items:center;text-align:center;max-width:10%;min-width:200px;margin:auto}.clear-button[_ngcontent-%COMP%]{background-color:#6da7e9;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#fff;border:none;border-radius:50px;padding:.3rem .6rem;font-size:1rem;font-weight:700;transition:background-color .3s,transform .3s;box-shadow:0 4px 6px #0003;text-align:center;display:block;margin:10px auto}.clear-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);cursor:pointer}"]})}return t})(),canActivate:[Wu]},{path:"my-family",component:(()=>{class t{firebaseService;searchTerm="";users=[];errorMessage="";searchPerformed=!1;receivedInvitations=[];sharedUsers=[];constructor(n){this.firebaseService=n,this.loadInvitations(),this.loadSharedUsers()}searchUsers(){if(this.searchPerformed=!0,""===this.searchTerm.trim())return this.errorMessage="Please enter a valid email address.",void(this.users=[]);this.firebaseService.searchUsers(this.searchTerm).then(n=>{this.users=n,this.errorMessage="",0===n.length&&(this.errorMessage="No results found.")},n=>{this.errorMessage="An error occurred during the search. Please try again.",console.error("Search error:",n),this.users=[]})}sendInvitation(n){this.firebaseService.sendInvitation(n).then(()=>{alert("Invitation sent successfully.")}).catch(r=>{console.error("Error sending invitation:",r),alert("Failed to send invitation.")})}acceptInvitation(n){this.firebaseService.acceptInvitation(n).then(()=>{alert("Invitation accepted."),this.loadInvitations(),this.loadSharedUsers()}).catch(r=>{console.error("Error accepting invitation:",r),alert("Failed to accept invitation.")})}declineInvitation(n){this.firebaseService.declineInvitation(n).then(()=>{alert("Invitation declined."),this.loadInvitations()}).catch(r=>{console.error("Error declining invitation:",r),alert("Failed to decline invitation.")})}revokeAccess(n){this.firebaseService.revokeAccess(n).then(()=>{alert("Access revoked."),this.loadSharedUsers()}).catch(r=>{console.error("Error revoking access:",r),alert("Failed to revoke access.")})}loadInvitations(){this.firebaseService.getReceivedInvitations().then(n=>{this.receivedInvitations=n}).catch(n=>{console.error("Error loading invitations:",n)})}loadSharedUsers(){this.firebaseService.getSharedUsers().then(n=>{this.sharedUsers=n}).catch(n=>{console.error("Error loading shared users:",n)})}static \u0275fac=function(r){return new(r||t)(U(ds))};static \u0275cmp=ni({type:t,selectors:[["app-my-family"]],standalone:!0,features:[gi],decls:17,vars:8,consts:[["placeholder","Enter full email address","type","email",3,"ngModelChange","ngModel"],[3,"click"],["style","color: red;",4,"ngIf"],[4,"ngIf"],[2,"color","red"],[4,"ngFor","ngForOf"],[1,"revoke",3,"click"],[1,"accept",3,"click"]],template:function(r,i){1&r&&(H(0,"div")(1,"input",0),Yn("ngModelChange",function(s){return dr(i.searchTerm,s)||(i.searchTerm=s),s}),q(),H(2,"button",1),be("click",function(){return i.searchUsers()}),te(3,"Search"),q(),it(4,Rme,2,1,"p",2)(5,Pme,2,1,"ul",3)(6,xme,2,0,"p",3),q(),H(7,"div")(8,"h3"),te(9,"My Family Members"),q(),it(10,Ome,2,1,"ul",3)(11,kme,2,0,"p",3),q(),H(12,"div")(13,"h3"),te(14,"Invitations"),q(),it(15,Vme,2,1,"ul",3)(16,Lme,2,0,"p",3),q()),2&r&&(Z(),Qn("ngModel",i.searchTerm),Z(3),_e("ngIf",i.errorMessage),Z(),_e("ngIf",i.users.length>0),Z(),_e("ngIf",i.searchPerformed&&0===i.users.length&&""===i.errorMessage),Z(4),_e("ngIf",i.sharedUsers.length>0),Z(),_e("ngIf",0===i.sharedUsers.length),Z(4),_e("ngIf",i.receivedInvitations.length>0),Z(),_e("ngIf",0===i.receivedInvitations.length))},dependencies:[Zd,jo,Jc,ta,zs,Td,qs],styles:["div[_ngcontent-%COMP%]{margin:1rem auto;padding:1rem;border-radius:8px;background-color:#ffaa64;max-width:600px;box-shadow:0 4px 6px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1.5rem;color:#333;border-bottom:2px solid #f39e49;padding-bottom:.25rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}div[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{width:calc(100% - 20px);padding:.5rem;margin-bottom:.75rem;border:1px solid #ccc;border-radius:4px;font-size:1rem;transition:border-color .3s}div[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#0075ff;color:#fff;padding:.5rem 1rem;margin-left:.5rem;border:none;border-radius:4px;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]   .revoke[_ngcontent-%COMP%]{background-color:#dc2828}div[_ngcontent-%COMP%]   .accept[_ngcontent-%COMP%]{background-color:#7cb849}div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;margin:.5rem 0;font-size:.9rem}div[_ngcontent-%COMP%]   p.error[_ngcontent-%COMP%]{color:red;font-weight:700}div[_ngcontent-%COMP%]   p.info[_ngcontent-%COMP%]{color:#555}div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;list-style:none;padding:0}div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem;border:1px solid black;border-radius:4px;margin-bottom:.5rem;background-color:#ffdfba}div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5rem}div[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:1.5rem 0;border:none;border-top:1px solid #ccc}"]})}return t})(),canActivate:[Wu]}],jme=["addListener","removeListener"],Bme=["addEventListener","removeEventListener"],$me=["on","off"];function ly(t,e,n,r){if(xe(n)&&(r=n,n=void 0),r)return ly(t,e,n).pipe(tT(r));const[i,o]=function qme(t){return xe(t.addEventListener)&&xe(t.removeEventListener)}(t)?Bme.map(s=>a=>t[s](e,a,n)):function Hme(t){return xe(t.addListener)&&xe(t.removeListener)}(t)?jme.map(CG(t,e)):function Gme(t){return xe(t.on)&&xe(t.off)}(t)?$me.map(CG(t,e)):[];if(!i&&$w(t))return ln(s=>ly(s,e,n))(Jn(t));if(!i)throw new TypeError("Invalid event target");return new dt(s=>{const a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function CG(t,e){return n=>r=>t[n](e,r)}const Ku=new dt(tl);function DG(...t){const e=Dd(t),n=function JZ(t,e){return"number"==typeof Fw(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Jn(r[0]):rm(n)(Zt(r,e)):kr}const Wme={connector:()=>new _n};function AG(t,e=Wme){const{connector:n}=e;return Bt((r,i)=>{const o=n();Jn(t(function zme(t){return new dt(e=>t.subscribe(e))}(o))).subscribe(i),i.add(r.subscribe(o))})}class Yme extends mn{constructor(e,n){super()}schedule(e,n=0){return this}}const dy={setInterval(t,e,...n){const{delegate:r}=dy;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=dy;return(e?.clearInterval||clearInterval)(t)},delegate:void 0},SG={now:()=>(SG.delegate||Date).now(),delegate:void 0};class ff{constructor(e,n=ff.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}ff.now=SG.now;const RG=new class Xme extends ff{constructor(e,n=ff.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}(class Jme extends Yme{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return dy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&dy.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,jf(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}),Zme=RG;function MG(t,e){return e?n=>Rd(e.pipe($n(1),function e_e(){return Bt((t,e)=>{t.subscribe(Ot(e,tl))})}()),n.pipe(MG(t))):ln((n,r)=>Jn(t(n,r)).pipe($n(1),TL(n)))}const pf="Service workers are disabled or not supported by this browser";class hy{constructor(e){if(this.serviceWorker=e,e){const r=ly(e,"controllerchange").pipe(Ae(()=>e.controller)),o=Rd(im(()=>fe(e.controller)),r);this.worker=o.pipe(Er(d=>!!d)),this.registration=this.worker.pipe(pr(()=>e.getRegistration()));const u=ly(e,"message").pipe(Ae(d=>d.data)).pipe(Er(d=>d&&d.type)).pipe(function Qme(t){return t?e=>AG(t)(e):e=>function Kme(t,e){const n=xe(t)?t:()=>t;return xe(e)?AG(e,{connector:n}):r=>new rT(r,n)}(new _n)(e)}());u.connect(),this.events=u}else this.worker=this.events=this.registration=function i_e(t){return im(()=>Md(new Error(t)))}(pf)}postMessage(e,n){return this.worker.pipe($n(1),un(r=>{r.postMessage({action:e,...n})})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){const i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let n;return n="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(Er(n))}nextEventOfType(e){return this.eventsOfType(e).pipe($n(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Er(n=>n.nonce===e),$n(1),Ae(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let o_e=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new _n,!n.isEnabled)return this.messages=Ku,this.notificationClicks=Ku,void(this.subscription=Ku);this.messages=this.sw.eventsOfType("PUSH").pipe(Ae(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ae(i=>i.data)),this.pushManager=this.sw.registration.pipe(Ae(i=>i.pushManager));const r=this.pushManager.pipe(pr(i=>i.getSubscription()));this.subscription=DG(r,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(pf));const r={userVisibleOnly:!0};let i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,this.pushManager.pipe(pr(s=>s.subscribe(r)),$n(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe($n(1),pr(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(pf))}decodeBase64(n){return atob(n)}static{this.\u0275fac=function(r){return new(r||t)(me(hy))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac})}}return t})(),s_e=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=Ku,void(this.unrecoverable=Ku);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(pf));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(pf));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static{this.\u0275fac=function(r){return new(r||t)(me(hy))}}static{this.\u0275prov=ie({token:t,factory:t.\u0275fac})}}return t})();const PG=new z("");function a_e(t,e,n,r){return()=>{if(!dV(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;const i=t.get(Le),o=t.get(hr);let s;if(i.runOutsideAngular(()=>{const a=navigator.serviceWorker,c=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",c),o.onDestroy(()=>{a.removeEventListener("controllerchange",c)})}),"function"==typeof n.registrationStrategy)s=n.registrationStrategy();else{const[a,...c]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=fe(null);break;case"registerWithDelay":s=xG(+c[0]||0);break;case"registerWhenStable":const u=Zt(t.get(hr).whenStable());s=c[0]?DG(u,xG(+c[0])):u;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}i.runOutsideAngular(()=>s.pipe($n(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function xG(t){return fe(null).pipe(function r_e(t,e=RG){const n=function n_e(t=0,e,n=Zme){let r=-1;return null!=e&&(wV(e)?n=e:r=e),new dt(i=>{let o=function t_e(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(t,e);return MG(()=>n)}(t))}function c_e(t,e){return new hy(dV(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}class WS{}function NG(t,e={}){return Is([o_e,s_e,{provide:PG,useValue:t},{provide:WS,useValue:e},{provide:hy,useFactory:c_e,deps:[WS,ui]},{provide:X1,useFactory:a_e,deps:[Xt,PG,WS,ui],multi:!0}])}const u_e={providers:[function WY(t){const e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=aw({ngZoneFactory:()=>{const i=cw(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&En("NgZone_CoalesceEvent"),new Le(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Is([{provide:zY,useValue:!0},{provide:mc,useValue:!1},r])}({eventCoalescing:!0}),function fie(t,...e){return Is([{provide:wm,multi:!0,useValue:t},[],{provide:Uo,useFactory:v2,deps:[Rr]},{provide:pd,multi:!0,useFactory:I2},e.map(n=>n.\u0275providers)])}(Ume),function qte(...t){const e=[],n=new Set,r=n.has(Qs.HttpTransferCacheOptions);for(const{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return Is([[],KJ(),n.has(Qs.NoHttpTransferCache)||r?[]:gte({}),e])}(),NG("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"}),NG("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]};function l_e(t,e){if(1&t){const n=Kt();H(0,"button",5),be("click",function(){return yt(n),vt(ye().navigateToMyFamily())}),Gi(1,"img",6),te(2,"My Family "),q()}}function d_e(t,e){if(1&t){const n=Kt();H(0,"button",5),be("click",function(){return yt(n),vt(ye().navigateToHome())}),Gi(1,"img",7),te(2,"Home "),q()}}function h_e(t,e){if(1&t){const n=Kt();H(0,"button",5),be("click",function(){return yt(n),vt(ye().logout())}),Gi(1,"img",8),te(2,"Logout "),q()}}(function Ote(t,e){return RJ({rootComponent:t,...mL(e)})})((()=>{class t{router;firebaseService;title="MasniOrganizer";showHomeButton=!1;showLogoutButton=!1;constructor(n,r){this.router=n,this.firebaseService=r}ngOnInit(){this.updateButtonVisibility(this.router.url),this.router.events.pipe(Er(n=>n instanceof Lo)).subscribe(n=>{this.updateButtonVisibility(n.url)})}updateButtonVisibility(n){const r="/login"===n||"/"===n;this.showHomeButton=!r,this.showLogoutButton=!r&&this.firebaseService.isLoggedIn()}navigateToHome(){this.router.navigate(["/home"]).catch(n=>{console.error("Navigation to home failed:",n)})}navigateToMyFamily(){this.router.navigate(["/my-family"]).catch(n=>{console.error("Navigation to myFamily failed:",n)})}logout(){this.firebaseService.logout().then(()=>{this.router.navigate(["/login"],{replaceUrl:!0}).catch(n=>{console.error("Navigation to login failed:",n)})})}static \u0275fac=function(r){return new(r||t)(U(Rr),U(ds))};static \u0275cmp=ni({type:t,selectors:[["app-root"]],standalone:!0,features:[gi],decls:9,vars:3,consts:[[1,"image-wrapper"],["src","./dog.png","alt","Dog Image"],["src","./banner.png","alt","Banner Image",1,"logo"],[1,"navigation"],["class","header-button",3,"click",4,"ngIf"],[1,"header-button",3,"click"],["src","./family.png","alt","Family Icon"],["src","./home.png","alt","Home Icon"],["src","./logout.png","alt","Logout Icon"]],template:function(r,i){1&r&&(H(0,"header")(1,"div",0),Gi(2,"img",1)(3,"img",2),q(),H(4,"div",3),it(5,l_e,3,0,"button",4)(6,d_e,3,0,"button",4)(7,h_e,3,0,"button",4),q()(),Gi(8,"router-outlet")),2&r&&(Z(5),_e("ngIf",i.showHomeButton),Z(),_e("ngIf",i.showHomeButton),Z(),_e("ngIf",i.showLogoutButton))},dependencies:[IT,zs,qs],styles:['header[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:#0075ff;color:#fff;box-shadow:0 4px 8px #0000001a;position:relative}.image-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-grow:1}.navigation[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;display:flex;justify-content:flex-end;align-items:center}.header-button[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background-color:#6da7e9;color:#fff;border:none;border-radius:50px;padding:.6rem 1rem;margin:0 .5rem;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .3s;text-align:center;box-shadow:0 4px 6px #0003;min-width:100px;min-height:100px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header-button[_ngcontent-%COMP%]:hover{background-color:#f9d366;color:#000}.header-button[_ngcontent-%COMP%]:active{transform:scale(.95)}img[_ngcontent-%COMP%]{display:block;width:50px;height:50px}.logo[_ngcontent-%COMP%]{width:358px;height:70px}@media (max-width: 600px){header[_ngcontent-%COMP%]{flex-direction:column;padding:.5rem}.header-button[_ngcontent-%COMP%]{min-width:100px;min-height:100px;margin:.25rem 0;font-size:.9rem}img[_ngcontent-%COMP%]{max-width:80%;height:auto}img[src="./dog.png"][_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]{max-height:50px}}']})}return t})(),u_e).catch(t=>console.error(t))}},Zu=>{Zu(Zu.s=325)}]);